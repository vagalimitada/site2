"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=20)}([function(t,e,r){"use strict";var a;r.d(e,"a",(function(){return a})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(a||(a={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return l}));var a=function(){},n={trace:a,debug:a,log:a,warn:a,info:a,error:a},i=n;function s(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):a}function o(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];r.forEach((function(e){i[e]=t[e]?t[e].bind(t):s(e)}))}(t,"debug","log","info","warn","error");try{i.log()}catch(t){i=n}}else i=n}var l=n},function(t,e,r){"use strict";var a,n;r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return n})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(a||(a={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};Number.MAX_SAFE_INTEGER},function(t,e,r){"use strict";var a,n;r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return p}));var a,n=r(3),i=r(11),s=r(1),o=r(17),l=r(12);function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(a||(a={}));var h=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[a.AUDIO]=null,e[a.VIDEO]=null,e[a.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),a=[];1===r.length?a[0]=e?e.byteRangeEndOffset:0:a[0]=parseInt(r[1]),a[1]=parseInt(r[0])+a[0],this._byteRange=a},d(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(i.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),f=function(t){function e(e,r){var a;return(a=t.call(this,r)||this)._decryptdata=null,a.rawProgramDateTime=null,a.programDateTime=null,a.tagList=[],a.duration=0,a.sn=0,a.levelkey=void 0,a.type=void 0,a.loader=null,a.level=-1,a.cc=0,a.startPTS=void 0,a.endPTS=void 0,a.appendedPTS=void 0,a.startDTS=void 0,a.endDTS=void 0,a.start=0,a.deltaPTS=void 0,a.maxStartPTS=void 0,a.minEndPTS=void 0,a.stats=new l.a,a.urlId=0,a.data=void 0,a.bitrateTest=!1,a.title=null,a.initSegment=null,a.type=e,a}c(e,t);var r=e.prototype;return r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=o.a.fromURI(t.uri)).method=t.method,r.iv=this.createInitializationVector(e),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(t,e,r,a,n,i){void 0===i&&(i=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,a),o.endDTS=Math.max(o.endDTS,n)):s[t]={startPTS:e,endPTS:r,startDTS:a,endDTS:n,partial:i}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[a.AUDIO]=null,t[a.VIDEO]=null,t[a.AUDIOVIDEO]=null},d(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(n.a)(this.programDateTime))return null;var t=Object(n.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(h),p=function(t){function e(e,r,a,n,i){var s;(s=t.call(this,a)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new l.a,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=n;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,i),i&&(s.fragOffset=i.fragOffset+i.duration),s}return c(e,t),d(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(h)},function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"f",(function(){return h})),r.d(e,"d",(function(){return f})),r.d(e,"c",(function(){return p})),r.d(e,"e",(function(){return y})),r.d(e,"h",(function(){return v})),r.d(e,"a",(function(){return g}));var a=r(9),n=r(5),i=Math.pow(2,32)-1,s=[].push;function o(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r}function c(t,e,r){"data"in t&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function u(t,e){var r,a,n,i=[];if(!e.length)return i;"data"in t?(r=t.data,a=t.start,n=t.end):(a=0,n=(r=t).byteLength);for(var c=a;c<n;){var d=l(r,c),h=d>1?c+d:n;if(o(r.subarray(c+4,c+8))===e[0])if(1===e.length)i.push({data:r,start:c+8,end:h});else{var f=u({data:r,start:c+8,end:h},e.slice(1));f.length&&s.apply(i,f)}c=h}return i}function d(t){var e=u(t,["moov"])[0],r=e?e.end:null,a=u(t,["sidx"]);if(!a||!a[0])return null;var n=[],i=a[0],s=i.data[0],o=0===s?8:16,c=l(i,o);o+=4,o+=0===s?8:16,o+=2;var d=i.end+0,h=function(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r}(i,o);o+=2;for(var f=0;f<h;f++){var p=o,m=l(i,p);p+=4;var y=2147483647&m;if(1==(2147483648&m)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var v=l(i,p);p+=4,n.push({referenceSize:y,subsegmentDuration:v,info:{duration:v/c,start:d,end:d+y-1}}),d+=y,o=p+=4}return{earliestPresentationTime:0,timescale:c,version:s,referencesCount:h,references:n,moovEndOffset:r}}function h(t){for(var e=[],r=u(t,["moov","trak"]),a=0;a<r.length;a++){var i=r[a],s=u(i,["tkhd"])[0];if(s){var c=s.data[s.start],d=0===c?12:20,h=l(s,d),f=u(i,["mdia","mdhd"])[0];if(f){var p=l(f,d=0===(c=f.data[f.start])?12:20),m=u(i,["mdia","hdlr"])[0];if(m){var y=o(m.data.subarray(m.start+8,m.start+12)),v={soun:n.a.AUDIO,vide:n.a.VIDEO}[y];if(v){var g=u(i,["mdia","minf","stbl","stsd"])[0],b=void 0;g&&(b=o(g.data.subarray(g.start+12,g.start+16))),e[h]={timescale:p,type:v},e[v]={timescale:p,id:h,codec:b}}}}}}return u(t,["moov","mvex","trex"]).forEach((function(t){var r=l(t,4),a=e[r];a&&(a.default={duration:l(t,12),flags:l(t,20)})})),e}function f(t,e){return u(e,["moof","traf"]).reduce((function(e,r){var a=u(r,["tfdt"])[0],n=a.data[a.start],i=u(r,["tfhd"]).reduce((function(e,r){var i=l(r,4),s=t[i];if(s){var o=l(a,4);1===n&&(o*=Math.pow(2,32),o+=l(a,8));var c=o/(s.timescale||9e4);if(isFinite(c)&&(null===e||c<e))return c}return e}),null);return null!==i&&isFinite(i)&&(null===e||i<e)?i:e}),null)||0}function p(t,e){for(var r=0,a=0,i=0,s=u(t,["moof","traf"]),o=0;o<s.length;o++){var c=s[o],h=u(c,["tfhd"])[0],f=e[l(h,4)];if(f){var p=f.default,y=l(h,0)|(null==p?void 0:p.flags),v=null==p?void 0:p.duration;8&y&&(v=l(h,2&y?12:8));for(var g=f.timescale||9e4,b=u(c,["trun"]),w=0;w<b.length;w++)!(r=m(b[w]))&&v&&(r=v*l(b[w],4)),f.type===n.a.VIDEO?a+=r/g:f.type===n.a.AUDIO&&(i+=r/g)}}if(0===a&&0===i){var k=d(t);if(null!=k&&k.references)return k.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return a||i}function m(t){var e=l(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var a=0,n=l(t,4),i=0;i<n;i++)256&e&&(a+=l(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return a}function y(t,e,r){u(e,["moof","traf"]).forEach((function(e){u(e,["tfhd"]).forEach((function(a){var n=l(a,4),s=t[n];if(s){var o=s.timescale||9e4;u(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],a=l(t,4);if(0===e)c(t,4,a-r*o);else{a*=Math.pow(2,32),a+=l(t,8),a-=r*o,a=Math.max(a,0);var n=Math.floor(a/(i+1)),s=Math.floor(a%(i+1));c(t,4,n),c(t,8,s)}}))}}))}))}function v(t){var e={valid:null,remainder:null},r=u(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var n=r[r.length-1];return e.valid=Object(a.a)(t,0,n.start-8),e.remainder=Object(a.a)(t,n.start-8),e}function g(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}},function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"c",(function(){return h})),r.d(e,"f",(function(){return g}));var a,n=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},i=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s=function(t,e){for(var r=e,a=0;n(t,e);)a+=10,a+=o(t,e+6),i(t,e+10)&&(a+=10),e+=a;if(a>0)return t.subarray(r,r+a)},o=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},l=function(t,e){return n(t,e)&&o(t,e+6)+10<=t.length-e},c=function(t){for(var e=h(t),r=0;r<e.length;r++){var a=e[r];if(u(a))return v(a)}},u=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=o(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},h=function(t){for(var e=0,r=[];n(t,e);){for(var a=o(t,e+6),s=(e+=10)+a;e+8<s;){var l=d(t.subarray(e)),c=f(l);c&&r.push(c),e+=l.size+10}i(t,e)&&(e+=10)}return r},f=function(t){return"PRIV"===t.type?p(t):"W"===t.type[0]?y(t):m(t)},p=function(t){if(!(t.size<2)){var e=g(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},m=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data.subarray(1));return{key:t.type,data:n}}},y=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data);return{key:t.type,data:n}},v=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],a=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return a/=45,r&&(a+=47721858.84),Math.round(a)}},g=function(t,e){void 0===e&&(e=!1);var r=b();if(r){var a=r.decode(t);if(e){var n=a.indexOf("\0");return-1!==n?a.substring(0,n):a}return a.replace(/\0/g,"")}for(var i,s,o,l=t.length,c="",u=0;u<l;){if(0===(i=t[u++])&&e)return c;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(i);break;case 12:case 13:s=t[u++],c+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=t[u++],o=t[u++],c+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&o)<<0)}}return c};function b(){return a||void 0===self.TextDecoder||(a=new self.TextDecoder("utf-8")),a}},function(t,e,r){"use strict";function a(t,e,r,a){void 0===r&&(r=1),void 0===a&&(a=!1);var n=t*e*r;return a?Math.round(n):n}function n(t,e,r,n){return void 0===r&&(r=1),void 0===n&&(n=!1),a(t,e,1/r,n)}function i(t,e){return void 0===e&&(e=!1),a(t,1e3,1/9e4,e)}function s(t,e){return void 0===e&&(e=1),a(t,9e4,1/e)}r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s}))},function(t,e,r){"use strict";function a(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}r.d(e,"a",(function(){return a}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return lt})),r.d(e,"d",(function(){return ut})),r.d(e,"a",(function(){return dt})),r.d(e,"b",(function(){return ht}));var a=r(0),n=r(2),i=r(15),s=r(3),o=r(7),l=r(6),c=r(9),u=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Object(l.a)(this.cachedData,t),this.cachedData=null);var r,a,n=o.b(t,0),i=n?n.length:0,s=this._audioTrack,u=this._id3Track,h=n?o.d(n):void 0,f=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(h,e)),n&&n.length>0&&u.samples.push({pts:this.initPTS,dts:this.initPTS,data:n}),a=this.initPTS;i<f;){if(this.canParse(t,i)){var p=this.appendFrame(s,t,i);p?(this.frameIndex++,a=p.sample.pts,r=i+=p.length):i=f}else o.a(t,i)?(n=o.b(t,i),u.samples.push({pts:a,dts:a,data:n}),r=i+=n.length):i++;if(i===f&&r!==f){var m=Object(c.a)(t,r);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,m):this.cachedData=m}}return{audioTrack:s,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:u,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.destroy=function(){},t}(),d=function(t,e){return Object(s.a)(t)?90*t:9e4*e},h=u,f=r(1);function p(t,e){return 255===t[e]&&240==(246&t[e+1])}function m(t,e){return 1&t[e+1]?7:9}function y(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function v(t,e){return e+1<t.length&&p(t,e)}function g(t,e){if(v(t,e)){var r=m(t,e);if(e+r>=t.length)return!1;var a=y(t,e);if(a<=r)return!1;var n=e+a;return n===t.length||v(t,n)}return!1}function b(t,e,r,i,s){if(!t.samplerate){var o=function(t,e,r,i){var s,o,l,c,u=navigator.userAgent.toLowerCase(),d=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[r+2])>>>6);var p=(60&e[r+2])>>>2;if(!(p>h.length-1))return l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,f.b.log("manifest codec:"+i+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(u)?p>=6?(s=5,c=new Array(4),o=p-3):(s=2,c=new Array(2),o=p):-1!==u.indexOf("android")?(s=2,c=new Array(2),o=p):(s=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&p>=6?o=p-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(u))||!i&&1===l)&&(s=2,c=new Array(2)),o=p)),c[0]=s<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&o)>>1,c[2]=(1&o)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};t.trigger(a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}(e,r,i,s);if(!o)return;t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,f.b.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function w(t){return 9216e4/t}function k(t,e,r,a,n){var i=function(t,e,r,a,n){var i=m(t,e),s=y(t,e);if((s-=i)>0)return{headerLength:i,frameLength:s,stamp:r+a*n}}(e,r,a,n,w(t.samplerate));if(i){var s,o=i.frameLength,l=i.headerLength,c=i.stamp,u=l+o,d=Math.max(0,r+u-e.length);d?(s=new Uint8Array(u-l)).set(e.subarray(r+l,e.length),0):s=e.subarray(r+l,r+u);var h={unit:s,pts:c};return d||t.samples.push(h),{sample:h,length:u,missing:d}}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E=function(t){var e,r;function a(e,r){var a;return(a=t.call(this)||this).observer=void 0,a.config=void 0,a.observer=e,a.config=r,a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,T(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(g(t,e))return f.b.log("ADTS sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&p(t,e)&&y(t,e)<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){b(t,this.observer,e,r,t.manifestCodec);var a=k(t,e,r,this.initPTS,this.frameIndex);if(a&&0===a.missing)return a},a}(h);E.minProbeByteLength=9;var x=E,S=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(l.b)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,r={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(e=Object(l.a)(this.remainderData,t));var a=Object(l.h)(e);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=e;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:r,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.flush=function(){var t={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:t,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();S.minProbeByteLength=1024;var L=S,_=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],R=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],D=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C=[0,1,1,4];function I(t,e,r,a,n){if(!(r+24>e.length)){var i=O(e,r);if(i&&r+i.frameLength<=e.length){var s=a+n*(9e4*i.samplesPerFrame/i.sampleRate),o={unit:e.subarray(r,r+i.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(o),{sample:o,length:i.frameLength,missing:0}}}}function O(t,e){var r=t[e+1]>>3&3,a=t[e+1]>>1&3,n=t[e+2]>>4&15,i=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==i){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*A[14*(3===r?3-a:3===a?3:4)+n-1],c=R[3*(3===r?0:2===r?1:2)+i],u=3===o?1:2,d=D[r][a],h=C[a],f=8*d*h,p=Math.floor(d*l/c+s)*h;if(null===_){var m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_=m?parseInt(m[1]):0}return!!_&&_<=87&&2===a&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:c,channelCount:u,frameLength:p,samplesPerFrame:f}}}function P(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function M(t,e){return e+1<t.length&&P(t,e)}function F(t,e){if(e+1<t.length&&P(t,e)){var r=O(t,e),a=4;null!=r&&r.frameLength&&(a=r.frameLength);var n=e+a;return n===t.length||M(t,n)}return!1}var B=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,a=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");a.set(t.subarray(r,r+n)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&f.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,a=0;a<t;a++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,a=0,n=0,i=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();var m=o();if(l(5),d(3),o(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var y=c();if(3===y&&d(1),f(),f(),d(1),u())for(e=3!==y?8:12,r=0;r<e;r++)u()&&p(r<6?16:64)}f();var v=c();if(0===v)c();else if(1===v)for(d(1),h(),h(),t=c(),r=0;r<t;r++)h();f(),d(1);var g=c(),b=c(),w=l(1);0===w&&d(1),d(1),u()&&(a=c(),n=c(),i=c(),s=c());var k=[1,1];if(u()&&u())switch(o()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(g+1)-2*a-2*n),height:(2-w)*(b+1)*16-(w?2:4)*(i+s),pixelRatio:k}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),N=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new i.a(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,r,a){var n=t[e].unit,i=n.subarray(16,n.length-n.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),o=this;this.decryptBuffer(s,(function(i){var s=new Uint8Array(i);n.set(s,16),a||o.decryptAacSamples(t,e+1,r)}))},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,a),!a)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)r.set(t.subarray(n,n+16),a);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)t.set(r.subarray(a,a+16),n);return t},e.decryptAvcSample=function(t,e,r,a,n,i){var s=V(n.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){n.data=l.getAvcDecryptedUnit(s,o),i||l.decryptAvcSamples(t,e,r+1,a)}))},e.decryptAvcSamples=function(t,e,r,a){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void a();for(var n=t[e].units;!(r>=n.length);r++){var i=n[r];if(!(i.data.length<=48||1!==i.type&&5!==i.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,a,i,s),!s)return}}}},t}(),U={video:1,audio:2,id3:3,text:4},j=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return!(r<0||(r&&f.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=a},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,r,i,s){var o;void 0===i&&(i=!1),void 0===s&&(s=!1),i||(this.sampleAes=null);var c=this._avcTrack,u=this._audioTrack,d=this._id3Track,h=c.pid,p=c.pesData,m=u.pid,y=d.pid,v=u.pesData,g=d.pesData,b=!1,w=this.pmtParsed,k=this._pmtId,T=e.length;if(this.remainderData&&(T=(e=Object(l.a)(this.remainderData,e)).length,this.remainderData=null),T<188&&!s)return this.remainderData=e,{audioTrack:u,avcTrack:c,id3Track:d,textTrack:this._txtTrack};var E=Math.max(0,t.syncOffset(e));(T-=(T+E)%188)<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));for(var x=0,S=E;S<T;S+=188)if(71===e[S]){var L=!!(64&e[S+1]),_=((31&e[S+1])<<8)+e[S+2],A=void 0;if((48&e[S+3])>>4>1){if((A=S+5+e[S+4])===S+188)continue}else A=S+4;switch(_){case h:L&&(p&&(o=q(p))&&this.parseAVCPES(o,!1),p={data:[],size:0}),p&&(p.data.push(e.subarray(A,S+188)),p.size+=S+188-A);break;case m:L&&(v&&(o=q(v))&&(u.isAAC?this.parseAACPES(o):this.parseMPEGPES(o)),v={data:[],size:0}),v&&(v.data.push(e.subarray(A,S+188)),v.size+=S+188-A);break;case y:L&&(g&&(o=q(g))&&this.parseID3PES(o),g={data:[],size:0}),g&&(g.data.push(e.subarray(A,S+188)),g.size+=S+188-A);break;case 0:L&&(A+=e[A]+1),k=this._pmtId=z(e,A);break;case k:L&&(A+=e[A]+1);var R=Y(e,A,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);(h=R.avc)>0&&(c.pid=h),(m=R.audio)>0&&(u.pid=m,u.isAAC=R.isAAC),(y=R.id3)>0&&(d.pid=y),b&&!w&&(f.b.log("reparse from beginning"),b=!1,S=E-188),w=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else x++;x>0&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+x+" TS packet/s that do not start with 0x47"}),c.pesData=p,u.pesData=v,d.pesData=g;var D={audioTrack:u,avcTrack:c,id3Track:d,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(D),D},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,a=t.avcTrack,n=t.id3Track,i=a.pesData,s=r.pesData,o=n.pesData;i&&(e=q(i))?(this.parseAVCPES(e,!0),a.pesData=null):a.pesData=i,s&&(e=q(s))?(r.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),r.pesData=null):(null!=s&&s.size&&f.b.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s),o&&(e=q(o))?(this.parseID3PES(e),n.pesData=null):n.pesData=o},e.demuxSampleAes=function(t,e,r){var a=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new N(this.observer,this.config,e);return this.decrypt(a,n)},e.decrypt=function(t,e){return new Promise((function(r){var a=t.audioTrack,n=t.avcTrack;a.samples&&a.isAAC?e.decryptAacSamples(a.samples,0,(function(){n.samples?e.decryptAvcSamples(n.samples,0,0,(function(){r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var r,a=this,n=this._avcTrack,i=this.parseAVCNALu(t.data),s=this.avcSample,l=!1;t.data=null,s&&i.length&&!n.audFound&&(H(s,n),s=this.avcSample=G(!1,t.pts,t.dts,"")),i.forEach((function(e){switch(e.type){case 1:r=!0,s||(s=a.avcSample=G(!0,t.pts,t.dts,"")),s.frame=!0;var i=e.data;if(l&&i.length>4){var c=new B(i).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(s.key=!0)}break;case 5:r=!0,s||(s=a.avcSample=G(!0,t.pts,t.dts,"")),s.key=!0,s.frame=!0;break;case 6:r=!0;var u=new B(V(e.data));u.readUByte();for(var d=0,h=0,f=!1,p=0;!f&&u.bytesAvailable>1;){d=0;do{d+=p=u.readUByte()}while(255===p);h=0;do{h+=p=u.readUByte()}while(255===p);if(4===d&&0!==u.bytesAvailable){if(f=!0,181===u.readUByte()&&49===u.readUShort()&&1195456820===u.readUInt()&&3===u.readUByte()){for(var m=u.readUByte(),y=31&m,v=[m,u.readUByte()],g=0;g<y;g++)v.push(u.readUByte()),v.push(u.readUByte()),v.push(u.readUByte());K(a._txtTrack.samples,{type:3,pts:t.pts,bytes:v})}}else if(5===d&&0!==u.bytesAvailable){if(f=!0,h>16){for(var b=[],w=0;w<16;w++)b.push(u.readUByte().toString(16)),3!==w&&5!==w&&7!==w&&9!==w||b.push("-");for(var k=h-16,T=new Uint8Array(k),E=0;E<k;E++)T[E]=u.readUByte();K(a._txtTrack.samples,{pts:t.pts,payloadType:d,uuid:b.join(""),userData:Object(o.f)(T),userDataBytes:T})}}else if(h<u.bytesAvailable)for(var x=0;x<h;x++)u.readUByte()}break;case 7:if(r=!0,l=!0,!n.sps){var S=new B(e.data).readSPS();n.width=S.width,n.height=S.height,n.pixelRatio=S.pixelRatio,n.sps=[e.data],n.duration=a._duration;for(var L=e.data.subarray(1,4),_="avc1.",A=0;A<3;A++){var R=L[A].toString(16);R.length<2&&(R="0"+R),_+=R}n.codec=_}break;case 8:r=!0,n.pps||(n.pps=[e.data]);break;case 9:r=!1,n.audFound=!0,s&&H(s,n),s=a.avcSample=G(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,s&&(s.debug+="unknown NAL "+e.type+" ")}s&&r&&s.units.push(e)})),e&&s&&(H(s,n),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,r=this.avcSample;if(!r||0===r.units.length){var a=this._avcTrack.samples;r=a[a.length-1]}if(null!==(t=r)&&void 0!==t&&t.units){var n=r.units;e=n[n.length-1]}return e},e.parseAVCNALu=function(t){var e,r,a=t.byteLength,n=this._avcTrack,i=n.naluState||0,s=i,o=[],l=0,c=-1,u=0;for(-1===i&&(c=0,u=31&t[0],i=0,l=1);l<a;)if(e=t[l++],i)if(1!==i)if(e)if(1===e){if(c>=0){var d={data:t.subarray(c,l-i-1),type:u};o.push(d)}else{var h=this.getLastNalUnit();if(h&&(s&&l<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(r=l-i-1)>0)){var f=new Uint8Array(h.data.byteLength+r);f.set(h.data,0),f.set(t.subarray(0,r),h.data.byteLength),h.data=f,h.state=0}}l<a?(c=l,u=31&t[l],i=0):i=-1}else i=0;else i=3;else i=e?0:2;else i=e?0:1;if(c>=0&&i>=0){var p={data:t.subarray(c,a),type:u,state:i};o.push(p)}if(0===o.length){var m=this.getLastNalUnit();if(m){var y=new Uint8Array(m.data.byteLength+t.byteLength);y.set(m.data,0),y.set(t,m.data.byteLength),m.data=y}}return n.naluState=i,o},e.parseAACPES=function(t){var e,r,i,s,o,l=0,c=this._audioTrack,u=this.aacOverFlow,d=t.data;if(u){this.aacOverFlow=null;var h=u.sample.unit.byteLength,p=Math.min(u.missing,h),m=h-p;u.sample.unit.set(d.subarray(0,p),m),c.samples.push(u.sample),l=u.missing}for(e=l,r=d.length;e<r-1&&!v(d,e);e++);if(e===l||(e<r-1?(i="AAC PES did not start with ADTS header,offset:"+e,s=!1):(i="no ADTS header found in AAC PES",s=!0),f.b.warn("parsing error:"+i),this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:s,reason:i}),!s)){if(b(c,this.observer,d,e,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!u)return void f.b.warn("[tsdemuxer]: AAC PES unknown PTS");var y=w(c.samplerate);o=u.sample.pts+y}for(var g=0;e<r;){if(v(d,e)){if(e+5<r){var T=k(c,d,e,o,g);if(T){if(!T.missing){e+=T.length,g++;continue}this.aacOverFlow=T}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,r=e.length,a=0,n=0,i=t.pts;if(void 0!==i)for(;n<r;)if(M(e,n)){var s=I(this._audioTrack,e,n,i,a);if(!s)break;n+=s.length,a++}else n++;else f.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):f.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function G(t,e,r,a){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:a,length:0}}function z(t,e){return(31&t[e+10])<<8|t[e+11]}function Y(t,e,r,a){var n={audio:-1,avc:-1,id3:-1,isAAC:!0},i=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){var s=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!a){f.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=s);break;case 21:-1===n.id3&&(n.id3=s);break;case 219:if(!a){f.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=s);break;case 3:case 4:r?-1===n.audio&&(n.audio=s,n.isAAC=!1):f.b.log("MPEG audio found, not supported in this browser");break;case 36:f.b.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return n}function q(t){var e,r,a,n,i,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var c=e[7];192&c&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&c?n-(i=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(f.b.warn(Math.round((n-i)/9e4)+"s delta between PTS and DTS, align them"),n=i):i=n);var u=(a=e[8])+9;if(t.size<=u)return null;t.size-=u;for(var d=new Uint8Array(t.size),h=0,p=o.length;h<p;h++){var m=(e=o[h]).byteLength;if(u){if(u>m){u-=m;continue}e=e.subarray(u),m-=u,u=0}d.set(e,s),s+=m}return r&&(r-=a+3),{data:d,pts:n,dts:i,len:r}}return null}function H(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,a=r.length;if(!a)return void e.dropped++;var n=r[a-1];t.pts=n.pts,t.dts=n.dts}e.samples.push(t)}t.debug.length&&f.b.log(t.pts+"/"+t.dts+":"+t.debug)}function K(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var a=r-1;a>=0;a--)if(e.pts<t[a].pts){t.splice(a,0,e);break}}else t.push(e)}function V(t){for(var e=t.byteLength,r=[],a=1;a<e-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;var n=e-r.length,i=new Uint8Array(n),s=0;for(a=0;a<n;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=t[s];return i}j.minProbeByteLength=188;var W=j;function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){var e,r;function a(){return t.apply(this,arguments)||this}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,X(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(F(t,e))return f.b.log("MPEG Audio sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return P(t,e)&&4<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){if(null!==this.initPTS)return I(t,e,r,this.initPTS,this.frameIndex)},a}(h);Q.minProbeByteLength=4;var $=Q,J=r(16),Z=r(5),tt=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,r){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var a=this.initData=Object(l.f)(t);e||(e=rt(a.audio,Z.a.AUDIO)),r||(r=rt(a.video,Z.a.VIDEO));var n={};a.audio&&a.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:a.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:a.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:f.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},e.remux=function(t,e,r,a,n){var i=this.initPTS,o=this.lastEndDTS,c={audio:void 0,video:void 0,text:a,id3:r,initSegment:void 0};Object(s.a)(o)||(o=this.lastEndDTS=n||0);var u=e.samples;if(!u||!u.length)return c;var d={initPTS:void 0,timescale:1},h=this.initData;if(h&&h.length||(this.generateInitSegment(u),h=this.initData),!h||!h.length)return f.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.a)(i)||(this.initPTS=d.initPTS=i=et(h,u,o));var p=Object(l.c)(u,h),m=o,y=p+m;Object(l.e)(h,u,i),p>0?this.lastEndDTS=y:(f.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var v=!!h.audio,g=!!h.video,b="";v&&(b+="audio"),g&&(b+="video");var w={data1:u,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:b,hasAudio:v,hasVideo:g,nb:1,dropped:0};return c.audio="audio"===w.type?w:void 0,c.video="audio"!==w.type?w:void 0,c.text=a,c.id3=r,c.initSegment=d,c},t}(),et=function(t,e,r){return Object(l.d)(t,e)-r};function rt(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===Z.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var at,nt=tt,it=r(13);try{at=self.performance.now.bind(self.performance)}catch(t){f.b.debug("Unable to use Performance API on this environment"),at=self.Date.now}var st=[{demux:W,remux:J.a},{demux:L,remux:nt},{demux:x,remux:J.a},{demux:$,remux:J.a}],ot=1024;st.forEach((function(t){var e=t.demux;ot=Math.max(ot,e.minProbeByteLength)}));var lt=function(){function t(t,e,r,a,n){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new it.a,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=a,this.id=n}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,a){var n=this,i=r.transmuxing;i.executeStart=at();var s=new Uint8Array(t),o=this.cache,c=this.config,u=this.currentTransmuxState,d=this.transmuxConfig;a&&(this.currentTransmuxState=a);var h=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(s,e);if(h&&"AES-128"===h.method){var f=this.getDecrypter();if(!c.enableSoftwareAES)return this.decryptionPromise=f.webCryptoDecrypt(s,h.key.buffer,h.iv.buffer).then((function(t){var e=n.push(t,null,r);return n.decryptionPromise=null,e})),this.decryptionPromise;var p=f.softwareDecrypt(s,h.key.buffer,h.iv.buffer);if(!p)return i.executeEnd=at(),ct(r);s=new Uint8Array(p)}var m=a||u,y=m.contiguous,v=m.discontinuity,g=m.trackSwitch,b=m.accurateTimeOffset,w=m.timeOffset,k=m.initSegmentChange,T=d.audioCodec,E=d.videoCodec,x=d.defaultInitPts,S=d.duration,L=d.initSegmentData;if((v||g||k)&&this.resetInitSegment(L,T,E,S),(v||k)&&this.resetInitialTimestamp(x),y||this.resetContiguity(),this.needsProbing(s,v,g)){if(o.dataLength){var _=o.flush();s=Object(l.a)(_,s)}this.configureTransmuxer(s,d)}var A=this.transmux(s,h,w,b,r),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,i.executeEnd=at(),A},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=at();var i=this.decrypter,s=this.cache,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var c=[],u=o.timeOffset;if(i){var d=i.flush();d&&c.push(this.push(d,null,t))}var h=s.dataLength;s.reset();var f=this.demuxer,p=this.remuxer;if(!f||!p)return h>=ot&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=at(),[ct(t)];var m=f.flush(u);return ut(m)?m.then((function(r){return e.flushRemux(c,r,t),c})):(this.flushRemux(c,m,t),c)},e.flushRemux=function(t,e,r){var a=e.audioTrack,n=e.avcTrack,i=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,c=o.timeOffset;f.b.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var u=this.remuxer.remux(a,n,i,s,c,l,!0,this.id);t.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=at()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,a){var n=this.demuxer,i=this.remuxer;n&&i&&(n.resetInitSegment(e,r,a),i.resetInitSegment(t,e,r))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,a,n){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,a,n):this.transmuxUnencrypted(t,r,a,n)},e.transmuxUnencrypted=function(t,e,r,a){var n=this.demuxer.demux(t,e,!1,!this.config.progressive),i=n.audioTrack,s=n.avcTrack,o=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(i,s,o,l,e,r,!1,this.id),chunkMeta:a}},e.transmuxSampleAes=function(t,e,r,a,n){var i=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:i.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,r,a,!1,i.id),chunkMeta:n}}))},e.configureTransmuxer=function(t,e){for(var r,a=this.config,n=this.observer,i=this.typeSupported,s=this.vendor,o=e.audioCodec,l=e.defaultInitPts,c=e.duration,u=e.initSegmentData,d=e.videoCodec,h=0,p=st.length;h<p;h++)if(st[h].demux.probe(t)){r=st[h];break}r||(f.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:L,remux:nt});var m=this.demuxer,y=this.remuxer,v=r.remux,g=r.demux;y&&y instanceof v||(this.remuxer=new v(n,a,i,s)),m&&m instanceof g||(this.demuxer=new g(n,a,i),this.probe=g.probe),this.resetInitSegment(u,o,d,c),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,r){return!this.demuxer||!this.remuxer||e||r},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new i.a(this.observer,this.config)),t},t}(),ct=function(t){return{remuxResult:{},chunkMeta:t}};function ut(t){return"then"in t&&t.then instanceof Function}var dt=function(t,e,r,a,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=a,this.defaultInitPts=n},ht=function(t,e,r,a,n,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=a,this.timeOffset=n,this.initSegmentChange=i}},function(t,e,r){var a,n,i,s,o;a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(c.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+i.path;c.path=o.normalizePath(d)}else c.path=s.path,i.params||(c.params=s.params,i.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(c)},parseURL:function(t){var e=a.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),a=0,n=0;n<t.length;n++){var i=t[n];r.set(i,a),a+=i.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},function(t,e,r){"use strict";var a=Object.prototype.hasOwnProperty,n="~";function i(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||t,i),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)a.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=new Array(i);a<i;a++)s[a]=r[a].fn;return s},c.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,a,i,s){var o=n?n+t:t;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,a),!0;case 5:return u.fn.call(u.context,e,r,a,i),!0;case 6:return u.fn.call(u.context,e,r,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,r);break;case 4:u[c].fn.call(u[c].context,e,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,a){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return l(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||a&&!s.once||r&&s.context!==r||l(this,i);else{for(var o=0,c=[],u=s.length;o<u;o++)(s[o].fn!==e||a&&!s[o].once||r&&s[o].context!==r)&&c.push(s[o]);c.length?this._events[i]=1===c.length?c[0]:c:l(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),n=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),i=r(9),s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),a=0;a<4;a++)r[a]=e.getUint32(4*a);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,a=r[0],n=r[1],i=r[2],s=r[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,t[f]=y,e[y]=f;var v=h[f],g=h[v],b=h[g],w=257*h[y]^16843008*y;a[f]=w<<24|w>>>8,n[f]=w<<16|w>>>16,i[f]=w<<8|w>>>24,s[f]=w,w=16843009*b^65537*g^257*v^16843008*f,l[y]=w<<24|w>>>8,c[y]=w<<16|w>>>16,u[y]=w<<8|w>>>24,d[y]=w,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,a=0;a<e.length&&r;)r=e[a]===this.key[a],a++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var i,s,o,l,c=this.ksRows=4*(n+6+1),u=this.keySchedule=new Uint32Array(c),d=this.invKeySchedule=new Uint32Array(c),h=this.sBox,f=this.rcon,p=this.invSubMix,m=p[0],y=p[1],v=p[2],g=p[3];for(i=0;i<c;i++)i<n?o=u[i]=e[i]:(l=o,i%n==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[i/n|0]<<24):n>6&&i%n==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[i]=o=(u[i-n]^l)>>>0);for(s=0;s<c;s++)i=c-s,l=3&s?u[i]:u[i-4],d[s]=s<4||i<=4?l:m[h[l>>>24]]^y[h[l>>>16&255]]^v[h[l>>>8&255]]^g[h[255&l]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var a,n,i,s,o,l,c,u,d,h,f,p,m,y,v=this.keySize+6,g=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,k=w[0],T=w[1],E=w[2],x=w[3],S=this.uint8ArrayToUint32Array_(r),L=S[0],_=S[1],A=S[2],R=S[3],D=new Int32Array(t),C=new Int32Array(D.length),I=this.networkToHostOrderSwap;e<D.length;){for(d=I(D[e]),h=I(D[e+1]),f=I(D[e+2]),p=I(D[e+3]),o=d^g[0],l=p^g[1],c=f^g[2],u=h^g[3],m=4,y=1;y<v;y++)a=k[o>>>24]^T[l>>16&255]^E[c>>8&255]^x[255&u]^g[m],n=k[l>>>24]^T[c>>16&255]^E[u>>8&255]^x[255&o]^g[m+1],i=k[c>>>24]^T[u>>16&255]^E[o>>8&255]^x[255&l]^g[m+2],s=k[u>>>24]^T[o>>16&255]^E[l>>8&255]^x[255&c]^g[m+3],o=a,l=n,c=i,u=s,m+=4;a=b[o>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&u]^g[m],n=b[l>>>24]<<24^b[c>>16&255]<<16^b[u>>8&255]<<8^b[255&o]^g[m+1],i=b[c>>>24]<<24^b[u>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^g[m+2],s=b[u>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^g[m+3],C[e]=I(a^L),C[e+1]=I(s^_),C[e+2]=I(i^A),C[e+3]=I(n^R),L=d,_=h,A=f,R=p,e+=4}return C.buffer},t}(),o=r(1),l=r(6),c=function(){function t(t,e,r){var a=(void 0===r?{}:r).removePKCS7Padding,n=void 0===a||a;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=n,n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e,r,a,n=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(a=(r=(e=n).byteLength)&&new DataView(e.buffer).getUint8(r-1))?Object(i.a)(e,0,r-a):e:n}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r,a){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,r);var n=this.flush();n&&a(n.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,r).then(a)},e.softwareDecrypt=function(t,e,r){var a=this.currentIV,n=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(l.a)(o,t),this.remainderData=null);var c=this.getValidChunk(t);if(!c.length)return null;a&&(r=a);var u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new s),u.expandKey(e);var d=n;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=Object(i.a)(c,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,r){var i=this,s=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new n(s,e)),this.fastAesKey.expandKey().then((function(e){return s?new a(s,r).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(a){return i.onWebCryptoError(a,t,e,r)}))},e.onWebCryptoError=function(t,e,r,a){return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,a)},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=Object(i.a)(t,0,r),this.remainderData=Object(i.a)(t,r)),e},e.logOnce=function(t){this.logEnabled&&(o.b.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return g}));var a=r(3),n=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),i=Math.pow(2,32)-1,s=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:a};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=i,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=8,r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var i=a.length,s=i;i--;)e+=a[i].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),i=0,e=8;i<s;i++)o.set(a[i],e),e+=a[i].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,a){return t.box(t.types.moof,t.mfhd(e),t.traf(a,r))},t.moov=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(a).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(a))},t.mvhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,s)},t.sdtp=function(e){var r,a,n=e.samples||[],i=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)a=n[r].flags,i[r+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,a,n,i=[],s=[];for(r=0;r<e.sps.length;r++)n=(a=e.sps[r]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(a));for(r=0;r<e.pps.length;r++)n=(a=e.pps[r]).byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(a));var o=t.box(t.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,a=e.duration*e.timescale,n=e.width,s=e.height,o=Math.floor(a/(i+1)),l=Math.floor(a%(i+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,s>>8&255,255&s,0,0]))},t.traf=function(e,r){var a=t.sdtp(e),n=e.id,s=Math.floor(r/(i+1)),o=Math.floor(r%(i+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,a.length+16+20+8+16+8+8),a)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var a,n,i,s,o,l,c=e.samples||[],u=c.length,d=12+16*u,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),a=0;a<u;a++)i=(n=c[a]).duration,s=n.size,o=n.flags,l=n.cts,h.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*a);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),a=new Uint8Array(t.FTYP.byteLength+r.byteLength);return a.set(t.FTYP),a.set(r,t.FTYP.byteLength),a},t}();s.types=void 0,s.HDLR_TYPES=void 0,s.STTS=void 0,s.STSC=void 0,s.STCO=void 0,s.STSZ=void 0,s.VMHD=void 0,s.SMHD=void 0,s.STSD=void 0,s.FTYP=void 0,s.DINF=void 0;var o=s,l=r(0),c=r(2),u=r(1),d=r(4),h=r(8);function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var p=null,m=null,y=!1,v=function(){function t(t,e,r,a){if(void 0===a&&(a=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===p){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);p=n?parseInt(n[1]):0}if(null===m){var i=navigator.userAgent.match(/Safari\/(\d+)/i);m=i?parseInt(i[1]):0}y=!!p&&p<75||!!m&&m<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){u.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){u.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){u.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var a=r.pts-t;return a<-4294967296?(e=!0,g(t,r.pts)):a>0?t:r.pts}),t[0].pts);return e&&u.b.debug("PTS rollover detected"),r},e.remux=function(t,e,r,a,n,i,s,o){var l,c,h,f,p,m,y=n,v=n,b=t.pid>-1,w=e.pid>-1,k=e.samples.length,T=t.samples.length>0,E=k>1;if((!b||T)&&(!w||E)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(t,e,n));var x=this.isVideoContiguous,S=-1;if(E&&(S=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!x&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,S>0){u.b.warn("[mp4-remuxer]: Dropped "+S+" out of "+k+" video samples due to a missing keyframe");var L=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(S),e.dropped+=S,v+=(e.samples[0].pts-L)/(e.timescale||9e4)}else-1===S&&(u.b.warn("[mp4-remuxer]: No keyframe found out of "+k+" video samples"),m=!1);if(this.ISGenerated){if(T&&E){var _=this.getVideoStartPts(e.samples),A=(g(t.samples[0].pts,_)-_)/e.inputTimeScale;y+=Math.max(0,A),v+=Math.max(0,-A)}if(T){if(t.samplerate||(u.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(t,e,n)),c=this.remuxAudio(t,y,this.isAudioContiguous,i,w||E||o===d.b.AUDIO?v:void 0),E){var R=c?c.endPTS-c.startPTS:0;e.inputTimeScale||(u.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(t,e,n)),l=this.remuxVideo(e,v,x,R)}}else E&&(l=this.remuxVideo(e,v,x,0));l&&(l.firstKeyFrame=S,l.independent=-1!==S)}}return this.ISGenerated&&(r.samples.length&&(p=this.remuxID3(r,n)),a.samples.length&&(f=this.remuxText(a,n))),{audio:c,video:l,initSegment:h,independent:m,text:f,id3:p}},e.generateIS=function(t,e,r){var n,i,s,l=t.samples,c=e.samples,u=this.typeSupported,d={},h=!Object(a.a)(this._initPTS),f="audio/mp4";if(h&&(n=i=1/0),t.config&&l.length&&(t.timescale=t.samplerate,t.isAAC||(u.mpeg?(f="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:f,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array(0):o.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(s=t.inputTimeScale,n=i=l[0].pts-Math.round(s*r))),e.sps&&e.pps&&c.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:o.initSegment([e]),metadata:{width:e.width,height:e.height}},h)){s=e.inputTimeScale;var p=this.getVideoStartPts(c),m=Math.round(s*r);i=Math.min(i,g(c[0].dts,p)-m),n=Math.min(n,p-m)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=i),{tracks:d,initPTS:n,timescale:s}},e.remuxVideo=function(t,e,r,a){var n,i,s,d=t.inputTimeScale,m=t.samples,v=[],w=m.length,k=this._initPTS,T=this.nextAvcDts,E=8,x=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,L=0,_=!1;r&&null!==T||(T=e*d-(m[0].pts-g(m[0].dts,m[0].pts)));for(var A=0;A<w;A++){var R=m[A];R.pts=g(R.pts-k,T),R.dts=g(R.dts-k,T),R.dts>R.pts&&(L=Math.max(Math.min(L,R.pts-R.dts),-18e3)),R.dts<m[A>0?A-1:A].dts&&(_=!0)}_&&m.sort((function(t,e){var r=t.dts-e.dts,a=t.pts-e.pts;return r||a})),i=m[0].dts,s=m[m.length-1].dts;var D=Math.round((s-i)/(w-1));if(L<0){if(L<-2*D){u.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(h.b)(-D,!0)+" ms");for(var C=L,I=0;I<w;I++)m[I].dts=C=Math.max(C,m[I].pts-D),m[I].pts=Math.max(C,m[I].pts)}else{u.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(h.b)(L,!0)+" ms to overcome this issue");for(var O=0;O<w;O++)m[O].dts=m[O].dts+L}i=m[0].dts}if(r){var P=i-T,M=P>D;if(M||P<-1){M?u.b.warn("AVC: "+Object(h.b)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):u.b.warn("AVC: "+Object(h.b)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),i=T;var F=m[0].pts-P;m[0].dts=i,m[0].pts=F,u.b.log("Video: First PTS/DTS adjusted: "+Object(h.b)(F,!0)+"/"+Object(h.b)(i,!0)+", delta: "+Object(h.b)(P,!0)+" ms")}}y&&(i=Math.max(0,i));for(var B=0,N=0,U=0;U<w;U++){for(var j=m[U],G=j.units,z=G.length,Y=0,q=0;q<z;q++)Y+=G[q].data.length;N+=Y,B+=z,j.length=Y,j.dts=Math.max(j.dts,i),j.pts=Math.max(j.pts,j.dts,0),x=Math.min(j.pts,x),S=Math.max(j.pts,S)}s=m[w-1].dts;var H,K=N+4*B+8;try{H=new Uint8Array(K)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating video mdat "+K})}var V=new DataView(H.buffer);V.setUint32(0,K),H.set(o.types.mdat,4);for(var W=0;W<w;W++){for(var X=m[W],Q=X.units,$=0,J=0,Z=Q.length;J<Z;J++){var tt=Q[J],et=tt.data,rt=tt.data.byteLength;V.setUint32(E,rt),E+=4,H.set(et,E),E+=rt,$+=4+rt}if(W<w-1)n=m[W+1].dts-X.dts;else{var at=this.config,nt=X.dts-m[W>0?W-1:W].dts;if(at.stretchShortVideoTrack&&null!==this.nextAudioPts){var it=Math.floor(at.maxBufferHole*d),st=(a?x+a*d:this.nextAudioPts)-X.pts;st>it?((n=st-nt)<0&&(n=nt),u.b.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=nt}else n=nt}var ot=Math.round(X.pts-X.dts);v.push(new b(X.key,n,$,ot))}if(v.length&&p&&p<70){var lt=v[0].flags;lt.dependsOn=2,lt.isNonSync=0}this.nextAvcDts=T=s+n,this.isVideoContiguous=!0;var ct={data1:o.moof(t.sequenceNumber++,i,f({},t,{samples:v})),data2:H,startPTS:x/d,endPTS:(S+n)/d,startDTS:i/d,endDTS:T/d,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:t.dropped};return t.samples=[],t.dropped=0,ct},e.remuxAudio=function(t,e,r,a,i){var s=t.inputTimeScale,d=s/(t.samplerate?t.samplerate:s),h=t.isAAC?1024:1152,p=h*d,m=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,v=[],w=t.samples,k=y?0:8,T=this.nextAudioPts||-1,E=e*s;if(this.isAudioContiguous=r=r||w.length&&T>0&&(a&&Math.abs(E-T)<9e3||Math.abs(g(w[0].pts-m,E)-T)<20*p),w.forEach((function(t){t.pts=g(t.pts-m,E)})),!r||T<0){if(!(w=w.filter((function(t){return t.pts>=0}))).length)return;T=0===i?0:a?Math.max(0,E):w[0].pts}if(t.isAAC)for(var x=void 0!==i,S=this.config.maxAudioFramesDrift,L=0,_=T;L<w.length;L++){var A=w[L],R=A.pts,D=R-_,C=Math.abs(1e3*D/s);if(D<=-S*p&&x)0===L&&(u.b.warn("Audio frame @ "+(R/s).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*D/s)+" ms."),this.nextAudioPts=T=_=R);else if(D>=S*p&&C<1e4&&x){var I=Math.round(D/p);(_=R-I*p)<0&&(I--,_+=p),0===L&&(this.nextAudioPts=T=_),u.b.warn("[mp4-remuxer]: Injecting "+I+" audio frame @ "+(_/s).toFixed(3)+"s due to "+Math.round(1e3*D/s)+" ms gap.");for(var O=0;O<I;O++){var P=Math.max(_,0),M=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);M||(u.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=A.unit.subarray()),w.splice(L,0,{unit:M,pts:P}),_+=p,L++}}A.pts=_,_+=p}for(var F,B=null,N=null,U=0,j=w.length;j--;)U+=w[j].unit.byteLength;for(var G=0,z=w.length;G<z;G++){var Y=w[G],q=Y.unit,H=Y.pts;if(null!==N)v[G-1].duration=Math.round((H-N)/d);else{if(r&&t.isAAC&&(H=T),B=H,!(U>0))return;U+=k;try{F=new Uint8Array(U)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(F.buffer).setUint32(0,U),F.set(o.types.mdat,4))}F.set(q,k);var K=q.byteLength;k+=K,v.push(new b(!0,h,K,0)),N=H}var V=v.length;if(V){var W=v[v.length-1];this.nextAudioPts=T=N+d*W.duration;var X=y?new Uint8Array(0):o.moof(t.sequenceNumber++,B/d,f({},t,{samples:v}));t.samples=[];var Q=B/s,$=T/s,J={data1:X,data2:F,startPTS:Q,endPTS:$,startDTS:Q,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:V};return this.isAudioContiguous=!0,J}},e.remuxEmptyAudio=function(t,e,r,a){var i=t.inputTimeScale,s=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,l=(null!==o?o:a.startDTS*i)+this._initDTS,c=a.endDTS*i+this._initDTS,d=1024*s,h=Math.ceil((c-l)/d),f=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(u.b.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],m=0;m<h;m++){var y=l+m*d;p.push({unit:f,pts:y,dts:y})}return t.samples=p,this.remuxAudio(t,e,r,!1)}u.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=this._initDTS,s=0;s<r;s++){var o=t.samples[s];o.pts=g(o.pts-n,e*a)/a,o.dts=g(o.dts-i,e*a)/a}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=0;i<r;i++){var s=t.samples[i];s.pts=g(s.pts-n,e*a)/a}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}},t}();function g(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var b=function(t,e,r,a){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=a,this.flags=new w(t)},w=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(11);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(a.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e,r;return t.fromURL=function(e,r){return new t(e,r)},t.fromURI=function(e){return new t(e)},e=t,(r=[{key:"uri",get:function(){return this._uri}}])&&n(e.prototype,r),t}()},function(t,e,r){function a(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var a=r(r.s=ENTRY_MODULE);return a.default||a}function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(t,e,a){var i={};i[a]=[];var s=e.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return i;for(var l,c=o[1],u=new RegExp("(\\\\n|\\W)"+n(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=u.exec(s);)"dll-reference"!==l[3]&&i[a].push(l[3]);for(u=new RegExp("\\("+n(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=u.exec(s);)t[l[2]]||(i[a].push(l[1]),t[l[2]]=r(l[1]).m),i[l[2]]=i[l[2]]||[],i[l[2]].push(l[4]);for(var d,h=Object.keys(i),f=0;f<h.length;f++)for(var p=0;p<i[h[f]].length;p++)d=i[h[f]][p],isNaN(1*d)||(i[h[f]][p]=1*i[h[f]][p]);return i}function s(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var n={main:r.m},o=e.all?{main:Object.keys(n.main)}:function(t,e){for(var r={main:[e]},a={main:[]},n={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var c=o[l],u=r[c].pop();if(n[c]=n[c]||{},!n[c][u]&&t[c][u]){n[c][u]=!0,a[c]=a[c]||[],a[c].push(u);for(var d=i(t,t[c][u],c),h=Object.keys(d),f=0;f<h.length;f++)r[h[f]]=r[h[f]]||[],r[h[f]]=r[h[f]].concat(d[h[f]])}}return a}(n,t),l="";Object.keys(o).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+n[t][e].toString()})).join(",")+"});\n"})),l=l+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+n.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([l],{type:"text/javascript"});if(e.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),d=new window.Worker(u);return d.objectURL=u,d}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var a=r(10),n=r(0),i=r(1),s=r(14);function o(t){var e=new s.EventEmitter,r=function(e,r){t.postMessage({event:e,data:r})};e.on(n.a.FRAG_DECRYPTED,r),e.on(n.a.ERROR,r),t.addEventListener("message",(function(n){var s=n.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.transmuxer=new a.c(e,s.typeSupported,o,s.vendor,s.id),Object(i.a)(o.debug),r("init",null);break;case"configure":t.transmuxer.configure(s.config);break;case"demux":var c=t.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(a.d)(c)?c.then((function(e){l(t,e)})):l(t,c);break;case"flush":var d=s.chunkMeta,h=t.transmuxer.flush(d);Object(a.d)(h)?h.then((function(e){u(t,e,d)})):u(t,h,d)}}))}function l(t,e){if((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,a=[],n=e.remuxResult,i=n.audio,s=n.video;i&&c(a,i),s&&c(a,s),t.postMessage({event:"transmuxComplete",data:e},a)}}function c(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function u(t,e,r){e.forEach((function(e){l(t,e)})),t.postMessage({event:"flush",data:r})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return Xr}));var a=r(11),n=r(3),i=r(0),s=r(2),o=r(1),l=r(6),c=r(5);function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e,r;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},e=t,(r=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(n.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&u(e.prototype,r),t}(),h=r(17),f=/^(\d+)x(\d+)$/,p=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,m=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),a=0;a<e.length/2;a++)r[a]=parseInt(e.slice(2*a,2*a+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=f.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(p.lastIndex=0;null!==(e=p.exec(t));){var a=e[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),r[e[1]]=a}return r},t}(),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function v(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var g=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,b=/#EXT-X-MEDIA:(.*)/g,w=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),k=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),T=/\.(mp4|m4s|m4v|m4a)$/i,E=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var a=t[r];if(a.id===e)return a}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return(r+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var a,n=[],i={},s=!1;for(g.lastIndex=0;null!=(a=g.exec(e));)if(a[1]){var o=new m(a[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(a[2],r)},c=o.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),x((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),n.push(l)}else if(a[3]){var u=new m(a[3]);u["DATA-ID"]&&(s=!0,i[u["DATA-ID"]]=u)}return{levels:n,sessionData:s?i:null}},t.parseMasterPlaylistMedia=function(e,r,a,n){var i;void 0===n&&(n=[]);var s=[],o=0;for(b.lastIndex=0;null!==(i=b.exec(e));){var l=new m(i[1]);if(l.TYPE===a){var c={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:a,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(n.length){var u=t.findGroup(n,c.groupId)||n[0];S(c,u,"audioCodec"),S(c,u,"textCodec")}s.push(c)}}return s},t.parseLevelPlaylist=function(t,e,r,i,s){var l,u,f,p=new d(e),y=p.fragments,v=null,g=0,b=0,E=0,x=0,S=null,_=new c.b(i,e),A=-1,R=!1;for(w.lastIndex=0,p.m3u8=t;null!==(l=w.exec(t));){R&&(R=!1,(_=new c.b(i,e)).start=E,_.sn=g,_.cc=x,_.level=r,v&&(_.initSegment=v,_.rawProgramDateTime=v.rawProgramDateTime));var D=l[1];if(D){_.duration=parseFloat(D);var C=(" "+l[2]).slice(1);_.title=C||null,_.tagList.push(C?["INF",D,C]:["INF",D])}else if(l[3])Object(n.a)(_.duration)&&(_.start=E,f&&(_.levelkey=f),_.sn=g,_.level=r,_.cc=x,_.urlId=s,y.push(_),_.relurl=(" "+l[3]).slice(1),L(_,S),S=_,E+=_.duration,g++,b=0,R=!0);else if(l[4]){var I=(" "+l[4]).slice(1);S?_.setByteRange(I,S):_.setByteRange(I)}else if(l[5])_.rawProgramDateTime=(" "+l[5]).slice(1),_.tagList.push(["PROGRAM-DATE-TIME",_.rawProgramDateTime]),-1===A&&(A=y.length);else{if(!(l=l[0].match(k))){o.b.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<l.length&&void 0===l[u];u++);var O=(" "+l[u]).slice(1),P=(" "+l[u+1]).slice(1),M=l[u+2]?(" "+l[u+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":p.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":g=p.startSN=parseInt(P);break;case"SKIP":var F=new m(P),B=F.decimalInteger("SKIPPED-SEGMENTS");if(Object(n.a)(B)){p.skippedSegments=B;for(var N=B;N--;)y.unshift(null);g+=B}var U=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(p.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":p.targetduration=parseFloat(P);break;case"VERSION":p.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":p.live=!1;break;case"#":(P||M)&&_.tagList.push(M?[P,M]:[P]);break;case"DIS":x++;case"GAP":_.tagList.push([O]);break;case"BITRATE":_.tagList.push([O,P]);break;case"DISCONTINUITY-SEQ":x=parseInt(P);break;case"KEY":var j,G=new m(P),z=G.enumeratedString("METHOD"),Y=G.URI,q=G.hexadecimalInteger("IV"),H=G.enumeratedString("KEYFORMATVERSIONS"),K=G.enumeratedString("KEYID"),V=null!=(j=G.enumeratedString("KEYFORMAT"))?j:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(V)>-1){o.b.warn("Keyformat "+V+" is not supported from the manifest");continue}if("identity"!==V)continue;z&&(f=h.a.fromURL(e,Y),Y&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(z)>=0&&(f.method=z,f.keyFormat=V,K&&(f.keyID=K),H&&(f.keyFormatVersions=H),f.iv=q));break;case"START":var W=new m(P).decimalFloatingPoint("TIME-OFFSET");Object(n.a)(W)&&(p.startTimeOffset=W);break;case"MAP":var X=new m(P);_.relurl=X.URI,X.BYTERANGE&&_.setByteRange(X.BYTERANGE),_.level=r,_.sn="initSegment",f&&(_.levelkey=f),_.initSegment=null,v=_,R=!0;break;case"SERVER-CONTROL":var Q=new m(P);p.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),p.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),p.canSkipDateRanges=p.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),p.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),p.holdBack=Q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new m(P);p.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var J=p.partList;J||(J=p.partList=[]);var Z=b>0?J[J.length-1]:void 0,tt=b++,et=new c.c(new m(P),_,e,tt,Z);J.push(et),_.duration+=et.duration;break;case"PRELOAD-HINT":var rt=new m(P);p.preloadHint=rt;break;case"RENDITION-REPORT":var at=new m(P);p.renditionReports=p.renditionReports||[],p.renditionReports.push(at);break;default:o.b.warn("line parsed but not handled: "+l)}}}S&&!S.relurl?(y.pop(),E-=S.duration,p.partList&&(p.fragmentHint=S)):p.partList&&(L(_,S),_.cc=x,p.fragmentHint=_);var nt=y.length,it=y[0],st=y[nt-1];if((E+=p.skippedSegments*p.targetduration)>0&&nt&&st){p.averagetargetduration=E/nt;var ot=st.sn;p.endSN="initSegment"!==ot?ot:0,it&&(p.startCC=it.cc,it.initSegment||p.fragments.every((function(t){return t.relurl&&(e=t.relurl,T.test(null!=(r=null===(n=a.parseURL(e))||void 0===n?void 0:n.path)?r:""));var e,r,n}))&&(o.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(_=new c.b(i,e)).relurl=st.relurl,_.level=r,_.sn="initSegment",it.initSegment=_,p.needSidxRanges=!0))}else p.endSN=0,p.startCC=0;return p.fragmentHint&&(E+=p.fragmentHint.duration),p.totalduration=E,p.endCC=x,A>0&&function(t,e){for(var r=t[e],a=e;a--;){var n=t[a];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(y,A),p},t}();function x(t,e){["video","audio","text"].forEach((function(r){var a=t.filter((function(t){return function(t,e){var r=y[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(a.length){var n=a.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:a[0],t=t.filter((function(t){return-1===a.indexOf(t)}))}})),e.unknownCodecs=t}function S(t,e,r){var a=e[r];a&&(t[r]=a)}function L(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(n.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var _=r(4);function A(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var R=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,a=e.loader,n=new(r||a)(e);return t.loader=n,this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:_.a.MANIFEST,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,a=e.level,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:null,level:a,responseType:"text",type:_.a.LEVEL,url:n,deliveryDirectives:i})},e.onAudioTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:_.a.AUDIO_TRACK,url:n,deliveryDirectives:i})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:_.a.SUBTITLE_TRACK,url:n,deliveryDirectives:i})},e.load=function(t){var e,r,a,n,i,s,l=this.hls.config,c=this.getInternalLoader(t);if(c){var u=c.context;if(u&&u.url===t.url)return void o.b.trace("[playlist-loader]: playlist request ongoing");o.b.log("[playlist-loader]: aborting previous loader for type: "+t.type),c.abort()}switch(t.type){case _.a.MANIFEST:r=l.manifestLoadingMaxRetry,a=l.manifestLoadingTimeOut,n=l.manifestLoadingRetryDelay,i=l.manifestLoadingMaxRetryTimeout;break;case _.a.LEVEL:case _.a.AUDIO_TRACK:case _.a.SUBTITLE_TRACK:r=0,a=l.levelLoadingTimeOut;break;default:r=l.levelLoadingMaxRetry,a=l.levelLoadingTimeOut,n=l.levelLoadingRetryDelay,i=l.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===_.a.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===_.a.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===_.a.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var d=s.partTarget,h=s.targetduration;d&&h&&(a=Math.min(1e3*Math.max(3*d,.8*h),a))}var f={timeout:a,maxRetry:r,retryDelay:n,maxRetryDelay:i,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(t,f,p)},e.loadsuccess=function(t,e,r,a){if(void 0===a&&(a=null),r.isSidxRequest)return this.handleSidxRequest(t,r),void this.handlePlaylistLoaded(t,e,r,a);this.resetInternalLoader(r.type);var n=t.data;0===n.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,r,a):this.handleMasterPlaylist(t,e,r,a)):this.handleManifestParsingError(t,r,"no EXTM3U delimiter",a)},e.loaderror=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!1,t)},e.loadtimeout=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!0)},e.handleMasterPlaylist=function(t,e,r,a){var n=this.hls,s=t.data,l=A(t,r),c=E.parseMasterPlaylist(s,l),u=c.levels,d=c.sessionData;if(u.length){var h=u.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),f=u.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),p=E.parseMasterPlaylistMedia(s,l,"AUDIO",h),y=E.parseMasterPlaylistMedia(s,l,"SUBTITLES",f),v=E.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");p.length&&(p.some((function(t){return!t.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(o.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new m({}),bitrate:0,url:""}))),n.trigger(i.a.MANIFEST_LOADED,{levels:u,audioTracks:p,subtitles:y,captions:v,url:l,stats:e,networkDetails:a,sessionData:d})}else this.handleManifestParsingError(t,r,"no level found in manifest",a)},e.handleTrackOrLevelPlaylist=function(t,e,r,a){var o=this.hls,l=r.id,c=r.level,u=r.type,d=A(t,r),h=Object(n.a)(l)?l:0,f=Object(n.a)(c)?c:h,p=function(t){switch(t.type){case _.a.AUDIO_TRACK:return _.b.AUDIO;case _.a.SUBTITLE_TRACK:return _.b.SUBTITLE;default:return _.b.MAIN}}(r),y=E.parseLevelPlaylist(t.data,d,f,p,h);if(y.fragments.length){if(u===_.a.MANIFEST){var v={attrs:new m({}),bitrate:0,details:y,name:"",url:d};o.trigger(i.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:e,networkDetails:a,sessionData:null})}if(e.parsing.end=performance.now(),y.needSidxRanges){var g,b=null===(g=y.fragments[0].initSegment)||void 0===g?void 0:g.url;this.load({url:b,isSidxRequest:!0,type:u,level:c,levelDetails:y,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else r.levelDetails=y,this.handlePlaylistLoaded(t,e,r,a)}else o.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},e.handleSidxRequest=function(t,e){var r=Object(l.g)(new Uint8Array(t.data));if(r){var a=r.references,n=e.levelDetails;a.forEach((function(t,e){var a=t.info,i=n.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+a.end-a.start)+"@"+String(a.start)),i.initSegment&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,r,a){this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:e.type===_.a.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:a})},e.handleNetworkError=function(t,e,r,a){void 0===r&&(r=!1),o.b.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var n=s.a.UNKNOWN,l=!1,c=this.getInternalLoader(t);switch(t.type){case _.a.MANIFEST:n=r?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,l=!0;break;case _.a.LEVEL:n=r?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,l=!1;break;case _.a.AUDIO_TRACK:n=r?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case _.a.SUBTITLE_TRACK:n=r?s.a.SUBTITLE_TRACK_LOAD_TIMEOUT:s.a.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(t.type);var u={type:s.b.NETWORK_ERROR,details:n,fatal:l,url:t.url,loader:c,context:t,networkDetails:e};a&&(u.response=a),this.hls.trigger(i.a.ERROR,u)},e.handlePlaylistLoaded=function(t,e,r,a){var n=r.type,s=r.level,o=r.id,l=r.groupId,c=r.loader,u=r.levelDetails,d=r.deliveryDirectives;if(null!=u&&u.targetduration){if(c)switch(u.live&&(c.getCacheAge&&(u.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(u.ageHeader)||(u.ageHeader=0)),n){case _.a.MANIFEST:case _.a.LEVEL:this.hls.trigger(i.a.LEVEL_LOADED,{details:u,level:s||0,id:o||0,stats:e,networkDetails:a,deliveryDirectives:d});break;case _.a.AUDIO_TRACK:this.hls.trigger(i.a.AUDIO_TRACK_LOADED,{details:u,id:o||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d});break;case _.a.SUBTITLE_TRACK:this.hls.trigger(i.a.SUBTITLE_TRACK_LOADED,{details:u,id:o||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d})}}else this.handleManifestParsingError(t,r,"invalid target duration",a)},t}(),D=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(i.a.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(i.a.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var r=e.frag,a=r.type,n=this.loaders[a];if(r.decryptdata){var s=r.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(n&&(o.b.warn("abort previous key loader for type:"+a),n.abort()),!s)return void o.b.warn("key uri is falsy");var c=l.loader,u=r.loader=this.loaders[a]=new c(l);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:r,responseType:"arraybuffer"},h={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(d,h,f)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(i.a.KEY_LOADED,{frag:r}))}else o.b.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,r){var a=r.frag;a.decryptdata?(this.decryptkey=a.decryptdata.key=new Uint8Array(t.data),a.loader=null,delete this.loaders[a.type],this.hls.trigger(i.a.KEY_LOADED,{frag:a})):o.b.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.loadtimeout=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}();function C(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function I(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){o.b.debug("[texttrack-utils]: "+r);var a=new self.TextTrackCue(e.startTime,e.endTime,e.text);a.id=e.id,t.addCue(a)}"disabled"===r&&(t.mode=r)}function O(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function P(t,e,r){var a=t.mode;if("disabled"===a&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var n=function(t,e,r){var a=[],n=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var a=0,n=r;a<=n;){var i=Math.floor((n+a)/2);if(e<t[i].startTime)n=i-1;else{if(!(e>t[i].startTime&&a<r))return i;a=i+1}}return t[a].startTime-e<e-t[n].startTime?a:n}(t,e);if(n>-1)for(var i=n,s=t.length;i<s;i++){var o=t[i];if(o.startTime>=e&&o.endTime<=r)a.push(o);else if(o.startTime>r)return a}return a}(t.cues,e,r),i=0;i<n.length;i++)t.removeCue(n[i]);"disabled"===a&&(t.mode=a)}var M=r(7),F=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(O(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return C(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=e.frag,a=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,i=0;i<a.length;i++){var s=M.c(a[i].data);if(s){var o=a[i].pts,l=i<a.length-1?a[i+1].pts:r.end;l-o<=0&&(l=o+.25);for(var c=0;c<s.length;c++){var u=s[c];if(!M.e(u)){var d=new n(o,l,"");d.value=u,this.id3Track.addCue(d)}}}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.type;if(!n||"audio"===n){var i=this.id3Track;i&&P(i,r,a)}},t}();function B(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var N,U=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},a.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.a.ERROR,this.onError)},a.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},a.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},a.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},a.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},a.onError=function(t,e){e.details===s.a.BUFFER_STALLED_ERROR&&(this.stallCount++,o.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},a.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var a=this.config,n=a.lowLatencyMode,i=a.maxLiveSyncPlaybackRate;if(n&&1!==i){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var c=Math.min(2,Math.max(1,i)),u=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(c,Math.max(1,u))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},a.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},a.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,a=t.targetduration,n=this.config,i=n.liveSyncDuration,s=n.liveSyncDurationCount,o=n.lowLatencyMode,l=this.hls.userConfig,c=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===c)&&(c=void 0!==i?i:s*a);var u=a;return c+Math.min(1*this.stallCount,u)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var a=r.edge,n=t-e-this.edgeStalled,i=a-r.totalduration,s=a-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(i,n),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return r?t.buffered.end(r-1):e.edge-this.currentTime}}])&&B(e.prototype,r),t}();function j(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}!function(t){t.No="",t.Yes="YES",t.v2="v2"}(N||(N={}));var G=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),z=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e,r;return e=t,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&j(e.prototype,r),t}();function Y(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function q(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}function H(t,e){var r=e.startPTS;if(Object(n.a)(r)){var a,i=0;e.sn>t.sn?(i=r-t.start,a=t):(i=t.start-r,a=e),a.duration!==i&&(a.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function K(t,e,r,a,i,s){a-r<=0&&(o.b.warn("Fragment should have a positive duration",e),a=r+e.duration,s=i+e.duration);var l=r,c=a,u=e.startPTS,d=e.endPTS;if(Object(n.a)(u)){var h=Math.abs(u-r);Object(n.a)(e.deltaPTS)?e.deltaPTS=Math.max(h,e.deltaPTS):e.deltaPTS=h,l=Math.max(r,u),r=Math.min(r,u),i=Math.min(i,e.startDTS),c=Math.min(a,d),a=Math.max(a,d),s=Math.max(s,e.endDTS)}e.duration=a-r;var f=r-e.start;e.appendedPTS=a,e.start=e.startPTS=r,e.maxStartPTS=l,e.startDTS=i,e.endPTS=a,e.minEndPTS=c,e.endDTS=s;var p,m=e.sn;if(!t||m<t.startSN||m>t.endSN)return 0;var y=m-t.startSN,v=t.fragments;for(v[y]=e,p=y;p>0;p--)H(v[p],v[p-1]);for(p=y;p<v.length-1;p++)H(v[p],v[p+1]);return t.fragmentHint&&H(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function V(t,e){for(var r=null,a=t.fragments,i=a.length-1;i>=0;i--){var s=a[i].initSegment;if(s){r=s;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var l,c=0;if(function(t,e,r){for(var a=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(a?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,c=n;c<=i;c++){var u=l[s+c],d=o[c];a&&!d&&c<a&&(d=e.fragments[c]=u),u&&d&&r(u,d)}}(t,e,(function(t,a){t.relurl&&(c=t.cc-a.cc),Object(n.a)(t.startPTS)&&Object(n.a)(t.endPTS)&&(a.start=a.startPTS=t.startPTS,a.startDTS=t.startDTS,a.appendedPTS=t.appendedPTS,a.maxStartPTS=t.maxStartPTS,a.endPTS=t.endPTS,a.endDTS=t.endDTS,a.minEndPTS=t.minEndPTS,a.duration=t.endPTS-t.startPTS,a.duration&&(l=a),e.PTSKnown=e.alignedSliding=!0),a.elementaryStreams=t.elementaryStreams,a.loader=t.loader,a.stats=t.stats,a.urlId=t.urlId,t.initSegment&&(a.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null===(e=r)||void 0===e?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){o.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var u=e.skippedSegments;u--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var d=e.fragments;if(c){o.b.warn("discontinuity sliding from playlist, take drift into account");for(var h=0;h<d.length;h++)d[h].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var a=0,n=0,i=t.length;n<=i;n++){var s=t[n],o=e[n+a];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):a--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),l?K(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):W(t,e),d.length&&(e.totalduration=e.edge-d[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var f=e.advancedDateTime;if(e.advanced&&f){var p=e.edge;e.driftStart||(e.driftStartTime=f,e.driftStart=p),e.driftEndTime=f,e.driftEnd=p}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function W(t,e){var r=e.startSN+e.skippedSegments-t.startSN,a=t.fragments;r<0||r>=a.length||X(e,a[r].start)}function X(t,e){if(e){for(var r=t.fragments,a=t.skippedSegments;a<r.length;a++)r[a].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}var Q=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.b.log.bind(o.b,e+":"),this.warn=o.b.warn.bind(o.b,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r)for(var a=0;a<r.length;a++){var i=r[a],s=""+i.URI;if(s===t.substr(-s.length)){var o=parseInt(i["LAST-MSN"]),l=parseInt(i["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&c>e.partTarget&&(l+=1)}if(Object(n.a)(o))return new G(o,Object(n.a)(l)?l:void 0,N.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,r){var a=this,n=e.details,i=e.stats,s=i.loading.end?Math.max(0,self.performance.now()-i.loading.end):0;if(n.advancedDateTime=Date.now()-s,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+t+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&V(r,n),!this.canLoad||!n.live)return;var o,l=void 0,c=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var u=this.hls.config.lowLatencyMode,d=n.lastPartSn,h=n.endSN,f=n.lastPartIndex,p=d===h;-1!==f?(l=p?h+1:d,c=p?u?0:f:f+1):l=h+1;var m=n.age,y=m+n.ageHeader,v=Math.min(y-n.partTarget,1.5*n.targetduration);if(v>0){if(r&&v>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+v+" with playlist age: "+n.age),v=0;else{var g=Math.floor(v/n.targetduration);l+=g,void 0!==c&&(c+=Math.round(v%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+v+" skip sn "+g+" to part "+c)}n.tuneInGoal=v}if(o=this.getDeliveryDirectives(n,e.deliveryDirectives,l,c),u||!p)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(n,e.deliveryDirectives,l,c);var b=function(t,e){var r,a=1e3*t.levelTargetDuration,n=a/2,i=t.age,s=i>0&&i<3*a,o=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(s){var c=333*t.misses;r=Math.max(Math.min(n,2*o),c),t.availabilityDelay=(t.availabilityDelay||0)+r}else r=n;else s?(l=Math.min(l||a/2,i),t.availabilityDelay=l,r=l+a-i):r=a-o;return Math.round(r)}(n,i);void 0!==l&&n.canBlockReload&&(b-=n.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return a.loadPlaylist(o)}),b)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,a){var n=function(t,e){var r=t.canSkipUntil,a=t.canSkipDateRanges,n=t.endSN;return r&&(void 0!==e?e-n:0)<r?a?N.v2:N.Yes:N.No}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,a=e.part,n=N.No),new G(r,a,n)},e.retryLoadingOrFail=function(t){var e,r=this,a=this.hls.config,n=this.retryCount<a.levelLoadingMaxRetry;if(n)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var i=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),i),this.warn("retry playlist loading #"+this.retryCount+" in "+i+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return n},t}();function $(){return($=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function J(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),rt=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Z(e,r);var n,o,l=a.prototype;return l._registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.ERROR,this.onError,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},l.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},l.onManifestLoaded=function(t,e){var r,a,n=[],o=[],l=[],c={},u=!1,d=!1,h=!1;if(e.levels.forEach((function(t){var e=t.attrs;u=u||!(!t.width||!t.height),d=d||!!t.videoCodec,h=h||!!t.audioCodec,et&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var r=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(a=c[r])?a.url.push(t.url):(a=new z(t),c[r]=a,n.push(a)),e&&(e.AUDIO&&Y(a,"audio",e.AUDIO),e.SUBTITLES&&Y(a,"text",e.SUBTITLES))})),(u||d)&&h&&(n=n.filter((function(t){var e=t.videoCodec,r=t.width,a=t.height;return!!e||!(!r||!a)}))),n=n.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||v(e,"audio"))&&(!r||v(r,"video"))})),e.audioTracks&&q(o=e.audioTracks.filter((function(t){return!t.audioCodec||v(t.audioCodec,"audio")}))),e.subtitles&&q(l=e.subtitles),n.length>0){r=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===r){this._firstLevel=f,this.log("manifest loaded, "+n.length+" level(s) found, first bitrate: "+r);break}var p=h&&!d,m={levels:n,audioTracks:o,subtitleTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:h,video:d,altAudio:!p&&o.some((function(t){return!!t.url}))};this.hls.trigger(i.a.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},l.onError=function(e,r){if(t.prototype.onError.call(this,e,r),!r.fatal){var a=r.context,n=this._levels[this.currentLevelIndex];if(a&&(a.type===_.a.AUDIO_TRACK&&n.audioGroupIds&&a.groupId===n.audioGroupIds[n.urlId]||a.type===_.a.SUBTITLE_TRACK&&n.textGroupIds&&a.groupId===n.textGroupIds[n.urlId]))this.redundantFailover(this.currentLevelIndex);else{var i,o=!1,l=!0;switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(r.frag){var c=this._levels[r.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(i=r.frag.level)):i=r.frag.level}break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:a&&(a.deliveryDirectives&&(l=!1),i=a.level),o=!0;break;case s.a.REMUX_ALLOC_ERROR:i=r.level,o=!0}void 0!==i&&this.recoverLevel(r,i,o,l)}}},l.recoverLevel=function(t,e,r,a){var n=t.details,i=this._levels[e];if(i.loadError++,r){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(a){var s=i.url.length;if(s>1&&i.loadError<s)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var o=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(n+": switch to "+o),t.levelRetry=!0,this.hls.nextAutoLevel=o)}}},l.redundantFailover=function(t){var e=this._levels[t],r=e.url.length;if(r>1){var a=(e.urlId+1)%r;this.warn("Switching to redundant URL-id "+a),this._levels.forEach((function(t){t.urlId=a})),this.level=t}},l.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===_.b.MAIN){var a=this._levels[r.level];void 0!==a&&(a.fragmentError=0,a.loadError=0)}},l.onLevelLoaded=function(t,e){var r,a,n=e.level,i=e.details,s=this._levels[n];if(!s)return this.warn("Invalid level index "+n),void(null!==(a=e.deliveryDirectives)&&void 0!==a&&a.skip&&(i.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(n,e,s.details)):null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(i.deltaUpdateFailed=!0)},l.onAudioTrackSwitched=function(t,e){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var a=-1,n=this.hls.audioTracks[e.id].groupId,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===n){a=i;break}a!==r.urlId&&(r.urlId=a,this.startLoad())}},l.loadPlaylist=function(t){var e=this.currentLevelIndex,r=this._levels[e];if(this.canLoad&&r&&r.url.length>0){var a=r.urlId,n=r.url[a];if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+n),this.clearTimer(),this.hls.trigger(i.a.LEVEL_LOADING,{url:n,level:e,id:a,deliveryDirectives:t||null})}},l.removeLevel=function(t,e){var r=function(t,r){return r!==e},a=this._levels.filter((function(a,n){return n!==t||a.url.length>1&&void 0!==e&&(a.url=a.url.filter(r),a.audioGroupIds&&(a.audioGroupIds=a.audioGroupIds.filter(r)),a.textGroupIds&&(a.textGroupIds=a.textGroupIds.filter(r)),a.urlId=0,!0)})).map((function(t,e){var r=t.details;return null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e})),t}));this._levels=a,this.hls.trigger(i.a.LEVELS_UPDATED,{levels:a})},n=a,(o=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==t||null===(e=r[t])||void 0===e||!e.details)){if(t<0||t>=r.length){var a=t<0;if(this.hls.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:t,fatal:a,reason:"invalid level idx"}),a)return;t=Math.min(t,r.length-1)}this.clearTimer();var n=this.currentLevelIndex,o=r[n],l=r[t];this.log("switching to level "+t+" from "+n),this.currentLevelIndex=t;var c=$({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete c._urlId,this.hls.trigger(i.a.LEVEL_SWITCHING,c);var u=l.details;if(!u||u.live){var d=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&J(n.prototype,o),a}(Q);!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(tt||(tt={}));var at=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===_.b.MAIN){var r=this.activeFragment,a=this.activeParts;if(!r)return null;if(a)for(var n=a.length;n--;){var i=a[n],s=i?i.end:r.appendedPTS;if(i.start<=t&&void 0!==s&&t<=s)return n>9&&(this.activeParts=a.slice(n-9)),i}else if(r.start<=t&&void 0!==r.appendedPTS&&t<=r.appendedPTS)return r}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,a=Object.keys(r),n=a.length;n--;){var i=r[a[n]];if((null==i?void 0:i.body.type)===e&&i.buffered){var s=i.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i)if(i.buffered){var s=i.range[t];s&&s.time.some((function(t){var r=!a.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&a.removeFragment(i.body),r}))}else i.body.type===r&&a.removeFragment(i.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,a=t.frag,n=t.part;if(r&&"initSegment"!==a.sn){var i=it(a),s=this.fragments[i];s&&(Object.keys(r).forEach((function(t){var i=a.elementaryStreams[t];if(i){var o=r[t],l=null!==n||!0===i.partial;s.range[t]=e.getBufferedTimes(a,n,l,o)}})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},e.fragBuffered=function(t){var e=it(t),r=this.fragments[e];r&&(r.backtrack=r.loaded=null,r.buffered=!0)},e.getBufferedTimes=function(t,e,r,a){for(var n={time:[],partial:r},i=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,l=t.maxStartPTS||i,c=0;c<a.length;c++){var u=a.start(c)-this.bufferPadding,d=a.end(c)+this.bufferPadding;if(l>=u&&o<=d){n.time.push({startPTS:Math.max(i,a.start(c)),endPTS:Math.min(s,a.end(c))});break}if(i<d&&s>u)n.partial=!0,n.time.push({startPTS:Math.max(i,a.start(c)),endPTS:Math.min(s,a.end(c))});else if(s<=u)break}return n},e.getPartialFragment=function(t){var e,r,a,n=null,i=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var c=o[l];c&&nt(c)&&(r=c.body.start-s,a=c.body.end+s,t>=r&&t<=a&&(e=Math.min(t-r,a-t),i<=e&&(n=c.body,i=e)))})),n},e.getState=function(t){var e=it(t),r=this.fragments[e];return r?r.buffered?nt(r)?tt.PARTIAL:tt.OK:r.backtrack?tt.BACKTRACKED:tt.APPENDING:tt.NOT_LOADED},e.backtrack=function(t,e){var r=it(t),a=this.fragments[r];if(!a||a.backtrack)return null;var n=a.backtrack=e||a.loaded;return a.loaded=null,n},e.getBacktrackData=function(t){var e=it(t),r=this.fragments[e];if(r){var a,n=r.backtrack;if(null!=n&&null!==(a=n.payload)&&void 0!==a&&a.byteLength)return n;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,r){for(var a,n,i=0;i<r.length;i++){if(a=r.start(i)-this.bufferPadding,n=r.end(i)+this.bufferPadding,t>=a&&e<=n)return!0;if(e<=a)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!a){var n=it(r);this.fragments[n]={body:r,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,a=e.frag,n=e.part,i=e.timeRanges;if(a.type===_.b.MAIN)if(this.activeFragment=a,n){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(n)}else this.activeParts=null;this.timeRanges=i,Object.keys(i).forEach((function(t){var e=i[t];if(r.detectEvictedFragments(t,e),!n)for(var s=0;s<e.length;s++)a.appendedPTS=Math.max(e.end(s),a.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=it(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i&&i.buffered){var s=i.body;s.type===r&&s.start<e&&s.end>t&&a.removeFragment(s)}}))},e.removeFragment=function(t){var e=it(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function nt(t){var e,r;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(r=t.range.audio)||void 0===r?void 0:r.partial))}function it(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var st=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),ot={length:0,start:function(){return 0},end:function(){return 0}},lt=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var a=t.getBuffered(e),n=0;n<a.length;n++)if(r>=a.start(n)&&r<=a.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,a){try{if(e){var n,i=t.getBuffered(e),s=[];for(n=0;n<i.length;n++)s.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(s,r,a)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var a=[];if(r)for(var n=0;n<t.length;n++){var i=a.length;if(i){var s=a[i-1].end;t[n].start-s<r?t[n].end>s&&(a[i-1].end=t[n].end):a.push(t[n])}else a.push(t[n])}else a=t;for(var o,l=0,c=e,u=e,d=0;d<a.length;d++){var h=a[d].start,f=a[d].end;if(e+r>=h&&e<f)c=h,l=(u=f)-e;else if(e+r<h){o=h;break}}return{len:l,start:c||0,end:u||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return o.b.log("failed to get media.buffered",t),ot}},t}(),ct=function(t,e,r,a,n,i){void 0===a&&(a=0),void 0===n&&(n=-1),void 0===i&&(i=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=a,this.part=n,this.partial=i};function ut(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function dt(t,e){for(var r=e.fragments,a=0,n=r.length;a<n;a++)ut(r[a],t);e.fragmentHint&&ut(e.fragmentHint,t),e.alignedSliding=!0}function ht(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var a=function(t,e){var r=t.fragments,a=e.fragments;if(a.length&&r.length){var n=function(t,e){for(var r=null,a=0,n=t.length;a<n;a++){var i=t[a];if(i&&i.cc===e){r=i;break}}return r}(r,a[0].cc);if(n&&(!n||n.startPTS))return n;o.b.log("No frag in previous level to align on")}else o.b.log("No fragments to align")}(r.details,e);a&&Object(n.a)(a.start)&&(o.b.log("Adjusting PTS using last level due to CC increase within current level "+e.url),dt(a.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,i=(a-r)/1e3+e.fragments[0].start;i&&Object(n.a)(i)&&(o.b.log("Adjusting PTS using programDateTime delta "+(a-r)+"ms, sliding:"+i.toFixed(3)+" "+t.url+" "),dt(i,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||W(e.details,r))}function ft(t,e){var r=t.programDateTime;if(r){var a=(r-e)/1e3;t.start=t.startPTS=a,t.endPTS=a+t.duration}}function pt(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime-1e3*e.fragments[0].start;t.fragments.forEach((function(t){ft(t,r)})),t.fragmentHint&&ft(t.fragmentHint,r),t.alignedSliding=!0}}var mt={search:function(t,e){for(var r=0,a=t.length-1,n=null,i=null;r<=a;){var s=e(i=t[n=(r+a)/2|0]);if(s>0)r=n+1;else{if(!(s<0))return i;a=n-1}}return null}};function yt(t,e,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var n=null;return t?n=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(n=e[0]),n&&0===vt(r,a,n)?n:mt.search(e,vt.bind(null,r,a))||n}function vt(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var a=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-a<=t?1:r.start-a>t&&r.start?-1:0}function gt(t,e,r){var a=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-a>t}function bt(t){var e="function"==typeof Map?new Map:void 0;return(bt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return function(t,e,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&wt(n,r.prototype),n}).apply(null,arguments)}(t,arguments,function(t){return(Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),wt(a,t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=Math.pow(2,17),Tt=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,a=t.url;if(!a)return Promise.reject(new xt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(a?"part list":"url")));this.abort();var n=this.config,i=n.fLoader,o=n.loader;return new Promise((function(a,l){r.loader&&r.loader.destroy();var c=r.loader=t.loader=i?new i(n):new o(n),u=Et(t),d={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:kt};t.stats=c.stats,c.load(u,d,{onSuccess:function(e,n,i,s){r.resetLoader(t,c),a({frag:t,part:null,payload:e.data,networkDetails:s})},onError:function(e,a,n){r.resetLoader(t,c),l(new xt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:n}))},onAbort:function(e,a,n){r.resetLoader(t,c),l(new xt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:n}))},onTimeout:function(e,a,n){r.resetLoader(t,c),l(new xt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:n}))},onProgress:function(r,a,n,i){e&&e({frag:t,part:null,payload:n,networkDetails:i})}})}))},e.loadPart=function(t,e,r){var a=this;this.abort();var n=this.config,i=n.fLoader,o=n.loader;return new Promise((function(l,c){a.loader&&a.loader.destroy();var u=a.loader=t.loader=i?new i(n):new o(n),d=Et(t,e),h={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:kt};e.stats=u.stats,u.load(d,h,{onSuccess:function(n,i,s,o){a.resetLoader(t,u),a.updateStatsFromPart(t,e);var c={frag:t,part:e,payload:n.data,networkDetails:o};r(c),l(c)},onError:function(r,n,i){a.resetLoader(t,u),c(new xt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:r,networkDetails:i}))},onAbort:function(r,n,i){t.stats.aborted=e.stats.aborted,a.resetLoader(t,u),c(new xt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:i}))},onTimeout:function(r,n,i){a.resetLoader(t,u),c(new xt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:i}))}})}))},e.updateStatsFromPart=function(t,e){var r=t.stats,a=e.stats,n=a.total;if(r.loaded+=a.loaded,n){var i=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/n),i),o=(i-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,c=a.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function Et(t,e){void 0===e&&(e=null);var r=e||t,a={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;return Object(n.a)(i)&&Object(n.a)(s)&&(a.rangeStart=i,a.rangeEnd=s),a}var xt=function(t){var e,r;function a(e){for(var r,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(r=t.call.apply(t,[this].concat(n))||this).data=void 0,r.data=e,r}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,wt(e,r),a}(bt(Error)),St=r(15),Lt=function(t){for(var e="",r=t.length,a=0;a<r;a++)e+="["+t.start(a).toFixed(3)+","+t.end(a).toFixed(3)+"]";return e};function _t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rt="STOPPED",Dt="IDLE",Ct="KEY_LOADING",It="FRAG_LOADING",Ot="FRAG_LOADING_WAITING_RETRY",Pt="WAITING_TRACK",Mt="PARSING",Ft="PARSED",Bt="BACKTRACKING",Nt="ENDED",Ut="ERROR",jt="WAITING_INIT_PTS",Gt="WAITING_LEVEL",zt=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=Rt,n.media=void 0,n.mediaBuffer=void 0,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=a,n.log=o.b.log.bind(o.b,a+":"),n.warn=o.b.warn.bind(o.b,a+":"),n.hls=e,n.fragmentLoader=new Tt(e.config),n.fragmentTracker=r,n.config=e.config,n.decrypter=new St.a(e,e.config),e.on(i.a.KEY_LOADED,n.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,At(e,r);var c,u,d=a.prototype;return d.doTick=function(){this.onTickEnd()},d.onTickEnd=function(){},d.startLoad=function(t){},d.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Rt},d._streamEnded=function(t,e){var r=this.fragCurrent,a=this.fragmentTracker;if(!e.live&&r&&r.sn>=e.endSN&&!t.nextStart){var n=e.partList;if(null!=n&&n.length){var i=n[n.length-1];return lt.isBuffered(this.media,i.start+i.duration/2)}var s=a.getState(r);return s===tt.PARTIAL||s===tt.OK}return!1},d.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.state===Rt&&this.startLoad(a.startPosition)},d.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,a=this.mediaBuffer,i=this.state,s=r?r.currentTime:0,o=lt.bufferInfo(a||r,s,t.maxBufferHole);if(this.log("media seeking to "+(Object(n.a)(s)?s.toFixed(3):s)+", state: "+i),i===Nt)this.resetLoadingState();else if(e&&!o.len){var l=t.maxFragLookUpTolerance,c=e.start-l,u=s>e.start+e.duration+l;(s<c||u)&&(u&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}r&&(this.lastCurrentTime=s),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},d.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},d.onKeyLoaded=function(t,e){if(this.state===Ct&&e.frag===this.fragCurrent&&this.levels){this.state=Dt;var r=this.levels[e.frag.level].details;r&&this.loadFragment(e.frag,r,e.frag.start)}},d.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},d.onHandlerDestroyed=function(){this.state=Rt,this.hls.off(i.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},d.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Ct,this.fragCurrent=t,this.hls.trigger(i.a.KEY_LOADING,{frag:t})},d.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},d._loadFragForPlayback=function(t,e,r){var a=this;this._doFragLoad(t,e,r,(function(e){if(a.fragContextChanged(t))return a.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void a.fragmentTracker.removeFragment(t);t.stats.chunkCount++,a._handleFragmentLoadProgress(e)})).then((function(e){if(e){a.fragLoadError=0;var r=a.state;if(!a.fragContextChanged(t))return"payload"in e&&(a.log("Loaded fragment "+t.sn+" of level "+t.level),a.hls.trigger(i.a.FRAG_LOADED,e),a.state===Bt)?(a.fragmentTracker.backtrack(t,e),void a.resetFragmentLoading(t)):void a._handleFragmentLoadComplete(e);(r===It||r===Bt||!a.fragCurrent&&r===Mt)&&(a.fragmentTracker.removeFragment(t),a.state=Dt)}})).catch((function(e){a.warn(e),a.resetFragmentLoading(t)}))},d.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var a={startOffset:t,endOffset:e,type:r};this.fragLoadError=0,this.hls.trigger(i.a.BUFFER_FLUSHING,a)}},d._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(r){if(!r||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return r})).then((function(r){var a=e.hls,n=r.payload,s=t.decryptdata;if(n&&n.byteLength>0&&s&&s.key&&s.iv&&"AES-128"===s.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer).then((function(e){var n=self.performance.now();return a.trigger(i.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:n}}),r.payload=e,r}))}return r})).then((function(r){var a=e.fragCurrent,n=e.hls,s=e.levels;if(!s)throw new Error("init load aborted, missing levels");s[t.level].details;var o=t.stats;e.state=Dt,e.fragLoadError=0,t.data=new Uint8Array(r.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),r.frag===a&&n.trigger(i.a.FRAG_BUFFERED,{stats:o,frag:a,part:null,id:t.type}),e.tick()})).catch((function(r){e.warn(r),e.resetFragmentLoading(t)}))},d.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},d.fragBufferedComplete=function(t,e){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+Lt(lt.getBuffered(r))),this.state=Dt,this.tick()},d._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,a=t.part,n=t.partsLoaded,i=!n||0===n.length||n.some((function(t){return!t})),s=new ct(r.level,r.sn,r.stats.chunkCount+1,0,a?a.index:-1,!i);e.flush(s)}},d._handleFragmentLoadProgress=function(t){},d._doFragLoad=function(t,e,r,a){var s=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(t.start,r||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&a){r>t.end&&e.fragmentHint&&(t=e.fragmentHint);var l=this.getNextPart(o,t,r);if(l>-1){var c=o[l];return this.log("Loading part sn: "+t.sn+" p: "+c.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=c.start+c.duration,this.state=It,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,part:o[l],targetBufferTime:r}),this.doFragPartsLoad(t,o,l,a).catch((function(t){return s.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,r))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),Object(n.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=It,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragmentLoader.load(t,a).catch((function(t){return s.handleFragLoadError(t)}))},d.doFragPartsLoad=function(t,e,r,a){var n=this;return new Promise((function(s,o){var l=[];!function r(c){var u=e[c];n.fragmentLoader.loadPart(t,u,a).then((function(a){l[u.index]=a;var o=a.part;n.hls.trigger(i.a.FRAG_LOADED,a);var d=e[c+1];if(!d||d.fragment!==t)return s({frag:t,part:o,partsLoaded:l});r(c+1)})).catch(o)}(r)}))},d.handleFragLoadError=function(t){var e=t.data;return e&&e.details===s.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(i.a.ERROR,e),null},d._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Mt){var r=e.frag,a=e.part,n=e.level,i=self.performance.now();r.stats.parsing.end=i,a&&(a.stats.parsing.end=i),this.updateLevelTiming(r,a,n,t.partial)}else this.fragCurrent||(this.state=Dt)},d.getCurrentContext=function(t){var e=this.levels,r=t.level,a=t.sn,n=t.part;if(!e||!e[r])return this.warn("Levels object was unset while buffering fragment "+a+" of level "+r+". The current chunk will not be buffered."),null;var i=e[r],s=n>-1?function(t,e,r){if(!t||!t.details)return null;var a=t.details.partList;if(a)for(var n=a.length;n--;){var i=a[n];if(i.index===r&&i.fragment.sn===e)return i}return null}(i,a,n):null,o=s?s.fragment:function(t,e,r){if(!t||!t.details)return null;var a=t.details,n=a.fragments[e-a.startSN];return n||((n=a.fragmentHint)&&n.sn===e?n:e<a.startSN&&r&&r.sn===e?r:null)}(i,a,this.fragCurrent);return o?{frag:o,part:s,level:i}:null},d.bufferFragmentData=function(t,e,r,a){if(t&&this.state===Mt){var n=t.data1,s=t.data2,o=n;if(n&&s&&(o=Object(l.a)(n,s)),o&&o.length){var c={type:t.type,frag:e,part:r,chunkMeta:a,parent:e.type,data:o};this.hls.trigger(i.a.BUFFER_APPENDING,c),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},d.flushBufferGap=function(t){var e=this.media;if(e)if(lt.isBuffered(e,e.currentTime)){var r=e.currentTime,a=lt.bufferInfo(e,r,0),n=t.duration,i=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(t.start-i,a.end-i),r+i);t.start-s>i&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},d.getFwdBufferInfo=function(t,e){var r=this.config,a=this.getLoadPosition();if(!Object(n.a)(a))return null;var i=lt.bufferInfo(t,a,r.maxBufferHole);if(0===i.len&&void 0!==i.nextStart){var s=this.fragmentTracker.getBufferedFrag(a,e);if(s&&i.nextStart<s.end)return lt.bufferInfo(t,a,Math.max(i.nextStart,r.maxBufferHole))}return i},d.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},d.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},d.getNextFragment=function(t,e){var r,a,n=e.fragments,i=n.length;if(!i)return null;var s,o=this.config,l=n[0].start;if(e.live){var c=o.initialLiveManifestSize;if(i<c)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+c+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(e,n),this.startPosition=s?this.hls.liveSyncPosition||s.start:t)}else t<=l&&(s=n[0]);if(!s){var u=o.lowLatencyMode?e.partEnd:e.fragmentEnd;s=this.getFragmentAtPosition(t,u,e)}return null===(r=s)||void 0===r||!r.initSegment||null!==(a=s)&&void 0!==a&&a.initSegment.data||this.bitrateTest||(s=s.initSegment),s},d.getNextPart=function(t,e,r){for(var a=-1,n=!1,i=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(i=i&&!l.independent,a>-1&&r<l.start)break;var c=l.loaded;!c&&(n||l.independent||i)&&l.fragment===e&&(a=s),n=c}return a},d.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},d.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,a=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(n.a)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var a=0;a<t.length;++a){var i=t[a];if(gt(e,r,i))return i}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var i=r.sn+1;if(i>=t.startSN&&i<=t.endSN){var s=e[i-t.startSN];r.cc===s.cc&&(a=s,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(a=function(t,e){return mt.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(a=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return a},d.getFragmentAtPosition=function(t,e,r){var a,n=this.config,i=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,c=n.maxFragLookUpTolerance,u=!!(n.lowLatencyMode&&r.partList&&l);if(u&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),a=t<e?yt(i,s,t,t>e-c?0:c):s[s.length-1]){var d=a.sn-r.startSN,h=i&&a.level===i.level,f=s[d+1];if(this.fragmentTracker.getState(a)===tt.BACKTRACKED){a=null;for(var p=d;s[p]&&this.fragmentTracker.getState(s[p])===tt.BACKTRACKED;)a=i?s[p--]:s[--p];a||(a=f)}else i&&a.sn===i.sn&&!u&&h&&(a.sn<o&&this.fragmentTracker.getState(f)!==tt.OK?(this.log("SN "+a.sn+" just loaded, load next one: "+f.sn),a=f):a=null)}return a},d.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var a=this.hls.liveSyncPosition,n=r.currentTime,i=t.fragments[0].start,s=t.edge,o=n>=i-e.maxFragLookUpTolerance&&n<=s;if(null!==a&&r.duration>a&&(n<a||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||n<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=a),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+a.toFixed(3)),r.currentTime=a))}}},d.alignPlaylists=function(t,e){var r=this.levels,a=this.levelLastLoaded,i=this.fragPrevious,s=null!==a?r[a]:null,o=t.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=t.fragments[0].start,c=!e,u=t.alignedSliding&&Object(n.a)(l);if(c||!u&&!l){ht(i,s,t);var d=t.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+o),d}return l},d.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},d.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var a=t.startTimeOffset;Object(n.a)(a)?(r=e+a,a<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+a+" found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},d.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},d.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},d.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=Dt)},d.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var r=e.frag;if(r&&r.type===t){this.fragCurrent;var a=this.config;if(this.fragLoadError+1<=a.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var n=Math.min(Math.pow(2,this.fragLoadError)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+t+" "+r.level+" failed to load, retrying in "+n+"ms"),this.retryDate=self.performance.now()+n,this.fragLoadError++,this.state=Ot}else e.levelRetry?(t===_.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Dt):(o.b.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=Ut)}}},d.afterBufferFlushed=function(t,e,r){if(t){var a=lt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,a,r),this.state===Nt&&this.resetLoadingState()}},d.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Dt},d.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},d.updateLevelTiming=function(t,e,r,a){var n=this,s=r.details;Object.keys(t.elementaryStreams).reduce((function(e,o){var l=t.elementaryStreams[o];if(l){var c=l.endPTS-l.startPTS;if(c<=0)return n.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+c+") resetting transmuxer to fallback to playlist timing"),n.resetTransmuxer(),e||!1;var u=a?0:K(s,t,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return n.hls.trigger(i.a.LEVEL_PTS_UPDATED,{details:s,level:r,drift:u,type:o,frag:t,start:l.startPTS,end:l.endPTS}),!0}return e}),!1)?(this.state=Ft,this.hls.trigger(i.a.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},d.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},c=a,(u=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&_t(c.prototype,u),a}(st);function Yt(){return self.MediaSource||self.WebKitMediaSource}function qt(){return self.SourceBuffer||self.WebKitSourceBuffer}var Ht=r(18),Kt=r(10),Vt=r(14),Wt=Yt()||{isTypeSupported:function(){return!1}},Xt=function(){function t(t,e,r,a){var n=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=r,this.onFlush=a;var l=t.config,c=function(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)};this.observer=new Vt.EventEmitter,this.observer.on(i.a.FRAG_DECRYPTED,c),this.observer.on(i.a.ERROR,c);var u={mp4:Wt.isTypeSupported("video/mp4"),mpeg:Wt.isTypeSupported("audio/mpeg"),mp3:Wt.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){var h;o.b.log("demuxing in webworker");try{h=this.worker=Ht(19),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(e){t.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},h.postMessage({cmd:"init",typeSupported:u,vendor:d,id:e,config:JSON.stringify(l)})}catch(t){o.b.warn("Error in worker:",t),o.b.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new Kt.c(this.observer,u,l,d,e),this.worker=null}}else this.transmuxer=new Kt.c(this.observer,u,l,d,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},e.push=function(t,e,r,a,n,i,s,l,c,u){var d,h,f=this;c.transmuxing.start=self.performance.now();var p=this.transmuxer,m=this.worker,y=i?i.start:n.start,v=n.decryptdata,g=this.frag,b=!(g&&n.cc===g.cc),w=!(g&&c.level===g.level),k=g?c.sn-g.sn:-1,T=this.part?c.part-this.part.index:1,E=!w&&(1===k||0===k&&1===T),x=self.performance.now();(w||k||0===n.stats.parsing.start)&&(n.stats.parsing.start=x),!i||!T&&E||(i.stats.parsing.start=x);var S=!(g&&(null===(d=n.initSegment)||void 0===d?void 0:d.url)===(null===(h=g.initSegment)||void 0===h?void 0:h.url)),L=new Kt.b(b,E,l,w,y,S);if(!E||b||S){o.b.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+w+"\n        contiguous: "+E+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+y+"\n        initSegmentChange: "+S);var _=new Kt.a(r,a,e,s,u);this.configureTransmuxer(_)}if(this.frag=n,this.part=i,m)m.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:c,state:L},t instanceof ArrayBuffer?[t]:[]);else if(p){var A=p.push(t,v,c,L);Object(Kt.d)(A)?A.then((function(t){f.handleTransmuxComplete(t)})):this.handleTransmuxComplete(A)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:t});else if(r){var n=r.flush(t);Object(Kt.d)(n)?n.then((function(r){e.handleFlushResult(r,t)})):this.handleFlushResult(n,t)}},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,r=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):r&&r.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}(),Qt=function(){function t(t,e,r,a){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=a}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,r=this.media,a=this.stalled,n=r.currentTime,i=r.seeking,s=this.seeking&&!i,l=!this.seeking&&i;if(this.seeking=i,n===t){if((l||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&lt.getBuffered(r).length){var c=lt.bufferInfo(r,n,0),u=c.len>0,d=c.nextStart||0;if(u||d){if(i){var h=c.len>2,f=!d||d-n>2&&!this.fragmentTracker.getPartialFragment(n);if(h||f)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,m=Math.max(d,c.start||0)-n,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==y||null===(p=y.details)||void 0===p?void 0:p.live)?2*y.details.targetduration:2;if(m>0&&m<=v)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==a){var b=g-a;!i&&b>=250&&this._reportStall(c.len);var w=lt.bufferInfo(r,n,e.maxBufferHole);this._tryFixBufferStall(w,b)}else this.stalled=g}}}else if(this.moved=!0,null!==a){if(this.stallReported){var k=self.performance.now()-a;o.b.warn("playback not stuck anymore @"+n+", after "+Math.round(k)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var r=this.config,a=this.fragmentTracker,n=this.media.currentTime,i=a.getPartialFragment(n);i&&this._trySkipBufferHole(i)||t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(o.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,o.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,a=this.media,n=a.currentTime,l=0,c=lt.getBuffered(a),u=0;u<c.length;u++){var d=c.start(u);if(n+e.maxBufferHole>=l&&n<d){var h=Math.max(d+.05,a.currentTime+.1);return o.b.warn("skipping hole, adjusting currentTime from "+n+" to "+h),this.moved=!0,this.stalled=null,a.currentTime=h,t&&r.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+h,frag:t}),h}l=c.end(u)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,a=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var l=a+n*t.nudgeOffset;o.b.warn("Nudging 'currentTime' from "+a+" to "+l),r.currentTime=l,e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.b.error("Playhead still not moving while enough data buffered @"+a+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})},t}();function $t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[stream-controller]")||this).audioCodecSwap=!1,a.gapController=null,a.level=-1,a._forceStartLoad=!1,a.altAudio=!1,a.audioOnly=!1,a.fragPlaying=null,a.onvplaying=null,a.onvseeked=null,a.fragLastKbps=0,a.stalled=!1,a.couldBacktrack=!1,a.audioCodecSwitch=!1,a.videoBuffer=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Jt(e,r);var l,u,d=a.prototype;return d._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},d.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=r.startLevel;-1===a&&(r.config.testBandwidth?(a=0,this.bitrateTest=!0):a=r.nextAutoLevel),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Dt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Rt},d.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Dt:this.doTickIdle();break;case Gt:var t,e=this.levels,r=this.level,a=null==e||null===(t=e[r])||void 0===t?void 0:t.details;if(a&&(!a.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(a))break;this.state=Dt;break}break;case Ot:var n,i=self.performance.now(),s=this.retryDate;(!s||i>=s||null!==(n=this.media)&&void 0!==n&&n.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Dt)}this.onTickEnd()},d.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},d.doTickIdle=function(){var t,e,r=this.hls,a=this.levelLastLoaded,n=this.levels,s=this.media,o=r.config,l=r.nextLoadLevel;if(null!==a&&(s||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&n&&n[l]){var u=n[l];this.level=r.nextLoadLevel=l;var d=u.details;if(!d||this.state===Gt||d.live&&this.levelLastLoaded!==l)this.state=Gt;else{var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,_.b.MAIN);if(null!==h&&!(h.len>=this.getMaxBufferLength(u.maxBitrate))){if(this._streamEnded(h,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(i.a.BUFFER_EOS,f),void(this.state=Nt)}var p=h.end,m=this.getNextFragment(p,d);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn){var y=m.sn-d.startSN;y>1&&(m=d.fragments[y-1],this.fragmentTracker.removeFragment(m))}if(m&&this.fragmentTracker.getState(m)===tt.OK&&this.nextLoadPosition>p){var v=this.audioOnly&&!this.altAudio?c.a.AUDIO:c.a.VIDEO;this.afterBufferFlushed(s,v,_.b.MAIN),m=this.getNextFragment(this.nextLoadPosition,d)}m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),"identity"!==(null===(t=m.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=m.decryptdata)&&void 0!==e&&e.key?this.loadFragment(m,d,p):this.loadKey(m,d))}}}},d.loadFragment=function(e,r,a){var n,i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,i===tt.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);i=tt.NOT_LOADED}i===tt.NOT_LOADED||i===tt.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)):i===tt.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(n=this.media)||void 0===n?void 0:n.buffered.length)&&this.fragmentTracker.removeAllFragments()},d.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,_.b.MAIN);return e&&"fragment"in e?e.fragment:e},d.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,_.b.MAIN)},d.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},d.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,a=this.getAppendedFrag(e.currentTime);if(a&&a.start>1&&this.flushMainBuffer(0,a.start-1),!e.paused&&t){var n=t[this.hls.nextLoadLevel],i=this.fragLastKbps;r=i&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*i)+1:0}else r=0;var s=this.getBufferedFrag(e.currentTime+r);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(s.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,.5*c),.75*c));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},d.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===Ct&&(this.state=Dt),this.nextLoadPosition=this.getLoadPosition()},d.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},d.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var a=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),a.addEventListener("playing",this.onvplaying),a.addEventListener("seeked",this.onvseeked),this.gapController=new Qt(this.config,a,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},d.onMediaPlaying=function(){this.tick()},d.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(n.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},d.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(i.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},d.onManifestParsed=function(t,e){var r,a,n,i=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(i=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=i&&s&&!("function"==typeof(null==(n=qt())||null===(a=n.prototype)||void 0===a?void 0:a.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},d.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===Dt){var a=r[e.level];(!a.details||a.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(a.details))&&(this.state=Gt)}},d.onLevelLoaded=function(t,e){var r,a=this.levels,n=e.level,s=e.details,o=s.totalduration;if(a){this.log("Level "+n+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=this.fragCurrent;!l||this.state!==It&&this.state!==Ot||l.level!==e.level&&l.loader&&(this.state=Dt,l.loader.abort());var c=a[n],u=0;if(s.live||null!==(r=c.details)&&void 0!==r&&r.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;u=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=n,this.hls.trigger(i.a.LEVEL_UPDATED,{details:s,level:n}),this.state===Gt){if(this.waitForCdnTuneIn(s))return;this.state=Dt}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,u),this.tick()}else this.warn("Levels were reset while loading level "+n)},d._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.levels;if(i){var s=i[r.level],o=s.details;if(o){var l=s.videoCodec,c=o.PTSKnown||!o.live,u=null===(e=r.initSegment)||void 0===e?void 0:e.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new Xt(this.hls,_.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=a?a.index:-1,p=-1!==f,m=new ct(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,p),y=this.initPTS[r.cc];h.push(n,u,d,l,r,a,o.totalduration,c,m,y)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},d.onAudioTrackSwitching=function(t,e){var r=this.altAudio,a=!!e.url,n=e.id;if(!a){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;null!=s&&s.loader&&(this.log("Switching to main audio track, cancel main fragment load"),s.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;r&&o.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:n})}},d.onAudioTrackSwitched=function(t,e){var r=e.id,a=!!this.hls.audioTracks[r].url;if(a){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=a,this.tick()},d.onBufferCreated=function(t,e){var r,a,n=e.tracks,i=!1;for(var s in n){var o=n[s];if("main"===o.id){if(a=s,r=o,"video"===s){var l=n[s];l&&(this.videoBuffer=l.buffer)}}else i=!0}i&&r?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},d.onFragBuffered=function(t,e){var r=e.frag,a=e.part;if(!r||r.type===_.b.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Ft&&(this.state=Dt));var n=a?a.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,a)}},d.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_.b.MAIN,e);break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==Ut&&(e.fatal?(this.warn(""+e.details),this.state=Ut):e.levelRetry||this.state!==Gt||(this.state=Dt));break;case s.a.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===Mt||this.state===Ft)){var r=!0,a=this.getFwdBufferInfo(this.media,_.b.MAIN);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},d.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var r=lt.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},d.onFragLoadEmergencyAborted=function(){this.state=Dt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},d.onBufferFlushed=function(t,e){var r=e.type;if(r!==c.a.AUDIO||this.audioOnly&&!this.altAudio){var a=(r===c.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,r,_.b.MAIN)}},d.onLevelsUpdated=function(t,e){this.levels=e.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d.seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void o.b.log("could not seek to "+r+", already seeking at "+e);var a=lt.getBuffered(t),n=(a.length?a.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(o.b.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}},d._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},d._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(r){var a=e.hls;if(r&&!a.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=Dt,e.startFragRequested=!1,e.bitrateTest=!1;var n=t.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),a.trigger(i.a.FRAG_LOADED,r)}}))},d._handleTransmuxComplete=function(t){var e,r="main",a=this.hls,s=t.remuxResult,o=t.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var u=l.frag,d=l.part,h=l.level,f=s.video,p=s.text,m=s.id3,y=s.initSegment,v=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(u)){if(this.state=Mt,y){y.tracks&&(this._bufferInitSegment(h,y.tracks,u,o),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:r,tracks:y.tracks}));var g=y.initPTS,b=y.timescale;Object(n.a)(g)&&(this.initPTS[u.cc]=g,a.trigger(i.a.INIT_PTS_FOUND,{frag:u,id:r,initPTS:g,timescale:b}))}if(f&&!1!==s.independent){if(h.details){var w=f.startPTS,k=f.endPTS,T=f.startDTS,E=f.endDTS;if(d)d.elementaryStreams[f.type]={startPTS:w,endPTS:k,startDTS:T,endDTS:E};else if(f.firstKeyFrame&&f.independent&&(this.couldBacktrack=!0),f.dropped&&f.independent){if(this.getLoadPosition()+this.config.maxBufferHole<w)return void this.backtrack(u);u.setElementaryStreamInfo(f.type,u.start,k,u.start,E,!0)}u.setElementaryStreamInfo(f.type,w,k,T,E),this.bufferFragmentData(f,u,d,o)}}else if(!1===s.independent)return void this.backtrack(u);if(v){var x=v.startPTS,S=v.endPTS,L=v.startDTS,_=v.endDTS;d&&(d.elementaryStreams[c.a.AUDIO]={startPTS:x,endPTS:S,startDTS:L,endDTS:_}),u.setElementaryStreamInfo(c.a.AUDIO,x,S,L,_),this.bufferFragmentData(v,u,d,o)}if(null!=m&&null!==(e=m.samples)&&void 0!==e&&e.length){var A={frag:u,id:r,samples:m.samples};a.trigger(i.a.FRAG_PARSING_METADATA,A)}if(p){var R={frag:u,id:r,samples:p.samples};a.trigger(i.a.FRAG_PARSING_USERDATA,R)}}},d._bufferInitSegment=function(t,e,r,a){var n=this;if(this.state===Mt){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,o=e.video,l=e.audiovideo;if(s){var c=t.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===u.indexOf("firefox")&&(c="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),t.audioCodec&&t.audioCodec!==c&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]")}o&&(o.levelCodec=t.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+o.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var s=e[t].initSegment;null!=s&&s.byteLength&&n.hls.trigger(i.a.BUFFER_APPENDING,{type:t,data:s,frag:r,part:null,chunkMeta:a,parent:r.type})})),this.tick()}},d.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=Bt},d.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(lt.isBuffered(t,r)?e=this.getAppendedFrag(r):lt.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){var a=this.fragPlaying,n=e.level;a&&e.sn===a.sn&&a.level===n&&e.urlId===a.urlId||(this.hls.trigger(i.a.FRAG_CHANGED,{frag:e}),a&&a.level===n||this.hls.trigger(i.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=e)}}},l=a,(u=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&$t(l.prototype,u),a}(zt),te=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),ee=function(){function t(t,e,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new te(t),this.fast_=new te(e)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,a=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new te(t,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new te(e,a.getEstimate(),a.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*e/r;this.fast_.sample(r,a),this.slow_.sample(r,a)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function re(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ae=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new ee(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,r,a=t.prototype;return a.registerListeners=function(){var t=this.hls;t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){var t=this.hls;t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this)},a.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},a.onFragLoading=function(t,e){var r,a=e.frag;a.type===_.b.MAIN&&(this.timer||(this.fragCurrent=a,this.partCurrent=null!=(r=e.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},a.onLevelLoaded=function(t,e){var r=this.hls.config;e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},a._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.autoLevelEnabled,s=r.config,l=r.media;if(t&&l){var c=e?e.stats:t.stats,u=e?e.duration:t.duration;if(c.aborted)return o.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(a&&!l.paused&&l.playbackRate&&l.readyState){var d=performance.now()-c.loading.start,h=Math.abs(l.playbackRate);if(!(d<=500*u/h)){var f=r.levels,p=r.minAutoLevel,m=f[t.level],y=c.total||Math.max(c.loaded,Math.round(u*m.maxBitrate/8)),v=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/d),g=(y-c.loaded)/v,b=l.currentTime,w=(lt.bufferInfo(l,b,s.maxBufferHole).end-b)/h;if(!(w>=2*u/h||g<=w)){var k,T=Number.POSITIVE_INFINITY;for(k=t.level-1;k>p&&!((T=u*f[k].maxBitrate/(6.4*v))<w);k--);if(!(T>=g)){var E=this.bwEstimator.getEstimate();o.b.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+k+"\n      Current BW estimate: "+(Object(n.a)(E)?(E/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+g.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+w.toFixed(3)+" s"),r.nextLoadLevel=k,this.bwEstimator.sample(d,c.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),r.trigger(i.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:c})}}}}}},a.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if(r.type===_.b.MAIN&&Object(n.a)(r.sn)){var s=a?a.stats:r.stats,o=a?a.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],c=(l.loaded?l.loaded.bytes:0)+s.loaded,u=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:c,duration:u},l.realBitrate=Math.round(8*c/u)}if(r.bitrateTest){var d={stats:s,frag:r,part:a,id:r.type};this.onFragBuffered(i.a.FRAG_BUFFERED,d),r.bitrateTest=!1}}},a.onFragBuffered=function(t,e){var r=e.frag,a=e.part,n=a?a.stats:r.stats;if(!n.aborted&&r.type===_.b.MAIN&&"initSegment"!==r.sn){var i=n.parsing.end-n.loading.start;this.bwEstimator.sample(i,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},a.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},a.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},a.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.maxAutoLevel,n=r.config,i=r.minAutoLevel,s=r.media,l=e?e.duration:t?t.duration:0,c=s?s.currentTime:0,u=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(lt.bufferInfo(s,c,n.maxBufferHole).end-c)/u,f=this.findBestLevel(d,i,a,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(f>=0)return f;o.b.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var p=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(!h){var v=this.bitrateTestDelay;v&&(p=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-v,o.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=y=1)}return f=this.findBestLevel(d,i,a,h+p,m,y),Math.max(f,0)},a.findBestLevel=function(t,e,r,a,n,i){for(var s,l=this.fragCurrent,c=this.partCurrent,u=this.lastLoadedFragLevel,d=this.hls.levels,h=d[u],f=!(null==h||null===(s=h.details)||void 0===s||!s.live),p=null==h?void 0:h.codecSet,m=c?c.duration:l?l.duration:0,y=r;y>=e;y--){var v=d[y];if(v&&(!p||v.codecSet===p)){var g,b=v.details,w=(c?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m;g=y<=u?n*t:i*t;var k=d[y].maxBitrate,T=k*w/g;if(o.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+y+"/"+Math.round(g)+"/"+k+"/"+w+"/"+a+"/"+T),g>k&&(!T||f&&!this.bitrateTestDelay||T<a))return y}}return-1},e=t,(r=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this.getNextABRAutoLevel();return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}])&&re(e.prototype,r),t}(),ne=r(13);function ie(){return(ie=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[audio-stream-controller]")||this).videoBuffer=null,a.videoTrackCC=-1,a.waitingVideoCC=-1,a.audioSwitch=!1,a.trackId=-1,a.waitingData=null,a.mainDetails=null,a.bufferFlushed=!1,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,se(e,r);var l=a.prototype;return l.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},l._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l.onInitPtsFound=function(t,e){var r=e.frag,a=e.id,n=e.initPTS;if("main"===a){var i=r.cc;this.initPTS[r.cc]=n,this.log("InitPTS for cc: "+i+" found from main: "+n),this.videoTrackCC=i,this.state===jt&&this.tick()}},l.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Rt);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Dt):(this.loadedmetadata=!1,this.state=Pt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},l.doTick=function(){switch(this.state){case Dt:this.doTickIdle();break;case Pt:var e,r=this.levels,a=this.trackId,n=null==r||null===(e=r[a])||void 0===e?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=jt}break;case Ot:var i,s=performance.now(),l=this.retryDate;(!l||s>=l||null!==(i=this.media)&&void 0!==i&&i.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=Dt);break;case jt:var c=this.waitingData;if(c){var u=c.frag,d=c.part,h=c.cache,f=c.complete;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=It;var p={frag:u,part:d,payload:h.flush(),networkDetails:null};this._handleFragmentLoadProgress(p),f&&t.prototype._handleFragmentLoadComplete.call(this,p)}else if(this.videoTrackCC!==this.waitingVideoCC)o.b.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),y=lt.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);vt(y.end,this.config.maxFragLookUpTolerance,u)<0&&(o.b.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=Dt}this.onTickEnd()},l.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Dt)},l.onTickEnd=function(){var t=this.media;if(t&&t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime}},l.doTickIdle=function(){var t,e,r=this.hls,a=this.levels,n=this.media,s=this.trackId,o=r.config;if(a&&a[s]&&(n||!this.startFragRequested&&o.startFragPrefetch)){var l=a[s].details;if(!l||l.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(l))this.state=Pt;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.a.AUDIO,_.b.AUDIO));var u=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,_.b.AUDIO);if(null!==u){var d=u.len,h=this.getMaxBufferLength(),f=this.audioSwitch;if(!(d>=h)||f){if(!f&&this._streamEnded(u,l))return r.trigger(i.a.BUFFER_EOS,{type:"audio"}),void(this.state=Nt);var p=l.fragments[0].start,m=u.end;if(f){var y=this.getLoadPosition();m=y,l.PTSKnown&&y<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}var v=this.getNextFragment(m,l);v?"identity"!==(null===(t=v.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=v.decryptdata)&&void 0!==e&&e.key?this.loadFragment(v,l,m):this.loadKey(v,l):this.bufferFlushed=!0}}}}},l.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),r=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,_.b.MAIN);return null===r?e:Math.max(e,r.len)},l.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},l.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new z(t)}))},l.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var a=this.fragCurrent;null!=a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=Dt):this.state=Rt,this.tick()},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},l.onLevelLoaded=function(t,e){this.mainDetails=e.details},l.onAudioTrackLoaded=function(t,e){var r,a=this.levels,n=e.details,i=e.id;if(a){this.log("Track "+i+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var s=a[i],o=0;if(n.live||null!==(r=s.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!l)return;!s.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(pt(n,l),o=n.fragments[0].start):o=this.alignPlaylists(n,s.details)}s.details=n,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(s.details,o),this.state!==Pt||this.waitForCdnTuneIn(n)||(this.state=Dt),this.tick()}else this.warn("Audio tracks were reset while loading level "+i)},l._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.config,s=this.trackId,l=this.levels;if(l){var c=l[s],u=c.details,d=i.defaultAudioCodec||c.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new Xt(this.hls,_.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var f=this.initPTS[r.cc],p=null===(e=r.initSegment)||void 0===e?void 0:e.data;if(void 0!==f){var m=a?a.index:-1,y=-1!==m,v=new ct(r.level,r.sn,r.stats.chunkCount,n.byteLength,m,y);h.push(n,p,d,"",r,a,u.totalduration,!1,v,f)}else o.b.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:a,cache:new ne.a,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=jt}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},l._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},l.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},l.onFragBuffered=function(t,e){var r=e.frag,a=e.part;r.type===_.b.AUDIO&&(this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,a)))},l.onError=function(e,r){switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_.b.AUDIO,r);break;case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==Ut&&this.state!==Rt&&(this.state=r.fatal?Ut:Dt,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case s.a.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===Mt||this.state===Ft)){var a=!0,n=this.getFwdBufferInfo(this.mediaBuffer,_.b.AUDIO);n&&n.len>.5&&(a=!this.reduceMaxBufferLength(n.len)),a&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},l.onBufferFlushed=function(t,e){e.type===c.a.AUDIO&&(this.bufferFlushed=!0)},l._handleTransmuxComplete=function(t){var e,r="audio",a=this.hls,n=t.remuxResult,s=t.chunkMeta,o=this.getCurrentContext(s);if(!o)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=o.frag,u=o.part,d=n.audio,h=n.text,f=n.id3,p=n.initSegment;if(!this.fragContextChanged(l)){if(this.state=Mt,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=p&&p.tracks&&(this._bufferInitSegment(p.tracks,l,s),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:p.tracks})),d){var m=d.startPTS,y=d.endPTS,v=d.startDTS,g=d.endDTS;u&&(u.elementaryStreams[c.a.AUDIO]={startPTS:m,endPTS:y,startDTS:v,endDTS:g}),l.setElementaryStreamInfo(c.a.AUDIO,m,y,v,g),this.bufferFragmentData(d,l,u,s)}if(null!=f&&null!==(e=f.samples)&&void 0!==e&&e.length){var b=ie({frag:l,id:r},f);a.trigger(i.a.FRAG_PARSING_METADATA,b)}if(h){var w=ie({frag:l,id:r},h);a.trigger(i.a.FRAG_PARSING_USERDATA,w)}}},l._bufferInitSegment=function(t,e,r){if(this.state===Mt){t.video&&delete t.video;var a=t.audio;if(a){a.levelCodec=a.codec,a.id="audio",this.log("Init audio buffer, container:"+a.container+", codecs[parsed]=["+a.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,t);var n=a.initSegment;if(null!=n&&n.byteLength){var s={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:n};this.hls.trigger(i.a.BUFFER_APPENDING,s)}this.tick()}}},l.loadFragment=function(e,r,a){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||i===tt.NOT_LOADED||i===tt.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):r.live&&!Object(n.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=jt):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)))},l.completeAudioSwitch=function(){var e=this.hls,r=this.media,a=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:a})},a}(zt);function le(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ce(e,r);var n,o,l=a.prototype;return l.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},l.onAudioTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.tracksInGroup[r];if(n){var i=n.details;n.details=e.details,this.log("audioTrack "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,i))}else this.warn("Invalid audio track id "+r)},l.onLevelLoading=function(t,e){this.switchLevel(e.level)},l.onLevelSwitching=function(t,e){this.switchLevel(e.level)},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r;var a=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!a.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=a;var n={audioTracks:a};this.log("Updating audio tracks, "+a.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()}}},l.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===_.a.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},l.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=e[this.trackId];this.log("Now switching to audio-track index "+t);var a=e[t],n=a.id,s=a.groupId,o=void 0===s?"":s,l=a.name,c=a.type,u=a.url;if(this.trackId=t,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHING,{id:n,groupId:o,name:l,type:c,url:u}),!a.details||a.details.live){var d=this.switchParams(a.url,null==r?void 0:r.details);this.loadPlaylist(d)}}},l.selectInitialTrack=function(){this.tracksInGroup;var t=this.trackName,e=this.findTrackId(t)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(i.a.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},n=a,(o=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&le(n.prototype,o),a}(Q);function de(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[subtitle-stream-controller]")||this).levels=[],a.currentTrackId=-1,a.tracksBuffered=[],a.mainDetails=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,he(e,r);var n,s,o=a.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o.startLoad=function(){this.stopLoad(),this.state=Dt,this.setInterval(500),this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},o.onLevelLoaded=function(t,e){this.mainDetails=e.details},o.onSubtitleFragProcessed=function(t,e){var r=e.frag,a=e.success;if(this.fragPrevious=r,this.state=Dt,a){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,s=r.start,o=0;o<n.length;o++)if(s>=n[o].start&&s<=n[o].end){i=n[o];break}var l=r.start+r.duration;i?i.end=l:(i={start:s,end:l},n.push(i)),this.fragmentTracker.fragBuffered(r)}}},o.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset;if(0===r&&a!==Number.POSITIVE_INFINITY){var n=this.currentTrackId,i=this.levels;if(!i.length||!i[n]||!i[n].details)return;var s=a-i[n].details.targetduration;if(s<=0)return;e.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=s)t.shift();else{if(!(t[e].start<s))break;t[e].start=s,e++}})),this.fragmentTracker.removeFragmentsInRange(r,s,_.b.SUBTITLE)}},o.onError=function(t,e){var r,a=e.frag;a&&a.type===_.b.SUBTITLE&&(null!==(r=this.fragCurrent)&&void 0!==r&&r.loader&&this.fragCurrent.loader.abort(),this.state=Dt)},o.onSubtitleTracksUpdated=function(t,e){var r=this,a=e.subtitleTracks;this.tracksBuffered=[],this.levels=a.map((function(t){return new z(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){r.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},o.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},o.onSubtitleTrackLoaded=function(t,e){var r,a=e.details,n=e.id,i=this.currentTrackId,s=this.levels;if(s.length){var o=s[i];if(!(n>=s.length||n!==i)&&o){if(this.mediaBuffer=this.mediaBufferTimeRanges,a.live||null!==(r=o.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(a.deltaUpdateFailed||!l)return;var c=l.fragments[0];o.details?0===this.alignPlaylists(a,o.details)&&c&&X(a,c.start):a.hasProgramDateTime&&l.hasProgramDateTime?pt(a,l):c&&X(a,c.start)}o.details=a,this.levelLastLoaded=n,this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Dt&&(yt(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}}},o._handleFragmentLoadComplete=function(t){var e=t.frag,r=t.payload,a=e.decryptdata,n=this.hls;if(!this.fragContextChanged(e)&&r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(t){var r=performance.now();n.trigger(i.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:s,tdecrypt:r}})}))}},o.doTick=function(){if(this.media){if(this.state===Dt){var t,e=this.currentTrackId,r=this.levels;if(!r.length||!r[e]||!r[e].details)return;var a=r[e].details,n=a.targetduration,i=this.config,s=this.media,o=lt.bufferedInfo(this.mediaBufferTimeRanges,s.currentTime-n,i.maxBufferHole),l=o.end;if(o.len>this.getMaxBufferLength()+n)return;var c,u=a.fragments,d=u.length,h=a.edge,f=this.fragPrevious;l<h?!(c=yt(f,u,l,i.maxFragLookUpTolerance))&&f&&f.start<u[0].start&&(c=u[0]):c=u[d-1],null!==(t=c)&&void 0!==t&&t.encrypted?this.loadKey(c,a):c&&this.fragmentTracker.getState(c)===tt.NOT_LOADED&&this.loadFragment(c,a,l)}}else this.state=Dt},o.loadFragment=function(e,r,a){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,r,a)},n=a,(s=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&de(n.prototype,s),a}(zt);function pe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t){for(var e=[],r=0;r<t.length;r++){var a=t[r];"subtitles"===a.kind&&a.label&&e.push(t[r])}return e}var ve,ge=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r.subtitleDisplay=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,me(e,r);var n,s,o=a.prototype;return o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},o.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},o.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},o.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ye(this.media.textTracks).forEach((function(t){O(t)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},o.onSubtitleTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.trackId,i=this.tracksInGroup[n];if(i){var s=i.details;i.details=e.details,this.log("subtitle track "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,s))}else this.warn("Invalid subtitle track id "+r)},o.onLevelLoading=function(t,e){this.switchLevel(e.level)},o.onLevelSwitching=function(t,e){this.switchLevel(e.level)},o.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId];if(this.groupId!==r){var a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=n;var s=this.findTrackId(null==a?void 0:a.name)||this.findTrackId();this.groupId=r;var o={subtitleTracks:n};this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,a)}}},o.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},o.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===_.a.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},o.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(i.a.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},o.toggleTrackModes=function(t){var e=this,r=this.media,a=this.subtitleDisplay,n=this.trackId;if(r){var i=ye(r.textTracks),s=i.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var o=s[n];o&&(o.mode="disabled")}var l=s[t];l&&(l.mode=a?"showing":"hidden")}},o.setSubtitleTrack=function(t,e){var r,a=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(r=a[t])&&void 0!==r&&r.details)||t<-1||t>=a.length)){this.clearTimer();var n=a[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,n){var s=n.id,o=n.groupId,l=void 0===o?"":o,c=n.name,u=n.type,d=n.url;this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:s,groupId:l,name:c,type:u,url:d});var h=this.switchParams(n.url,null==e?void 0:e.details);this.loadPlaylist(h)}else this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=ye(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},n=a,(s=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}])&&pe(n.prototype,s),a}(Q),be=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),a={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(a,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,a=e[t],n=r[t];if(n.length){var i=n[0];try{i.execute()}catch(e){o.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(e),a&&a.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),we=Yt(),ke=/([ha]vc.)(?:\.[^.,]+)+/,Te=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,r=e.media,a=e.mediaSource;o.b.log("[buffer-controller]: Media source opened"),r&&(e.updateMediaElementDuration(),t.trigger(i.a.MEDIA_ATTACHED,{media:r})),a&&a.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){o.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){o.b.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.BUFFER_EOS,this.onBufferEos,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.a.FRAG_PARSED,this.onFragParsed,this),t.on(i.a.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.BUFFER_EOS,this.onBufferEos,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.a.FRAG_PARSED,this.onFragParsed,this),t.off(i.a.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new be(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,o.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&we){var a=this.mediaSource=new we;a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(a),this._objectUrl=r.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(o.b.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){o.b.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):o.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.a.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){o.b.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,a=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(a){var n=r.tracks[t];if(n&&"function"==typeof n.buffer.changeType){var i=e[t],s=i.codec,o=i.levelCodec,l=i.container;if((n.levelCodec||n.codec).replace(ke,"$1")!==(o||s).replace(ke,"$1")){var c=l+";codecs="+(o||s);r.appendChangeType(t,c)}}}else r.pendingTracks[t]=e[t]})),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,a=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[t];n&&(o.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),n.changeType(e)),a.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){o.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};a.append(n,t)},e.onBufferAppending=function(t,e){var r=this,a=this.hls,n=this.operationQueue,l=this.tracks,c=e.data,u=e.type,d=e.frag,h=e.part,f=e.chunkMeta,p=f.buffering[u],m=self.performance.now();p.start=m;var y=d.stats.buffering,v=h?h.stats.buffering:null;0===y.start&&(y.start=m),v&&0===v.start&&(v.start=m);var g=l.audio,b="audio"===u&&1===f.id&&"audio/mpeg"===(null==g?void 0:g.container),w={execute:function(){if(p.executeStart=self.performance.now(),b){var t=r.sourceBuffer[u];if(t){var e=d.start-t.timestampOffset;Math.abs(e)>=.1&&(o.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+e+") sn: "+d.sn+")"),t.timestampOffset=d.start)}}r.appendExecutor(c,u)},onStart:function(){},onComplete:function(){var t=self.performance.now();p.executeEnd=p.end=t,0===y.first&&(y.first=t),v&&0===v.first&&(v.first=t);var e=r.sourceBuffer,a={};for(var n in e)a[n]=lt.getBuffered(e[n]);r.appendError=0,r.hls.trigger(i.a.BUFFER_APPENDED,{type:u,frag:d,part:h,chunkMeta:f,parent:d.type,timeRanges:a})},onError:function(t){o.b.error("[buffer-controller]: Error encountered while trying to append to the "+u+" SourceBuffer",t);var e={type:s.b.MEDIA_ERROR,parent:d.type,details:s.a.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=s.a.BUFFER_FULL_ERROR:(r.appendError++,e.details=s.a.BUFFER_APPEND_ERROR,r.appendError>a.config.appendErrorMaxRetry&&(o.b.error("[buffer-controller]: Failed "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),a.trigger(i.a.ERROR,e)}};n.append(w,u)},e.onBufferFlushing=function(t,e){var r=this,a=this.operationQueue,n=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(i.a.BUFFER_FLUSHED,{type:t})},onError:function(e){o.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?a.append(n(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){a.append(n(t),t)}))},e.onFragParsed=function(t,e){var r=this,a=e.frag,n=e.part,s=[],l=n?n.elementaryStreams:a.elementaryStreams;l[c.a.AUDIOVIDEO]?s.push("audiovideo"):(l[c.a.AUDIO]&&s.push("audio"),l[c.a.VIDEO]&&s.push("video")),0===s.length&&o.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+a.type+" level: "+a.level+" sn: "+a.sn),this.blockBuffers((function(){var t=self.performance.now();a.stats.buffering.end=t,n&&(n.stats.buffering.end=t);var e=n?n.stats:a.stats;r.hls.trigger(i.a.FRAG_BUFFERED,{frag:a,part:n,stats:e,id:a.type})}),s)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,a){var n=r.sourceBuffer[a];return e.type&&e.type!==a||n&&!n.ended&&(n.ended=!0,o.b.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),t&&!(n&&!n.ended)}),!0)&&this.blockBuffers((function(){var t=r.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,a=this.sourceBuffer;if(r&&null!==e){var s=this.getSourceBufferTypes();if(s.length){var o=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(n.a)(o)&&!(o<0)){var l=r.currentTime,c=e.levelTargetDuration,u=Math.max(o,c),d=Math.floor(l/c)*c-u;s.forEach((function(r){var n=a[r];if(n){var s=lt.getBuffered(n);s.length>0&&d>s.start(0)&&(t.trigger(i.a.BACK_BUFFER_REACHED,{bufferEnd:d}),e.live&&t.trigger(i.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),t.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:r}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,a=this.mediaSource,i=t.fragments[0].start+t.totalduration,s=r.duration,l=Object(n.a)(a.duration)?a.duration:0;t.live&&e.config.liveDurationInfinity?(o.b.log("[buffer-controller]: Media Source duration is set to Infinity"),a.duration=1/0,this.updateSeekableRange(t)):(i>l&&i>s||!Object(n.a)(s))&&(o.b.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),a.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var a=Math.max(0,r[0].start),n=Math.max(a,a+t.totalduration);e.setLiveSeekableRange(a,n)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,a=Object.keys(r).length;if(a&&!t||2===a){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(0===n.length)return void this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});n.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var a=0;for(var n in t)if(!e[n]){var l=t[n];if(!l)throw Error("source buffer exists for track "+n+", however track does not");var c=l.levelCodec||l.codec,u=l.container+";codecs="+c;o.b.log("[buffer-controller]: creating sourceBuffer("+u+")");try{var d=e[n]=r.addSourceBuffer(u),h=n;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[n]={buffer:d,codec:c,container:l.container,levelCodec:l.levelCodec,id:l.id},a++}catch(t){o.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:u})}}a&&this.hls.trigger(i.a.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){o.b.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(t);r&&r.onError(e)},e.removeExecutor=function(t,e,r){var a=this.media,i=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[t];if(!a||!i||!l)return o.b.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var c=Object(n.a)(a.duration)?a.duration:1/0,u=Object(n.a)(i.duration)?i.duration:1/0,d=Math.max(0,e),h=Math.min(r,c,u);h>d?(o.b.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+t+" SourceBuffer"),l.remove(d,h)):s.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,a=this.sourceBuffer[e];if(!a)return o.b.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);a.ended=!1,a.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return o.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var a=this.operationQueue,n=e.map((function(t){return a.appendBlocker(t)}));Promise.all(n).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];e&&e.updating||a.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var a=this.sourceBuffer[t];if(a){var n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),a.addEventListener(e,n)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),Ee={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},xe=function(t){var e=t;return Ee.hasOwnProperty(t)&&(e=Ee[t]),String.fromCharCode(e)},Se={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Le={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_e={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ae={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Re=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(ve||(ve={}));var De=function(){function t(){this.time=null,this.verboseLevel=ve.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&o.b.log(this.time+" ["+t+"] "+e)},t}(),Ce=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Ie=function(){function t(t,e,r,a,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=a||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var a=e[r];t.hasOwnProperty(a)&&(this[a]=t[a])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Oe=function(){function t(t,e,r,a,n,i){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Ie(e,r,a,n,i)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Pe=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Oe);this.logger=t,this.pos=0,this.currPenState=new Ie}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(ve.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(ve.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=xe(t);this.pos>=100?this.logger.log(ve.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var a=this.chars[r].uchar;" "!==a&&(e=!1),t.push(a)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Me=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Pe(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(ve.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(ve.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var a=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var i=n.rows[a].cueStartTime,s=this.logger.time;if(i&&null!==s&&i<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[a+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var c=t.indent,u=Math.max(c-1,0);l.setCursor(t.indent),t.color=l.chars[u].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(ve.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(ve.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(ve.INFO,"Rolling up")}else this.logger.log(ve.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",a=-1,n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(a=n+1,t?e.push("Row "+a+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Fe=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Me(r),this.nonDisplayedMemory=new Me(r),this.lastOutputScreen=new Me(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(ve.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(ve.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(ve.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(ve.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(ve.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(ve.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(ve.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(ve.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(ve.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(ve.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(ve.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(ve.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(ve.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(ve.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(ve.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ve.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(ve.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(ve.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function Be(t,e,r){r.a=t,r.b=e}function Ne(t,e,r){return r.a===t&&r.b===e}var Ue=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new De;this.channels=[null,new Fe(t,e,a),new Fe(t+1,r,a)],this.cmdHistory={a:null,b:null},this.logger=a}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,a,n,i=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(a=127&e[s],n=127&e[s+1],0!==a||0!==n){if(this.logger.log(ve.DATA,"["+Ce([e[s],e[s+1]])+"] -> ("+Ce([a,n])+")"),(r=this.parseCmd(a,n))||(r=this.parseMidrow(a,n)),r||(r=this.parsePAC(a,n)),r||(r=this.parseBackgroundAttributes(a,n)),!r&&(i=this.parseChars(a,n))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(i):this.logger.log(ve.WARNING,"No channel found yet. TEXT-MODE?")}r||i||this.logger.log(ve.WARNING,"Couldn't parse cleaned data "+Ce([a,n])+" orig: "+Ce([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Ne(t,e,r))return Be(null,null,r),this.logger.log(ve.DEBUG,"Repeated command ("+Ce([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,n=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),Be(t,e,r),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(ve.ERROR,"Mismatch channel in midrow parsing"),!1;var a=this.channels[r];return!!a&&(a.ccMIDROW(e),this.logger.log(ve.DEBUG,"MIDROW ("+Ce([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Ne(t,e,a))return Be(null,null,a),!0;var n=t<=23?1:2;r=e>=64&&e<=95?1===n?Se[t]:_e[t]:1===n?Le[t]:Ae[t];var i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,e)),Be(t,e,a),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,a={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,a.underline=1==(1&r),r<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((r-16)/2),a},e.parseChars=function(t,e){var r,a,n=null,i=null;if(t>=25?(r=2,i=t-8):(r=1,i=t),i>=17&&i<=19?(a=17===i?e+80:18===i?e+112:e+144,this.logger.log(ve.INFO,"Special char '"+xe(a)+"' in channel "+r),n=[a]):t>=32&&t<=127&&(n=0===e?[t]:[t,e]),n){var s=Ce(n);this.logger.log(ve.DEBUG,"Char codes =  "+s.join(",")),Be(t,e,this.cmdHistory)}return n},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var a={};16===t||24===t?(r=Math.floor((e-32)/2),a.background=Re[r],e%2==1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var n=t<=23?1:2;return this.channels[n].setBkgData(a),Be(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}(),je=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),Ge=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function a(t){return r(e,t)}function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)t[s]=i[s]}return t}function i(e,i,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var c="",u=!1,d=e,h=i,f=s,p=null,m="",y=!0,v="auto",g="start",b=50,w="middle",k=50,T="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return m},set:function(e){var a=function(e){return r(t,e)}(e);if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return g},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return w},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return k},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");k=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return T},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}(),ze=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function Ye(t){function e(t,e,r,a){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(a||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var qe=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var a=0;a<r.length;++a)if(e===r[a]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function He(t,e,r,a){var n=a?t.split(a):[t];for(var i in n)if("string"==typeof n[i]){var s=n[i].split(r);2===s.length&&e(s[0],s[1])}}var Ke=new Ge(0,0,""),Ve="middle"===Ke.align?"middle":"center";function We(t,e,r){var a=t;function n(){var e=Ye(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}if(i(),e.startTime=n(),i(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),i(),e.endTime=n(),i(),function(t,e){var a=new qe;He(t,(function(t,e){var n;switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){a.set(t,r[i].region);break}break;case"vertical":a.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),a.integer(t,n[0]),a.percent(t,n[0])&&a.set("snapToLines",!1),a.alt(t,n[0],["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",Ve,"end"]);break;case"position":n=e.split(","),a.percent(t,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",Ve,"end","line-left","line-right","auto"]);break;case"size":a.percent(t,e);break;case"align":a.alt(t,e,["start",Ve,"end","left","right"])}}),/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical","");var n=a.get("line","auto");"auto"===n&&-1===Ke.line&&(n=-1),e.line=n,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",Ve);var i=a.get("position","auto");"auto"===i&&50===Ke.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(t,e)}function Xe(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var Qe=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new ze,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Xe(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var a=t.substr(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),a}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var a="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(a=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var i=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(i?i=!1:a=r(),e.state){case"HEADER":/:/.test(a)?He(a,(function(t,e){}),/:/):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new Ge(0,0,""),e.state="CUE",-1===a.indexOf("--\x3e")){e.cue.id=a;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{We(a,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==a.indexOf("--\x3e");if(!a||s&&(i=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=a;continue;case"BADCUE":a||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t)}return this.onflush&&this.onflush(),this},t}(),$e=r(8),Je=r(16),Ze=/\r\n|\n\r|\n|\r/g,tr=function(t,e,r){return void 0===r&&(r=0),t.substr(r,e.length)===e},er=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function rr(t,e,r){return er(t.toString())+er(e.toString())+er(r)}function ar(t,e,r,a,i,s,o,l){var c,u=new Qe,d=Object(M.f)(new Uint8Array(t)).trim().replace(Ze,"\n").split("\n"),h=[],f=Object($e.a)(e,r),p="00:00.000",m=0,y=0,v=!0,g=!1;u.oncue=function(t){var e=a[i],r=a.ccOffset,n=(m-f)/9e4;if(null!=e&&e.new&&(void 0!==y?r=a.ccOffset=e.start:function(t,e,r){var a=t[e],n=t[a.prevCC];if(!n||!n.new&&a.new)return t.ccOffset=t.presentationOffset=a.start,void(a.new=!1);for(;null!==(i=n)&&void 0!==i&&i.new;){var i;t.ccOffset+=a.start-n.start,a.new=!1,n=t[(a=n).prevCC]}t.presentationOffset=r}(a,i,n)),n&&(r=n-a.presentationOffset),g){var o=t.endTime-t.startTime,l=Object(Je.b)(9e4*(t.startTime+r-y),9e4*s)/9e4;t.startTime=l,t.endTime=l+o}var c=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(c)),t.id||(t.id=rr(t.startTime,t.endTime,c)),t.endTime>0&&h.push(t)},u.onparsingerror=function(t){c=t},u.onflush=function(){c?l(c):o(h)},d.forEach((function(t){if(v){if(tr(t,"X-TIMESTAMP-MAP=")){v=!1,g=!0,t.substr(16).split(",").forEach((function(t){tr(t,"LOCAL:")?p=t.substr(6):tr(t,"MPEGTS:")&&(m=parseInt(t.substr(7)))}));try{y=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),a=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(n.a)(e)&&Object(n.a)(r)&&Object(n.a)(a)&&Object(n.a)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*a)+36e5*i}(p)/1e3}catch(t){g=!1,c=t}return}""===t&&(v=!1)}u.parse(t+"\n")})),u.flush()}function nr(){return(nr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var ir=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,sr=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,or={left:"start",center:"center",right:"end",start:"start",end:"end"};function lr(t,e,r,a,n){var i=Object(l.b)(new Uint8Array(t),["mdat"]);if(0!==i.length){var s=i[0],o=Object(M.f)(new Uint8Array(t,s.start,s.end-s.start)),c=Object($e.c)(e,1,r);try{a(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(a).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||a[e],t}),{}),i="preserve"!==r.getAttribute("xml:space"),s=ur(cr(r,"styling","style")),o=ur(cr(r,"layout","region")),l=cr(r,"body","[begin]");return[].map.call(l,(function(t){var r=function t(e,r){return[].slice.call(e.childNodes).reduce((function(e,a,n){var i;return"br"===a.nodeName&&n?e+"\n":null!==(i=a.childNodes)&&void 0!==i&&i.length?t(a,r):r?e+a.textContent.trim().replace(/\s+/g," "):e+a.textContent}),"")}(t,i);if(!r||!t.hasAttribute("begin"))return null;var a=fr(t.getAttribute("begin"),n),l=fr(t.getAttribute("dur"),n),c=fr(t.getAttribute("end"),n);if(null===a)throw hr(t);if(null===c){if(null===l)throw hr(t);c=a+l}var u=new Ge(a-e,c-e,r);u.id=rr(u.startTime,u.endTime,u.text);var d=o[t.getAttribute("region")],h=s[t.getAttribute("style")];u.position=10,u.size=80;var f=function(t,e){var r="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(a,n){var i=dr(e,r,n)||dr(t,r,n);return i&&(a[n]=i),a}),{})}(d,h),p=f.textAlign;if(p){var m=or[p];m&&(u.lineAlign=m),u.align=p}return nr(u,f),u})).filter((function(t){return null!==t}))}(o,c))}catch(t){n(t)}}else n(new Error("Could not parse IMSC1 mdat"))}function cr(t,e,r){var a=t.getElementsByTagName(e)[0];return a?[].slice.call(a.querySelectorAll(r)):[]}function ur(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function dr(t,e,r){return t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function hr(t){return new Error("Could not parse ttml timestamp "+t)}function fr(t,e){if(!t)return null;var r=Ye(t);return null===r&&(ir.test(t)?r=function(t,e){var r=ir.exec(t),a=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/e.frameRate}(t,e):sr.test(t)&&(r=function(t,e){var r=sr.exec(t),a=Number(r[1]);switch(r[2]){case"h":return 3600*a;case"m":return 60*a;case"ms":return 1e3*a;case"f":return a/e.frameRate;case"t":return a/e.tickRate}return a}(t,e))),r}var pr=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new je(this,"textTrack1"),r=new je(this,"textTrack2"),a=new je(this,"textTrack3"),n=new je(this,"textTrack4");this.cea608Parser1=new Ue(1,e,r),this.cea608Parser2=new Ue(3,a,n)}t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,a,n){for(var s,o,l,c,u=!1,d=n.length;d--;){var h=n[d],f=(s=h[0],o=h[1],l=e,c=r,Math.min(o,c)-Math.max(s,l));if(f>=0&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],r),u=!0,f/(r-e)>.5))return}if(u||n.push([e,r]),this.config.renderTextTracksNatively){var p=this.captionsTracks[t];this.Cues.newCue(p,e,r,a)}else{var m=this.Cues.newCue(null,e,r,a);this.hls.trigger(i.a.CUES_PARSED,{type:"captions",cues:m,track:t})}},e.onInitPtsFound=function(t,e){var r=this,a=e.frag,n=e.id,s=e.initPTS,o=e.timescale,l=this.unparsedVttFrags;"main"===n&&(this.initPTS[a.cc]=s,this.timescale[a.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach((function(t){r.onFragLoaded(i.a.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var a=e.textTracks[r];if(a[t])return a}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,a=this.media,n=e[t],i=n.label,s=n.languageCode,o=this.getExistingTrack(t);if(o)r[t]=o,O(r[t]),C(r[t],a);else{var l=this.createTextTrack("captions",i,s);l&&(l[t]=!0,r[t]=l)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var a=this.media;if(a)return a.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){O(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)O(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this;this.textTracks=[];var a=e.subtitleTracks||[],n=a.some((function(t){return"stpp.ttml.im1t"===t.textCodec}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){var s=this.tracks&&a&&this.tracks.length===a.length;if(this.tracks=a||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var a;if(e<o.length){for(var n=null,i=0;i<o.length;i++)if(mr(o[i],t)){n=o[i];break}n&&(a=n)}a?O(a):(a=r.createTextTrack("subtitles",t.name,t.lang))&&(a.mode="disabled"),a&&(a.groupId=t.groupId,r.textTracks.push(a))}))}else if(!s&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var a="textTrack"+e[1],n=r.captionsProperties[a];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}}))},e.onFragLoading=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2,n=this.lastSn,i=this.lastPartIndex;if(this.enabled&&r&&a&&e.frag.type===_.b.MAIN){var s,o,l=e.frag.sn,c=null!=(s=null==e||null===(o=e.part)||void 0===o?void 0:o.index)?s:-1;l===n+1||l===n&&c===i+1||(r.reset(),a.reset()),this.lastSn=l,this.lastPartIndex=c}},e.onFragLoaded=function(t,e){var r=e.frag,a=e.payload,s=this.initPTS,o=this.unparsedVttFrags;if(r.type===_.b.SUBTITLE)if(a.byteLength){if(!Object(n.a)(s[r.cc]))return o.push(e),void(s.length&&this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var l=r.decryptdata,c="stats"in e;if(null==l||null==l.key||"AES-128"!==l.method||c){var u=this.tracks[r.level],d=this.vttCCs;d[r.cc]||(d[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),u&&"stpp.ttml.im1t"===u.textCodec?this._parseIMSC1(r,a):this._parseVTTs(r,a,d)}}else this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,a=this.hls;lr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){r._appendCues(e,t.level),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){o.b.log("Failed to parse IMSC1: "+e),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,r){var a=this,n=this.hls;ar(e,this.initPTS[t.cc],this.timescale[t.cc],r,t.cc,t.start,(function(e){a._appendCues(e,t.level),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){a._fallbackToIMSC1(t,e),o.b.log("Failed to parse VTT cue: "+r),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},e._fallbackToIMSC1=function(t,e){var r=this,a=this.tracks[t.level];a.textCodec||lr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){a.textCodec="stpp.ttml.im1t",r._parseIMSC1(t,e)}),(function(){a.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var a=this.textTracks[e];if("disabled"===a.mode)return;t.forEach((function(t){return I(a,t)}))}else{var n=this.tracks[e].default?"default":"subtitles"+e;r.trigger(i.a.CUES_PARSED,{type:"subtitles",cues:t,track:n})}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===_.b.SUBTITLE){if(!Object(n.a)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.a.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2;if(this.enabled&&r&&a)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var s=this.extractCea608Data(i);r.addData(e.samples[n].pts,s[0]),a.addData(e.samples[n].pts,s[1])}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.endOffsetSubtitles,i=e.type,s=this.media;if(s&&!(s.currentTime<a)){if(!i||"video"===i){var o=this.captionsTracks;Object.keys(o).forEach((function(t){return P(o[t],r,a)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(t){return P(l[t],r,n)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],r=2,a=[[],[]],n=0;n<e;n++){var i=t[r++],s=127&t[r++],o=127&t[r++],l=3&i;0===s&&0===o||0!=(4&i)&&(0!==l&&1!==l||(a[l].push(s),a[l].push(o)))}return a},t}();function mr(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function yr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var vr,gr=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,r,a,n=t.prototype;return n.setStreamController=function(t){this.streamController=t},n.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},n.registerListeners=function(){var t=this.hls;t.on(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.unregisterListener=function(){var t=this.hls;t.off(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.onFpsDropLevelCapping=function(e,r){t.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},n.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},n.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(e){var r=this,a=this.hls.levels;if(!a.length)return-1;var n=a.filter((function(a,n){return t.isLevelAllowed(n,r.restrictedLevels)&&n<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return-1;for(var a,n,i=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(a=o,!(n=t[s+1])||a.width!==n.width||a.height!==n.height)){i=s;break}}return i},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&yr(e.prototype,r),a&&yr(e,a),t}(),br=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var a=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=a,a&&"function"==typeof a.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var a=performance.now();if(e){if(this.lastTime){var n=a-this.lastTime,s=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,c=1e3*s/n,u=this.hls;if(u.trigger(i.a.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),c>0&&s>u.config.fpsDroppedMonitoringThreshold*l){var d=u.currentLevel;o.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=d)&&(d-=1,u.trigger(i.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}();!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(vr||(vr={}));var wr="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function kr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Tr,Er,xr,Sr=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},a._registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a._unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a.getLicenseServerUrl=function(t){switch(t){case vr.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},a._attemptKeySystemAccess=function(t,e,r){var a=this,n=function(t,e,r,a){switch(t){case vr.WIDEVINE:return function(t,e,r){var a={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||""})})),e.forEach((function(t){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||""})})),[a]}(e,r,a);default:throw new Error("Unknown key-system: "+t)}}(t,e,r,this._drmSystemOptions);o.b.log("Requesting encrypted media key-system access");var i=this.requestMediaKeySystemAccess(t,n);this.mediaKeysPromise=i.then((function(e){return a._onMediaKeySystemAccessObtained(t,e)})),i.catch((function(e){o.b.error('Failed to obtain key-system "'+t+'" access:',e)}))},a._onMediaKeySystemAccessObtained=function(t,e){var r=this;o.b.log('Access for key-system "'+t+'" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(a);var n=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return a.mediaKeys=e,o.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e}));return n.catch((function(t){o.b.error("Failed to create media-keys:",t)})),n},a._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},a._onNewMediaKeySession=function(t){var e=this;o.b.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(r){e._onKeySessionMessage(t,r.message)}),!1)},a._onKeySessionMessage=function(t,e){o.b.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){o.b.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},a.onMediaEncrypted=function(t){var e=this;if(o.b.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});var r=function(r){e._media&&(e._attemptSetMediaKeys(r),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(r).catch(r)},a._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});o.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},a._generateRequestWithPreferredKeySession=function(t,e){var r=this,a=this._mediaKeysList[0];if(!a)return o.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(a.mediaKeysSessionInitialized)o.b.warn("Key-Session already initialized but requested again");else{var n=a.mediaKeysSession;if(!n)return o.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return o.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});o.b.log('Generating key-session request for "'+t+'" init data type'),a.mediaKeysSessionInitialized=!0,n.generateRequest(t,e).then((function(){o.b.debug("Key-session generation succeeded")})).catch((function(t){o.b.error("Error generating key-session request:",t),r.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},a._createLicenseXhr=function(t,e,r){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,t,e,r);var n=this._licenseXhrSetup;if(n)try{n.call(this.hls,a,t),n=void 0}catch(t){o.b.error(t)}try{a.readyState||a.open("POST",t,!0),n&&n.call(this.hls,a,t)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return a},a._onLicenseRequestReadyStageChange=function(t,e,r,a){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,o.b.log("License request succeeded");var n=t.response,l=this._licenseResponseCallback;if(l)try{n=l.call(this.hls,t,e)}catch(t){o.b.error(t)}a(n)}else{if(o.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var c=3-this._requestLicenseFailureCount+1;o.b.warn("Retrying license request, "+c+" attempts left"),this._requestLicense(r,a)}}},a._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case vr.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},a._requestLicense=function(t,e){o.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return o.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var a=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(a,t,e);o.b.log("Sending license request to URL: "+a);var l=this._generateLicenseRequestChallenge(r,t);n.send(l)}catch(t){o.b.error("Failure requesting DRM license: "+t),this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},a.onMediaAttached=function(t,e){if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted)}},a.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},a.onManifestParsed=function(t,e){if(this._emeEnabled){var r=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),a=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(vr.WIDEVINE,r,a)}},e=t,(r=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&kr(e.prototype,r),t}();function Lr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _r(t,e,r){return e&&Lr(t.prototype,e),r&&Lr(t,r),t}function Ar(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Rr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Dr(){return(Dr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(Tr||(Tr={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(Er||(Er={})),function(t){t.VOD="v",t.LIVE="l"}(xr||(xr={}));var Cr=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:Tr.MANIFEST,su:!r.initialized})}catch(t){o.b.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,a=r.hls.levels[e.level],n=r.getObjectType(e),i={d:1e3*e.duration,ot:n};n!==Tr.VIDEO&&n!==Tr.AUDIO&&n!=Tr.MUXED||(i.br=a.bitrate/1e3,i.tb=r.getTopBandwidth(n)/1e3,i.bl=r.getBufferLength(n)),r.apply(t,i)}catch(t){o.b.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var a=this.config=e.config,n=a.cmcd;null!=n&&(a.pLoader=this.createPlaylistLoader(),a.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},e.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,a;this.audioBuffer=null===(r=e.tracks.audio)||void 0===r?void 0:r.buffer,this.videoBuffer=null===(a=e.tracks.video)||void 0===a?void 0:a.buffer},e.createData=function(){var t;return{v:1,sf:Er.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),Dr(r,this.createData());var a=r.ot===Tr.INIT||r.ot===Tr.VIDEO||r.ot===Tr.MUXED;if(this.starved&&a&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=t.toHeaders(r);if(!Object.keys(n).length)return;e.headers||(e.headers={}),Dr(e.headers,n)}else{var i=t.toQuery(r);if(!i)return;e.url=t.appendQueryToUri(e.url,i)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?Tr.TIMED_TEXT:"initSegment"===t.sn?Tr.INIT:"audio"===e?Tr.AUDIO:"main"===e?this.hls.audioTracks.length?Tr.VIDEO:Tr.MUXED:void 0},e.getTopBandwidth=function(t){var e,r=0,a=this.hls;if(t===Tr.AUDIO)e=a.audioTracks;else{var n=a.maxAutoLevel,i=n>-1?n+1:a.levels.length;e=a.levels.slice(0,i)}for(var s,o=Ar(e);!(s=o()).done;){var l=s.value;l.bitrate>r&&(r=l.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r=t===Tr.AUDIO?this.audioBuffer:this.videoBuffer;return r&&e?1e3*lt.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},_r(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},_r(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],a=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},n=function(t){return Math.round(t)},i=function(t){return 100*n(t/100)},s={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(t){return encodeURIComponent(t)},rtp:i,tb:n},o=Ar(Object.keys(t||{}).sort());!(e=o()).done;){var l=e.value,c=t[l];if(a(c)&&!("v"===l&&1===c||"pr"==l&&1===c)){var u=s[l];u&&(c=u(c));var d,h=typeof c;d="ot"===l||"sf"===l||"st"===l?l+"="+c:"boolean"===h?l:"number"===h?l+"="+c:l+"="+JSON.stringify(c),r.push(d)}}return r.join(",")},t.toHeaders=function(e){for(var r={},a=["Object","Request","Session","Status"],n=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(e);s<o.length;s++){var l=o[s];n[null!=i[l]?i[l]:1][l]=e[l]}for(var c=0;c<n.length;c++){var u=t.serialize(n[c]);u&&(r["CMCD-"+a[c]]=u)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),Ir=r(12),Or=/^age:\s*[\d.]+\s*$/m,Pr=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new Ir.a,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var r=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var n=this.xhrSetup;try{if(n)try{n(r,e.url)}catch(t){r.open("GET",e.url,!0),n(r,e.url)}r.readyState||r.open("GET",e.url,!0);var i=this.context.headers;if(i)for(var s in i)r.setRequestHeader(s,i[s])}catch(t){return void this.callbacks.onError({code:r.status,text:t.message},e,r)}e.rangeEnd&&r.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),r.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var a=e.readyState,n=this.config;if(!r.aborted&&a>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===a){e.onreadystatechange=null,e.onprogress=null;var i=e.status;if(i>=200&&i<300){var s,l;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var c=this.callbacks.onProgress;if(c&&c(r,t,s,e),!this.callbacks)return;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,r,t,e)}else r.retry>=n.maxRetry||i>=400&&i<499?(o.b.error(i+" while loading "+t.url),this.callbacks.onError({code:i,text:e.statusText},t,e)):(o.b.warn(i+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout)}},e.loadtimeout=function(){o.b.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&Or.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}();function Mr(t){var e="function"==typeof Map?new Map:void 0;return(Mr=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return function(t,e,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&Fr(n,r.prototype),n}).apply(null,arguments)}(t,arguments,function(t){return(Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Fr(a,t)})(t)}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Br(){return(Br=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var Nr=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Ur,this.controller=new self.AbortController,this.stats=new Ir.a}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var a=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var s=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Br({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),o=r.onProgress,l="arraybuffer"===t.responseType,c=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){a.abortInternal(),r.onTimeout(i,t,a.response)}),e.timeout),self.fetch(this.request).then((function(r){if(a.response=a.loader=r,!r.ok){var s=r.status,c=r.statusText;throw new jr(c||"fetch, bad network response",s,r)}return i.loading.first=Math.max(self.performance.now(),i.loading.start),i.total=parseInt(r.headers.get("Content-Length")||"0"),o&&Object(n.a)(e.highWaterMark)?a.loadProgressively(r,i,t,e.highWaterMark,o):l?r.arrayBuffer():r.text()})).then((function(s){var l=a.response;self.clearTimeout(a.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first),i.loaded=i.total=s[c];var u={url:l.url,data:s};o&&!Object(n.a)(e.highWaterMark)&&o(i,t,s,l),r.onSuccess(u,i,t,l)})).catch((function(e){if(self.clearTimeout(a.requestTimeout),!i.aborted){var n=e.code||0;r.onError({code:n,text:e.message},t,e.details)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,r,a,n){void 0===a&&(a=0);var i=new ne.a,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return i.dataLength&&n(e,r,i.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,c=l.length;return e.loaded+=c,c<a||i.dataLength?(i.push(l),i.dataLength>=a&&n(e,r,i.flush(),t)):n(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function Ur(t,e){return new self.Request(t.url,e)}var jr=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this,e)||this).code=void 0,n.details=void 0,n.code=r,n.details=a,n}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Fr(e,r),a}(Mr(Error)),Gr=Nr,zr=/\s/;function Yr(){return(Yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function qr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qr(Object(r),!0).forEach((function(e){Kr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vr=Hr(Hr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Pr,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ae,bufferController:Te,capLevelController:gr,fpsController:br,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:wr,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:{newCue:function(t,e,r,a){for(var n,i,s,o,l,c=[],u=self.VTTCue||self.TextTrackCue,d=0;d<a.rows.length;d++)if(s=!0,o=0,l="",!(n=a.rows[d]).isEmpty()){for(var h=0;h<n.chars.length;h++)zr.test(n.chars[h].uchar)&&s?o++:(l+=n.chars[h].uchar,s=!1);n.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++;var f=Xe(l.trim()),p=rr(e,r,f);t&&t.cues&&t.cues.getCueById(p)||((i=new u(e,r,f)).id=p,i.line=d+1,i.align="left",i.position=10+Math.min(80,10*Math.floor(8*o/32)),c.push(i))}return t&&c.length&&(c.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),c.forEach((function(e){return I(t,e)}))),c}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:fe,subtitleTrackController:ge,timelineController:pr,audioStreamController:oe,audioTrackController:ue,emeController:Sr,cmcdController:Cr});function Wr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Xr=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Vt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Yr({},t,e)}(t.DefaultConfig,e);this.userConfig=e,Object(o.a)(r.debug),this._autoLevelCapping=-1,r.progressive&&function(t){var e=t.loader;e!==Gr&&e!==Pr?(o.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Gr,t.progressive=!0,t.enableSoftwareAES=!0,o.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}(r);var a=r.abrController,n=r.bufferController,i=r.capLevelController,s=r.fpsController,l=this.abrController=new a(this),c=this.bufferController=new n(this),u=this.capLevelController=new i(this),d=new s(this),h=new R(this),f=new D(this),p=new F(this),m=this.levelController=new rt(this),y=new at(this),v=this.streamController=new Zt(this,y);u.setStreamController(v),d.setStreamController(v);var g=[m,v];this.networkControllers=g;var b=[h,f,l,c,u,d,p,y];this.audioTrackController=this.createController(r.audioTrackController,null,g),this.createController(r.audioStreamController,y,g),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,g),this.createController(r.subtitleStreamController,y,g),this.createController(r.timelineController,null,b),this.emeController=this.createController(r.emeController,null,b),this.cmcdController=this.createController(r.cmcdController,null,b),this.latencyController=this.createController(U,null,b),this.coreComponents=b}t.isSupported=function(){return function(){var t=Yt();if(!t)return!1;var e=qt(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!a}()};var e,r,n,l=t.prototype;return l.createController=function(t,e,r){if(t){var a=e?new t(this,e):new t(this);return r&&r.push(a),a}return null},l.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},l.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},l.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},l.off=function(t,e,r,a){void 0===r&&(r=this),this._emitter.off(t,e,r,a)},l.listeners=function(t){return this._emitter.listeners(t)},l.emit=function(t,e,r){return this._emitter.emit(t,e,r)},l.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){o.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},l.listenerCount=function(t){return this._emitter.listenerCount(t)},l.destroy=function(){o.b.log("destroy"),this.trigger(i.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},l.attachMedia=function(t){o.b.log("attachMedia"),this._media=t,this.trigger(i.a.MEDIA_ATTACHING,{media:t})},l.detachMedia=function(){o.b.log("detachMedia"),this.trigger(i.a.MEDIA_DETACHING,void 0),this._media=null},l.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,n=this.url=a.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});o.b.log("loadSource:"+n),e&&r&&r!==n&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(i.a.MANIFEST_LOADING,{url:t})},l.startLoad=function(t){void 0===t&&(t=-1),o.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},l.stopLoad=function(){o.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},l.swapAudioCodec=function(){o.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){o.b.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},l.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,n=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return i.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Vr},set:function(e){t.defaultConfig=e}}],(r=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){o.b.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){o.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){o.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){o.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){o.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(o.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,a=0;a<r;a++)if(t[a].maxBitrate>e)return a;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&Wr(e.prototype,r),n&&Wr(e,n),t}();Xr.defaultConfig=void 0}]).default})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("smartplayer",[],e):"object"==typeof exports?exports.smartplayer=e():t.smartplayer=e()}(window,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=74)}([function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=r(10),i=Object.prototype.toString;function s(t){return"[object Array]"===i.call(t)}function o(t){return void 0===t}function l(t){return null!==t&&"object"===a(t)}function c(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function d(t,e){if(null!=t)if("object"!==a(t)&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isPlainObject:c,isUndefined:o,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return l(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function t(){var e={};function r(r,a){c(e[a])&&c(r)?e[a]=t(e[a],r):c(r)?e[a]=t({},r):s(r)?e[a]=r.slice():e[a]=r}for(var a=0,n=arguments.length;a<n;a++)d(arguments[a],r);return e},extend:function(t,e,r){return d(e,(function(e,a){t[a]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,r){"use strict";(function(t){var a=r(20),n=r(21);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function l(){}function c(t){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],m(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,c._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var a;try{a=r(t._value)}catch(t){return void h(e.promise,t)}d(e.promise,a)}else(1===t._state?d:h)(e.promise,t._value)}))):t._deferreds.push(e)}function d(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===i(e)||"function"==typeof e)){var r=e.then;if(e instanceof c)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void m((a=r,n=e,function(){a.apply(n,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){h(t,e)}var a,n}function h(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&c._immediateFn((function(){t._handled||c._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)u(t,t._deferreds[e]);t._deferreds=null}function p(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function m(t,e){var r=!1;try{t((function(t){r||(r=!0,d(e,t))}),(function(t){r||(r=!0,h(e,t))}))}catch(t){if(r)return;r=!0,h(e,t)}}c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){var r=new this.constructor(l);return u(this,new p(t,e,r)),r},c.prototype.finally=a.a,c.all=function(t){return new c((function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return e([]);var n=a.length;function s(t,o){try{if(o&&("object"===i(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,(function(e){s(t,e)}),r)}a[t]=o,0==--n&&e(a)}catch(t){r(t)}}for(var l=0;l<a.length;l++)s(l,a[l])}))},c.allSettled=n.a,c.resolve=function(t){return t&&"object"===i(t)&&t.constructor===c?t:new c((function(e){e(t)}))},c.reject=function(t){return new c((function(e,r){r(t)}))},c.race=function(t){return new c((function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var a=0,n=t.length;a<n;a++)c.resolve(t[a]).then(e,r)}))},c._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){s(t,0)},c._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=c}).call(this,r(49).setImmediate)},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,a){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);a&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},function(t,e,r){var a=r(5);t.exports=function(t){"use strict";var e="",r=(t=t||{}).icons,n=a.$escape,i=t.message,s=t.btnLink,o=t.btnText;return e+='<div class="smartplayer-blocked">\n  <div class="smartplayer-blocked__logo">',e+=r.vturb,e+='</div>\n  <div class="smartplayer-blocked__content">\n    <div class="smartplayer-blocked__msg">',e+=n(i||"BLOQUEADO"),e+="</div>\n    ",s&&o&&(e+='\n      <a href="',e+=n(s),e+='" target="_blank" class="smartplayer-blocked__button">',e+=n(o),e+="</a>\n    "),e+="\n  </div>\n</div>\n"}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(a=window)}t.exports=a},function(t,e,r){"use strict";t.exports=r(51)},function(t,e,r){"use strict";var a=r(2),n=r.n(a),i=r(19),s=n()((function(t){return t[1]}));s.i(i.a),s.push([t.i,'#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-ms-flex-line-pack:stretch;align-content:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;align-self:auto;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-direction:normal;animation-direction:normal;-webkit-animation-duration:0s;animation-duration:0s;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:none;animation-name:none;-webkit-animation-play-state:running;animation-play-state:running;-webkit-animation-timing-function:ease;animation-timing-function:ease;azimuth:center;-webkit-backface-visibility:visible;backface-visibility:visible;background-attachment:scroll;background-blend-mode:normal;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-repeat:repeat;background-size:auto auto;block-size:auto;border-block-end-color:currentcolor;border-block-end-style:none;border-block-end-width:medium;border-block-start-color:currentcolor;border-block-start-style:none;border-block-start-width:medium;border-bottom-left-radius:0;border-bottom-right-radius:0;border-collapse:separate;border-image-outset:0s;border-image-repeat:stretch;border-image-slice:100%;border-image-source:none;border-image-width:1;border-inline-end-color:currentcolor;border-inline-end-style:none;border-inline-end-width:medium;border-inline-start-color:currentcolor;border-inline-start-style:none;border-inline-start-width:medium;border-spacing:0;border-top-left-radius:0;border-top-right-radius:0;border:none;bottom:auto;-webkit-box-decoration-break:slice;box-decoration-break:slice;-webkit-box-shadow:none;box-shadow:none;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-column-break-after:auto;-moz-column-break-after:auto;break-after:auto;-webkit-column-break-before:auto;-moz-column-break-before:auto;break-before:auto;-webkit-column-break-inside:auto;-moz-column-break-inside:auto;break-inside:auto;caption-side:top;caret-color:auto;clear:none;clip:auto;-webkit-clip-path:none;clip-path:none;color:initial;-webkit-column-count:auto;-moz-column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule-color:currentcolor;-moz-column-rule-color:currentcolor;column-rule-color:currentcolor;-webkit-column-rule-style:none;-moz-column-rule-style:none;column-rule-style:none;-webkit-column-rule-width:medium;-moz-column-rule-width:medium;column-rule-width:medium;-webkit-column-span:none;-moz-column-span:none;column-span:none;-webkit-column-width:auto;-moz-column-width:auto;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;display:inline;empty-cells:show;-webkit-filter:none;filter:none;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:1;flex-shrink:1;-ms-flex-wrap:nowrap;flex-wrap:nowrap;float:none;font-family:initial;-webkit-font-feature-settings:normal;font-feature-settings:normal;-webkit-font-kerning:auto;font-kerning:auto;-webkit-font-language-override:normal;font-language-override:normal;font-size:medium;font-size-adjust:none;font-stretch:normal;font-style:normal;font-synthesis:weight style;font-variant:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-east-asian:normal;-webkit-font-variant-ligatures:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;font-weight:400;grid-auto-columns:auto;grid-auto-flow:row;grid-auto-rows:auto;grid-column-end:auto;grid-column-gap:0;grid-column-start:auto;grid-row-end:auto;grid-row-gap:0;grid-row-start:auto;grid-template-areas:none;grid-template-columns:none;grid-template-rows:none;height:auto;-webkit-hyphens:manual;-ms-hyphens:manual;hyphens:manual;image-orientation:0deg;image-rendering:auto;image-resolution:1dppx;ime-mode:auto;inline-size:auto;isolation:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;left:auto;letter-spacing:normal;line-break:auto;line-height:normal;list-style-image:none;list-style-position:outside;list-style-type:disc;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-start:0;margin-inline-start:0;margin:0;-webkit-mask-clip:border-box;mask-clip:border-box;-webkit-mask-composite:source-over;mask-composite:add;-webkit-mask-image:none;mask-image:none;mask-mode:match-source;-webkit-mask-origin:border-box;mask-origin:border-box;-webkit-mask-position:0 0;mask-position:0 0;-webkit-mask-repeat:repeat;mask-repeat:repeat;-webkit-mask-size:auto;mask-size:auto;mask-type:luminance;max-height:none;max-width:none;min-block-size:0;min-height:0;min-inline-size:0;min-width:0;mix-blend-mode:normal;-o-object-fit:fill;object-fit:fill;-o-object-position:50% 50%;object-position:50% 50%;offset-block-end:auto;offset-block-start:auto;offset-inline-end:auto;offset-inline-start:auto;opacity:1;-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;orphans:2;outline-color:initial;outline-offset:0;outline-style:none;outline-width:medium;overflow:visible;overflow-wrap:normal;overflow-x:visible;overflow-y:visible;-webkit-padding-after:0;padding-block-end:0;-webkit-padding-before:0;padding-block-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-padding-start:0;padding-inline-start:0;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:initial;resize:none;right:auto;ruby-align:space-around;ruby-merge:separate;ruby-position:over;scroll-behavior:auto;-ms-scroll-snap-coordinate:none;scroll-snap-coordinate:none;-ms-scroll-snap-destination:0 0;scroll-snap-destination:0 0;-ms-scroll-snap-points-x:none;scroll-snap-points-x:none;-ms-scroll-snap-points-y:none;scroll-snap-points-y:none;-ms-scroll-snap-type:none;scroll-snap-type:none;shape-image-threshold:0;shape-margin:0;shape-outside:none;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:initial;-moz-text-align-last:auto;text-align-last:auto;text-combine-upright:none;-webkit-text-decoration-color:currentcolor;text-decoration-color:currentcolor;-webkit-text-decoration-line:none;text-decoration-line:none;-webkit-text-decoration-style:solid;text-decoration-style:solid;-webkit-text-emphasis-color:currentcolor;text-emphasis-color:currentcolor;-webkit-text-emphasis-position:over;text-emphasis-position:over right;-webkit-text-emphasis-style:none;text-emphasis-style:none;text-indent:0;text-justify:auto;-webkit-text-orientation:mixed;text-orientation:mixed;-o-text-overflow:clip;text-overflow:clip;text-rendering:auto;text-shadow:none;text-transform:none;text-underline-position:auto;top:auto;-ms-touch-action:auto;touch-action:auto;-webkit-transform:none;-ms-transform:none;transform:none;transform-box:border-box;-webkit-transform-origin:50% 50% 0;-ms-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:0s;-o-transition-duration:0s;transition-duration:0s;-webkit-transition-property:all;-o-transition-property:all;transition-property:all;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;will-change:auto;word-break:normal;word-spacing:normal;word-wrap:normal;-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb;z-index:auto;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none}#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-webkit-box-sizing:border-box;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;text-decoration:none}#smartplayer#smartplayer#smartplayer,#smartplayer#smartplayer#smartplayer div{display:block}@-webkit-keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}#smartplayer#smartplayer#smartplayer [data-balloon]:before{display:none}#smartplayer#smartplayer#smartplayer [data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}#smartplayer#smartplayer#smartplayer [data-balloon][data-balloon-pos=up]:after{margin-bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon.smartplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-50px 0 0 -50px;height:100px;width:100px;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot{-webkit-animation:smartplayer-loading-dot-fade .8s ease infinite;animation:smartplayer-loading-dot-fade .8s ease infinite;opacity:0;-webkit-transform-origin:4px 4px;-ms-transform-origin:4px 4px;transform-origin:4px 4px}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}@keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%;position:absolute;bottom:0;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller{position:absolute;bottom:0;left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons.smartplayer-comment-box{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-bar .smartplayer-played .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-highlight{display:block;width:8px;-webkit-transform:translateX(-4px);-ms-transform:translateX(-4px);transform:translateX(-4px);top:4px;height:40%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover .smartplayer-highlight-text{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-preview{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-time{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight .smartplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;-webkit-transition:opacity .1s ease-in-out;-o-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time.smartplayer-hidden{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.4);height:3px;-webkit-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons{height:38px;position:absolute;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box{display:none;position:absolute;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-icon{position:absolute;left:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-send-icon{position:absolute;right:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;-webkit-box-shadow:0 0 25px rgba(0,0,0,.3);box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box.smartplayer-comment-setting-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box input[type=radio]{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box label{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type .smartplayer-comment-setting-title{margin-bottom:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-clear{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-left .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right .smartplayer-icon{padding:8px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-badge,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time span{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon{width:40px;height:100%;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon .smartplayer-icon-content{-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:.8;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon:hover .smartplayer-icon-content{opacity:1}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-comment-icon{padding:10px 9px 9px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-setting-icon{padding-top:8.5px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-volume-icon{width:43px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon svg{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}@media (min-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;-webkit-transition:all .1s ease;-o-transition:all .1s ease;transition:all .1s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-icon{pointer-events:all}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-subtitle-btn{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box{position:absolute;right:0;bottom:50px;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div.smartplayer-setting-origin-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-narrow{width:70px;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-speed .smartplayer-setting-origin-panel{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-speed .smartplayer-setting-speed-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-speed-item{height:30px;padding:5px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item:hover,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full{display:inline-block;height:100%;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-list,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-mask{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item{height:25px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;line-height:25px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-comment{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input{max-height:0;max-width:0;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label{display:inline-block;position:relative;-webkit-box-shadow:#dfdfdf 0 0 0 0 inset;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:after{content:"";position:absolute;display:block;left:0;top:0;border-radius:15px;background:#fff;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.4);box-shadow:0 1px 3px rgba(0,0,0,.4);height:18px;width:18px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:after{left:12px}#smartplayer#smartplayer#smartplayer .smartplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}#smartplayer#smartplayer#smartplayer .smartplayer-logo img{max-width:100%;max-height:100%;background:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:12;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu.smartplayer-menu-show{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item{height:30px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;margin:0;display:inline-block;vertical-align:middle;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a:hover{text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle.smartplayer-subtitle-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:11;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-mask.smartplayer-mask-show{display:block}#smartplayer#smartplayer#smartplayer.smartplayer-playing:not(.smartplayer-fulled):not(.smartplayer-loading) .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap{position:absolute;font-size:0;width:100%;height:100%;top:0;left:0;right:0;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;display:none;-o-object-fit:contain;object-fit:contain;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-current{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-prepare{display:none}#smartplayer#smartplayer#smartplayer.smartplayer-initial .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplayer-fulled .smartplayer-video-wrap{background:#000}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-data{width:260px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action{position:absolute;top:0;left:0;width:100%;height:100%;padding:20px 20px 40px;-webkit-transform:initial;-ms-transform:initial;transform:none;display:block;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action.smartplayer-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action>*{position:absolute}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{top:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*{top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*{bottom:40px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*{left:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*{left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link{pointer-events:all;display:inline-block;padding:.65em .5em .5em;text-align:center;border-radius:5px;color:#fff;font-weight:700;line-height:1.2;-webkit-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-resume{position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999;background-color:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);padding:8px;cursor:auto}#smartplayer#smartplayer#smartplayer .smartplayer-resume__content{position:absolute;top:50%;left:0;right:0;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{margin:0 8px 16px;min-width:180px;font-size:2em;line-height:1.3;text-align:center;color:#fff;font-weight:700}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions{display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{background:rgba(0,0,0,0);padding:0;margin:4px;text-align:left;cursor:pointer;border:none;display:inline-table;color:#fff;min-width:180px;opacity:1;-webkit-transition:opacity .2s ease;-o-transition:opacity .2s ease;transition:opacity .2s ease}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{display:table}}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div:hover{opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{text-align:left;font-size:16px;line-height:1.1;font-weight:700;display:table-cell;vertical-align:middle;padding:0 1em 0 .6em}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:45px;height:45px;padding:5px;border:2px solid #fff;border-radius:50%;margin-right:8px;display:table-cell;vertical-align:middle}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:10px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:9px 9px 9px 7px}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{font-size:1.15em;margin-bottom:8px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{font-size:.9em}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:30px;height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:4px 4px 4px 2px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:5px}}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:150px;height:150px;border-radius:75px;padding-left:20px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.9;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay.smartplayer-hidden{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay svg{cursor:pointer}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:70px;height:70px;padding-left:13px;padding-right:6px}}#smartplayer#smartplayer#smartplayer.smartplayer-smart-auto-play .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content{display:none;position:absolute;top:0;right:0;font-size:12px;overflow:hidden;pointer-events:none;z-index:10000;max-width:100%}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box{background:rgba(0,0,0,.5);padding:2px 6px;border-bottom-left-radius:8px;-webkit-transform:translateX(91%);-ms-transform:translateX(91%);transform:translateX(91%);-webkit-transition:-webkit-transform .3s .5s;transition:-webkit-transform .3s .5s;-o-transition:transform .3s .5s;transition:transform .3s .5s;transition:transform .3s .5s,-webkit-transform .3s .5s;pointer-events:auto;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box:hover{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .3s 0s;transition:-webkit-transform .3s 0s;-o-transition:transform .3s 0s;transition:transform .3s 0s;transition:transform .3s 0s,-webkit-transform .3s 0s}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon{height:12px;width:12px;display:inline-block;margin-right:6px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon svg{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__text{color:#fff;font-size:12px;line-height:12px;white-space:nowrap}#smartplayer#smartplayer#smartplayer.smartplayer-offline .smartplayer-offline-content{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar{left:0;width:0;bottom:0;height:10px;opacity:.8;z-index:100005;position:absolute}#smartplayer#smartplayer#smartplayer .smartplayer-blocked{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#202020;-webkit-box-shadow:inset 0 0 160px 0 #000;box-shadow:inset 0 0 160px 0 #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo{position:absolute;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);height:80%;opacity:.035}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg path{fill:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__content{top:50%;left:50%;width:80%;position:absolute;max-width:32em;text-align:center;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{color:#ccc;text-align:center;font-size:1.2em;text-shadow:0 2px 0 #000,0 3px 3px #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{color:#fff;padding:.7em 1.5em;display:inline-block;font-size:1em;margin:1.2em auto 0;background:#f1582d;font-weight:600;border-radius:5px;text-decoration:none;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;-o-transition:transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}@media (max-width:480px){#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{font-size:1em}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{font-size:.8em}}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-finish,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-pause,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-start{position:absolute;top:0;display:none;width:100%;height:100%;background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-initial .smartplayer-image-start{z-index:9;display:block;background-color:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-paused:not(.smartplayer-finished) .smartplayer-image-pause{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-finished .smartplayer-image-finish{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay{cursor:pointer;z-index:9999;position:absolute;top:0;opacity:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay *{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplayer-show-smart-auto-play .smartplayer-smartplay{opacity:1}#smartplayer#smartplayer#smartplayer.smartplay{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1;width:100%;max-width:100%;max-height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-initial{cursor:pointer!important}#smartplayer#smartplayer#smartplayer.smartplay svg{width:100%;height:100%}#smartplayer#smartplayer#smartplayer.smartplay svg circle,#smartplayer#smartplayer#smartplayer.smartplay svg path{fill:#fff}#smartplayer#smartplayer#smartplayer.smartplay:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0!important;-webkit-transform:translate(0);transform:translate(0)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-bar-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-setting-loop,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-setting-speed,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-time{display:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-arrow .smartplayer-icon{margin:0 -3px}@media (min-width:900px){#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller-mask{opacity:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller-mask{opacity:1}}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-loading .smartplayer-bezel .smartplayer-loading-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller{cursor:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller-mask{opacity:0;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller-mask{opacity:1}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled{position:fixed!important;z-index:100000;left:0;top:0;width:100%!important;height:100%!important;padding:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap .smartplayer-video-current{height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{position:static;display:inline-block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-bar-time,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile.smartplayer-hide-controller .smartplayer-mobile-play,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-mobile-play{display:none}.smartplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer:not(.smartplayer-fulled){width:100%;position:relative;padding:56.25% 0 0}#smartplayer#smartplayer#smartplayer .smartplayer-content{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-opacity-0{opacity:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-in-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-icon{display:none}',""]),e.a=s},function(t,e){var r,a,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);t.exports=function(){return r(a),a}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},function(t,e){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);t.exports=function(t,e){var a=e||0,n=r;return[n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]]].join("")}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return t.apply(e,r)}}},function(t,e,r){"use strict";var a=r(0);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(a.isURLSearchParams(e))i=e.toString();else{var s=[];a.forEach(e,(function(t,e){null!=t&&(a.isArray(t)?e+="[]":t=[t],a.forEach(t,(function(t){a.isDate(t)?t=t.toISOString():a.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))})))})),i=s.join("&")}if(i){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var a=r(0),n=r(63),i={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o,l={adapter:("undefined"!=typeof XMLHttpRequest?o=r(14):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(o=r(14)),o),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),a.forEach(["post","put","patch"],(function(t){l.headers[t]=a.merge(i)})),t.exports=l}).call(this,r(7))},function(t,e,r){"use strict";var a=r(0),n=r(64),i=r(66),s=r(11),o=r(67),l=r(70),c=r(71),u=r(15);t.exports=function(t){return new Promise((function(e,r){var d=t.data,h=t.headers;a.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";h.Authorization="Basic "+btoa(p+":"+m)}var y=o(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),s(y,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:a,config:t,request:f};n(e,r,i),f=null}},f.onabort=function(){f&&(r(u("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(u(e,t,"ECONNABORTED",f)),f=null},a.isStandardBrowserEnv()){var v=(t.withCredentials||c(y))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;v&&(h[t.xsrfHeaderName]=v)}if("setRequestHeader"in f&&a.forEach(h,(function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)})),a.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),r(t),f=null)})),d||(d=null),f.send(d)}))}},function(t,e,r){"use strict";var a=r(65);t.exports=function(t,e,r,n,i){var s=new Error(t);return a(s,e,r,n,i)}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(t,e){return a.isPlainObject(t)&&a.isPlainObject(e)?a.merge(t,e):a.isPlainObject(e)?a.merge({},e):a.isArray(e)?e.slice():e}function c(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(t[n],e[n])}a.forEach(n,(function(t){a.isUndefined(e[t])||(r[t]=l(void 0,e[t]))})),a.forEach(i,c),a.forEach(s,(function(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(void 0,e[n])})),a.forEach(o,(function(a){a in e?r[a]=l(t[a],e[a]):a in t&&(r[a]=l(void 0,t[a]))}));var u=n.concat(i).concat(s).concat(o),d=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===u.indexOf(t)}));return a.forEach(d,c),r}},function(t,e,r){"use strict";function a(t){this.message=t}a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},a.prototype.__CANCEL__=!0,t.exports=a},function(t,e,r){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function o(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},a=[],n=0;n<t.length;n++){var i=t[n],l=e.base?i[0]+e.base:i[0],c=r[l]||0,u="".concat(l," ").concat(c);r[l]=c+1;var d=o(u),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:u,updater:y(h,e),references:1}),a.push(u)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var n=r.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,n);else{var i=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function f(t,e,r){var a=r.css,n=r.media,i=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var p=null,m=0;function y(t,e){var r,a,n;if(e.singleton){var i=m++;r=p||(p=c(e)),a=h.bind(null,r,i,!1),n=h.bind(null,r,i,!0)}else r=c(e),a=f.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<r.length;a++){var n=o(r[a]);s[n].references--}for(var i=l(t,e),c=0;c<r.length;c++){var u=o(r[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}r=i}}}},function(t,e,r){"use strict";var a=r(2),n=r.n(a)()((function(t){return t[1]}));n.push([t.i,':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{opacity:0;pointer-events:none;-webkit-transition:all .18s ease-out .18s;-o-transition:all .18s ease-out .18s;transition:all .18s ease-out .18s;text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;position:absolute;white-space:nowrap;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-top:5px solid var(--balloon-color);opacity:0;pointer-events:none;-webkit-transition:all .18s ease-out .18s;-o-transition:all .18s ease-out .18s;transition:all .18s ease-out .18s;content:"";position:absolute;z-index:10}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{-webkit-transition:none;-o-transition:none;transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after{-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after{-webkit-transform:translate(0);-ms-transform:translate(0);transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{-webkit-transform:translate(0);-ms-transform:translate(0);transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;-webkit-transform-origin:top;-ms-transform-origin:top;transform-origin:top;-webkit-transform:translateY(var(--balloon-move));-ms-transform:translateY(var(--balloon-move));transform:translateY(var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;-webkit-transform:translate(-50%,var(--balloon-move));-ms-transform:translate(-50%,var(--balloon-move));transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;-webkit-transform:translateY(calc(var(--balloon-move)*-1));-ms-transform:translateY(calc(var(--balloon-move)*-1));transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-bottom:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;-webkit-transform:translate(-50%,calc(var(--balloon-move)*-1));-ms-transform:translate(-50%,calc(var(--balloon-move)*-1));transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;-webkit-transform:translate(var(--balloon-move),-50%);-ms-transform:translate(var(--balloon-move),-50%);transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-left:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;-webkit-transform:translate(calc(var(--balloon-move)*-1),-50%);-ms-transform:translate(calc(var(--balloon-move)*-1),-50%);transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-right:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}',""]),e.a=n},function(t,e,r){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))}},function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,(function(e){s(t,e)}),(function(r){n[t]={status:"rejected",reason:r},0==--i&&e(n)}))}n[t]={status:"fulfilled",value:r},0==--i&&e(n)}for(var o=0;o<n.length;o++)s(o,n[o])}))}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(t,e){t.exports='<svg class="lds-eclipse" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M68.095 59.578A20 20 0 0031.14 44.27a22 20-67.5 0136.955 15.308" fill="#fff"><animateTransform attributeName="transform" begin="0s" calcMode="linear" dur="0.8s" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="0 50 51;360 50 51"></animateTransform></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M21.5,1.385,13.918,8.232a.25.25,0,0,1-.418-.185V2.521A1.5,1.5,0,0,0,11,1.385L.505,10.863a1.541,1.541,0,0,0,0,2.273L11,22.614a1.5,1.5,0,0,0,2.5-1.136V15.953a.25.25,0,0,1,.418-.185L21.5,22.614A1.5,1.5,0,0,0,24,21.478V2.521A1.5,1.5,0,0,0,21.5,1.385Z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M23.5,10.865,13,1.384a1.5,1.5,0,0,0-2.5,1.138V8.047a.25.25,0,0,1-.418.186L2.5,1.384A1.5,1.5,0,0,0,0,2.522V21.479a1.5,1.5,0,0,0,2.5,1.136l7.583-6.847a.25.25,0,0,1,.418.186v5.525A1.5,1.5,0,0,0,13,22.615l10.5-9.479A1.539,1.539,0,0,0,23.5,10.865Z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.567 1.258C10.4159 1.34378 8.33932 2.06916 6.60269 3.34139C4.86607 4.61363 3.54834 6.37489 2.818 8.4C2.79854 8.45424 2.76093 8.50009 2.71155 8.5298C2.66217 8.5595 2.60404 8.57123 2.547 8.563L0.858001 8.309C0.765439 8.29713 0.671392 8.31069 0.58595 8.34821C0.500507 8.38574 0.426892 8.44582 0.373001 8.522C0.320143 8.59948 0.290143 8.69027 0.28643 8.78399C0.282716 8.87771 0.305439 8.97058 0.352001 9.052L3.031 13.752C3.06906 13.8186 3.12192 13.8755 3.18549 13.9184C3.24906 13.9612 3.32164 13.9889 3.39762 13.9993C3.4736 14.0096 3.55094 14.0023 3.62366 13.978C3.69638 13.9537 3.76253 13.913 3.817 13.859L7.587 10.113C7.65301 10.0476 7.69952 9.9652 7.72129 9.87489C7.74307 9.78459 7.73926 9.69 7.71029 9.60175C7.68132 9.51349 7.62834 9.43504 7.55728 9.37521C7.48622 9.31538 7.3999 9.27652 7.308 9.263L5.593 9.007C5.5547 9.00143 5.51822 8.98705 5.48643 8.96498C5.45464 8.94292 5.4284 8.91377 5.40979 8.87984C5.39118 8.84591 5.3807 8.80813 5.37917 8.76946C5.37765 8.73079 5.38512 8.69229 5.401 8.657C5.99665 7.30842 6.94242 6.14385 8.14013 5.28421C9.33783 4.42457 10.7438 3.9012 12.2121 3.76843C13.6804 3.63565 15.1574 3.89832 16.4899 4.52916C17.8224 5.16 18.9617 6.13602 19.7896 7.35588C20.6176 8.57574 21.1038 9.99497 21.198 11.4662C21.2922 12.9375 20.9909 14.4071 20.3253 15.7226C19.6597 17.0381 18.6541 18.1514 17.4129 18.947C16.1717 19.7426 14.7402 20.1915 13.267 20.247C12.9355 20.253 12.6199 20.3904 12.3897 20.629C12.1595 20.8677 12.0335 21.188 12.0395 21.5195C12.0455 21.851 12.1829 22.1666 12.4215 22.3968C12.6602 22.627 12.9805 22.753 13.312 22.747H13.359C14.7758 22.7035 16.1699 22.3803 17.4613 21.796C18.7527 21.2117 19.9157 20.3778 20.8836 19.3422C21.8515 18.3067 22.605 17.09 23.1009 15.7622C23.5967 14.4343 23.8251 13.0215 23.7729 11.6051C23.7207 10.1886 23.3889 8.79645 22.7967 7.5087C22.2044 6.22096 21.3633 5.06304 20.3218 4.10158C19.2804 3.14012 18.0591 2.39409 16.7282 1.90642C15.3973 1.41875 13.9831 1.19906 12.567 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.433 1.258C13.5841 1.34378 15.6607 2.06916 17.3973 3.34139C19.1339 4.61363 20.4517 6.37489 21.182 8.4C21.2015 8.45424 21.2391 8.50009 21.2885 8.5298C21.3378 8.5595 21.396 8.57123 21.453 8.563L23.142 8.309C23.2346 8.29713 23.3286 8.31069 23.4141 8.34821C23.4995 8.38574 23.5731 8.44582 23.627 8.522C23.6799 8.59948 23.7099 8.69027 23.7136 8.78399C23.7173 8.87771 23.6946 8.97058 23.648 9.052L20.969 13.752C20.9309 13.8186 20.8781 13.8755 20.8145 13.9184C20.7509 13.9612 20.6784 13.9889 20.6024 13.9993C20.5264 14.0096 20.4491 14.0023 20.3763 13.978C20.3036 13.9537 20.2375 13.913 20.183 13.859L16.413 10.113C16.347 10.0476 16.3005 9.9652 16.2787 9.87489C16.2569 9.78459 16.2607 9.69 16.2897 9.60175C16.3187 9.51349 16.3717 9.43504 16.4427 9.37521C16.5138 9.31538 16.6001 9.27652 16.692 9.263L18.407 9.007C18.4453 9.00143 18.4818 8.98705 18.5136 8.96498C18.5454 8.94292 18.5716 8.91377 18.5902 8.87984C18.6088 8.84591 18.6193 8.80813 18.6208 8.76946C18.6224 8.73079 18.6149 8.69229 18.599 8.657C18.0034 7.30842 17.0576 6.14385 15.8599 5.28421C14.6622 4.42457 13.2562 3.9012 11.7879 3.76843C10.3196 3.63565 8.84257 3.89832 7.51008 4.52916C6.17759 5.16 5.03826 6.13602 4.21035 7.35588C3.38245 8.57574 2.89616 9.99497 2.80198 11.4662C2.70779 12.9375 3.00914 14.4071 3.67474 15.7226C4.34034 17.0381 5.34592 18.1514 6.58709 18.947C7.82826 19.7426 9.25977 20.1915 10.733 20.247C11.0645 20.253 11.3801 20.3904 11.6103 20.629C11.8405 20.8677 11.9665 21.188 11.9605 21.5195C11.9545 21.851 11.8171 22.1666 11.5785 22.3968C11.3398 22.627 11.0195 22.753 10.688 22.747H10.641C9.22425 22.7035 7.83008 22.3803 6.53871 21.796C5.24733 21.2117 4.08425 20.3778 3.11639 19.3422C2.14853 18.3067 1.39498 17.09 0.899117 15.7622C0.403251 14.4343 0.17485 13.0215 0.22706 11.6051C0.27927 10.1886 0.611059 8.79645 1.20333 7.5087C1.79561 6.22096 2.63668 5.06304 3.67815 4.10158C4.71963 3.14012 5.94094 2.39409 7.27183 1.90642C8.60271 1.41875 10.0169 1.19906 11.433 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32"><g fill="#000" clip-path="url(#a)"><path d="M16 2.9 2.59 29.624h26.82L16 2.899zM16 0c.69 0 1.38.465 1.903 1.395l13.659 27.223c1.046 1.86.156 3.382-1.979 3.382H2.417C.283 32-.607 30.478.44 28.617L14.098 1.395C14.62.465 15.31 0 16 0z"></path><path d="M14 25a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm2-4a2 2 0 0 0 2-2v-6a2 2 0 1 0-4 0v6a2 2 0 0 0 2 2z"></path></g><defs><clipPath id="a"><path d="M0 0h32v32H0z" fill="#fff" transform="matrix(-1 0 0 1 32 0)"></path></clipPath></defs></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 13 14"><path d="M11.48 4.541c-.688-.377-1.36-.781-2.04-1.173l-2.28-1.32c-.873-.504-1.753-.997-2.616-1.516-.577-.347-1.178-.556-1.858-.53-.373.015-.384.01-.384.393V10.88c0 .434.17.628.593.708.221.041.412-.045.597-.141.166-.087.321-.192.483-.286l4.62-2.667c.53-.306 1.066-.6 1.589-.917.362-.22.444-.707.197-1.016-.097-.12-.229-.196-.36-.272A3429.1 3429.1 0 0 0 7.176 4.65c-.91-.524-1.823-1.045-2.732-1.572-.134-.078-.198-.07-.197.1.002.324.002.649-.002.973a.255.255 0 0 0 .143.245c.358.201.714.405 1.07.61 1.06.61 2.12 1.22 3.179 1.833.182.105.178.175-.006.282-.871.505-1.743 1.01-2.614 1.517l-2.353 1.366c-.167.097-.215.073-.229-.114-.003-.044-.002-.087-.002-.13V1.805c0-.08-.001-.16.006-.238.022-.257.062-.28.28-.155.948.548 1.893 1.098 2.84 1.645 1.465.846 2.933 1.686 4.395 2.537.355.207.592.526.697.926.21.809-.106 1.521-.842 1.935-.401.225-.798.46-1.197.69a6910.143 6910.143 0 0 1-5.883 3.414c-.42.243-.874.312-1.333.173-.746-.227-1.174-.84-1.174-1.627 0-2.694.002-5.39-.003-8.084 0-.367.027-.719.225-1.039a.422.422 0 0 0 .047-.23c0-.375.001-.749-.001-1.124 0-.068.026-.156-.059-.191-.066-.027-.127.021-.176.06-.368.296-.685.631-.91 1.054C.076 2.052.02 2.598.021 3.144c.009 2.73-.076 5.462.04 8.19.05 1.2.809 2.105 1.898 2.483.283.098.586.207.882.178.522-.05 1.03-.168 1.497-.445.934-.555 1.883-1.086 2.824-1.63 1.39-.801 2.779-1.606 4.17-2.408.48-.277.9-.61 1.182-1.105.77-1.35.311-3.129-1.036-3.866z" fill="#000"></path></svg>'},function(t,e,r){var a=r(5);t.exports=function(t){"use strict";var e="",r=(t=t||{}).options,n=a.$escape,i=t.icons,s=t.video,o=t.tran,l=a.$each;t.$value,t.$index;return e+='<div class="smartplayer-mask"></div>\n<div class="smartplayer-video-wrap">\n    ',r.logo&&r.displays.logo&&(e+='\n    <div class="smartplayer-logo">\n        <img src="',e+=n(r.logo),e+='">\n    </div>\n    '),e+='\n    <div class="smartplayer-subtitle"></div>\n    <div class="smartplayer-bezel">\n        <span class="smartplayer-bezel-icon"></span>\n        <span class="smartplayer-loading-icon">',e+=i.loading,e+="</span>\n    </div>\n</div>\n\n",s.pic&&(e+='\n<div class="smartplayer-image-start smartplayer-opacity-0" style="background-image: url(',e+=n(s.pic),e+=");",s.pic_background&&(e+="background-color: ",e+=n(s.pic_background)),e+='"></div>\n'),e+="\n\n",s.pic_pause&&(e+='\n<div class="smartplayer-image-pause" style="background-image: url(',e+=n(s.pic_pause),e+=");",s.pic_background&&(e+="background-color: ",e+=n(s.pic_background)),e+='"></div>\n'),e+="\n\n",s.pic_finish&&(e+='\n<div class="smartplayer-image-finish" style="background-image: url(',e+=n(s.pic_finish),e+=");",s.pic_background&&(e+="background-color: ",e+=n(s.pic_background)),e+='"></div>\n'),e+='\n\n<div class="smartplayer-controller-mask"></div>\n<div class="smartplayer-controller"',r.fake_bar&&(e+=' style="margin-bottom: ',e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height+43:53),e+='px"'),e+='>\n    <div class="smartplayer-icons smartplayer-icons-left">\n        ',r.displays.play_pause&&(e+='\n        <button class="smartplayer-icon smartplayer-play-icon" aria-label="play">\n            <span class="smartplayer-icon-content">',e+=i.play,e+="</span>\n        </button>\n        "),e+="\n\n        ",r.displays.backward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-rewind-icon" aria-label="rewind">\n                <span class="smartplayer-icon-content">',e+=i.seekRewind,e+="</span>\n            </button>\n        "),e+="\n        ",r.displays.forward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-forward-icon" aria-label="forward">\n                <span class="smartplayer-icon-content">',e+=i.seekForward,e+="</span>\n            </button>\n        "),e+="\n\n        ",r.displays.volume&&(e+='\n        <div class="smartplayer-volume">\n            <button class="smartplayer-icon smartplayer-volume-icon" aria-label="volume">\n                <span class="smartplayer-icon-content">',e+=i.volumeDown,e+="</span>\n            </button>\n\n            ",r.displays.volume_bar&&(e+='\n            <div class="smartplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="smartplayer-volume-bar">\n                    <div class="smartplayer-volume-bar-inner" style="background: ',e+=n(r.theme),e+=';">\n                        <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n                    </div>\n                </div>\n            </div>\n            '),e+="\n        </div>\n        "),e+="\n\n        ",r.displays.time&&(e+='\n        <span class="smartplayer-time">\n            <span class="smartplayer-ptime">0:00</span> /\n            <span class="smartplayer-dtime">0:00</span>\n        </span>\n        '),e+="\n        ",r.live&&(e+='\n        <span class="smartplayer-live-badge"><span class="smartplayer-live-dot" style="background: ',e+=n(r.theme),e+=';"></span>',e+=n(o("Live")),e+="</span>\n        "),e+='\n    </div>\n    <div class="smartplayer-icons smartplayer-icons-right">\n        ',r.video.quality&&(e+='\n        <div class="smartplayer-quality">\n            <button class="smartplayer-icon smartplayer-quality-icon" aria-label="quality">',e+=n(r.video.quality[r.video.defaultQuality].name),e+='</button>\n            <div class="smartplayer-quality-mask">\n                <div class="smartplayer-quality-list">\n                ',l(r.video.quality,(function(t,r){e+='\n                    <div class="smartplayer-quality-item" data-index="',e+=n(r),e+='">',e+=n(t.name),e+="</div>\n                "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n        ",r.screenshot&&(e+='\n        <div class="smartplayer-icon smartplayer-camera-icon" data-balloon="',e+=n(o("Screenshot")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.camera,e+="</span>\n        </div>\n        "),e+="\n        ",r.airplay&&(e+='\n        <div class="smartplayer-icon smartplayer-airplay-icon" data-balloon="',e+=n(o("AirPlay")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.airplay,e+="</span>\n        </div>\n        "),e+="\n        ",r.subtitle&&r.displays.subtitleSettings&&(e+='\n        <div class="smartplayer-subtitle-btn">\n            <button class="smartplayer-icon smartplayer-subtitle-icon" aria-label="subtitle" data-balloon="',e+=n(o("Hide subtitle")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.subtitle,e+="</span>\n            </button>\n        </div>\n        "),e+="\n\n        ",r.displays.settings&&(e+='\n        <div class="smartplayer-setting">\n            <button class="smartplayer-icon smartplayer-setting-icon" aria-label="setting" data-balloon="',e+=n(o("Setting")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.setting,e+='</span>\n            </button>\n            <div class="smartplayer-setting-box">\n                <div class="smartplayer-setting-origin-panel">\n                    <div class="smartplayer-setting-item smartplayer-setting-speed">\n                        <span class="smartplayer-label">',e+=n(o("Speed")),e+='</span>\n                        <div class="smartplayer-toggle">',e+=i.right,e+='</div>\n                    </div>\n                    <div class="smartplayer-setting-item smartplayer-setting-loop">\n                        <span class="smartplayer-label">',e+=n(o("Loop")),e+='</span>\n                        <div class="smartplayer-toggle">\n                            <input class="smartplayer-toggle-setting-input" type="checkbox" name="smartplayer-toggle">\n                            <label for="smartplayer-toggle"></label>\n                        </div>\n                    </div>\n                </div>\n                <div class="smartplayer-setting-speed-panel">\n                    ',l(r.playbackSpeed,(function(t,r){e+='\n                        <div class="smartplayer-setting-speed-item" data-speed="',e+=n(t),e+='">\n                            <span class="smartplayer-label">',e+=n(1===t?o("Normal"):t),e+="</span>\n                        </div>\n                    "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n\n        ",r.displays.fullscreen&&(e+='\n        <div class="smartplayer-full">\n            <button class="smartplayer-icon smartplayer-full-in-icon" aria-label="fullscreen" data-balloon="',e+=n(o("Web full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.fullWeb,e+='</span>\n            </button>\n            <button class="smartplayer-icon smartplayer-full-icon" aria-label="fullscreen" data-balloon="',e+=n(o("Full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.full,e+="</span>\n            </button>\n        </div>\n        "),e+="\n    </div>\n    ",r.displays.seekbar&&(e+='\n    <div class="smartplayer-bar-wrap">\n        ',r.displays.seekbar_time&&(e+='\n        <div class="smartplayer-bar-time smartplayer-hidden">00:00</div>\n        '),e+='\n        <div class="smartplayer-bar-preview"></div>\n        <div class="smartplayer-bar">\n            <div class="smartplayer-loaded" style="width: 0;"></div>\n            <div class="smartplayer-played" style="width: 0; background: ',e+=n(r.theme),e+='">\n                <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n            </div>\n        </div>\n    </div>\n    '),e+='\n</div>\n\n<div class="smartplayer-info-panel smartplayer-info-panel-hide">\n    <div class="smartplayer-info-panel-close">[x]</div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-version">\n        <span class="smartplayer-info-panel-item-title">Player version</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-fps">\n        <span class="smartplayer-info-panel-item-title">Player FPS</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-type">\n        <span class="smartplayer-info-panel-item-title">Video type</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-url">\n        <span class="smartplayer-info-panel-item-title">Video url</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-resolution">\n        <span class="smartplayer-info-panel-item-title">Video resolution</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-duration">\n        <span class="smartplayer-info-panel-item-title">Video duration</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n</div>\n',"smartplay"==r.autoplay&&(e+='\n<div class="smartplayer-smartplay">\n',e+=r.smartplay,e+="\n</div>\n"),e+="\n",r.displays.big_play&&(e+="\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-bigplay {\n    background-color: ",e+=n(r.theme?r.theme:"rgba(0, 0, 0, 0.6)"),e+=';\n}\n</style>\n<button class="smartplayer-bigplay" aria-label="play">\n',e+=i.play,e+="\n</button>\n"),e+='\n<div class="smartplayer-menu">\n    ',l(r.contextmenu,(function(t,r){e+='\n        <div class="smartplayer-menu-item">\n            <a',t.link&&(e+=' target="_blank"'),e+=' href="',e+=n(t.link||"javascript:void(0);"),e+='">',e+=n(o(t.text)),e+="</a>\n        </div>\n    "})),e+='\n</div>\n<div class="smartplayer-notice"></div>\n<button class="smartplayer-mobile-play" aria-label="play">\n    ',e+=i.play,e+="\n</button>\n\n",r.callAction&&r.callAction.length>0&&(e+="\n<style>",l(r.callAction,(function(t,r){e+="\n",!t.colors||null!=t.type&&"inner_button"!=t.type||(e+="#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link {background-color: ",e+=n(t.colors.background),e+=";color:",e+=n(t.colors.text),e+=";}\n#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link:hover {background-color: ",e+=n(t.colors.background_hover),e+=";color:",e+=n(t.colors.text_hover),e+=";}"),e+="\n"})),e+="</style>\n",l(r.callAction,(function(t,r){e+="\n  ",null!=t.type&&"inner_button"!=t.type||(e+='\n    <div class="smartplayer-call-action smartplayer-hide smartplayer-call-action__',e+=n(t.position),e+=" ",e+=n(t.id),e+='" id="',e+=n(t.id),e+='">\n        <a href="',e+=n(t.link),e+='" target="_parent" class="smartplayer-call-action--link" title="',e+=n(t.btnText),e+='">\n            ',e+=n(t.btnText),e+="\n        </a>\n    </div>\n  "),e+="\n"})),e+="\n"),e+='\n\n<div class="smartplayer-offline-content">\n  <div class="smartplayer-offline-content__box">\n    <span class="smartplayer-offline-content__icon">',e+=i.warning,e+='</span><span class="smartplayer-offline-content__text">Identificamos um problema de conexão!</span>\n  </div>\n</div>\n\n',r.fake_bar&&(e+='\n<div class="smartplayer-fake-bar"></div>\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar {\n  background-color: ',e+=n(r.theme?r.theme:"rgba(0, 0, 0, 0.6)"),e+=";\n  height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;\n}\n</style>\n"),e+="\n\n",r.resume&&(e+='\n<div class="smartplayer-resume" style="display:none;">\n    <style>\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume {\n        background-color: ',e+=n(r.resume_options&&r.resume_options.background_color?r.resume_options.background_color:"rgba(0, 0, 0, 0.6)"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__title,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div span {\n        color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon {\n        border-color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg * {\n        fill: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color+" !important":"#FFFFFF !important"),e+=';\n    }\n    </style>\n    <div class="smartplayer-resume__content">\n      <div class="smartplayer-resume__title">\n        ',e+=n(r.resume_options&&r.resume_options.title?r.resume_options.title:"Você já começou a assistir isso"),e+='\n      </div>\n      <div class="smartplayer-resume__actions">\n        <div class="smartplayer-resume__play">\n          <span class="smartplayer-resume__icon">',e+=i.play,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.play?r.resume_options.play:"Continuar assistindo"),e+='</span>\n        </div>\n        <div class="smartplayer-resume__rewind">\n          <span class="smartplayer-resume__icon">',e+=i.synchronizeRewind,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.replay?r.resume_options.replay:"Assistir do início"),e+="</span>\n        </div>\n      </div>\n    </div>\n</div>\n"),e+="\n"}},function(t){t.exports=JSON.parse('{"a":"0.2.1"}')},function(t,e,r){(function(r){var a,n,i,s,o;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){return function t(e,r,a){function n(o,l){if(!r[o]){if(!e[o]){if(!l&&"function"==typeof s&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};e[o][0].call(u.exports,(function(t){var r=e[o][1][t];return n(r||t)}),u,u.exports,t,e,r,a)}return r[o].exports}for(var i="function"==typeof s&&s,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(t,e,a){(function(t){"use strict";var r,a,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var i=0,s=new n(u),o=t.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,r=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;a=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}a=!1}e.exports=function(t){1!==c.push(t)||a||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var a=t(1);function n(){}var i={},s=["REJECTED"],o=["FULFILLED"],c=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==n&&p(this,t)}function d(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(t,e,r){a((function(){var a;try{a=e(r)}catch(e){return i.reject(t,e)}a===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,a)}))}function f(t){var e=t&&t.then;if(t&&("object"===l(t)||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function a(e){r||(r=!0,i.reject(t,e))}function n(e){r||(r=!0,i.resolve(t,e))}var s=m((function(){e(n,a)}));"error"===s.status&&a(s.value)}function m(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(n);return this.state!==c?h(r,this.state===o?t:e,this.outcome):this.queue.push(new d(r,t,e)),r},d.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){i.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=m(f,e);if("error"===r.status)return i.reject(t,r.value);var a=r.value;if(a)p(t,a);else{t.state=o,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},i.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(n),t)},u.reject=function(t){var e=new this(n);return i.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,a=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,l=-1,c=new this(n);++l<r;)u(t[l],l);return c;function u(t,n){e.resolve(t).then((function(t){s[n]=t,++o!==r||a||(a=!0,i.resolve(c,s))}),(function(t){a||(a=!0,i.reject(c,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,a=!1;if(!r)return this.resolve([]);for(var s,o=-1,l=new this(n);++o<r;)s=t[o],e.resolve(s).then((function(t){a||(a=!0,i.resolve(l,t))}),(function(t){a||(a=!0,i.reject(l,t))}));return l}},{1:1}],3:[function(t,e,a){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var a="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":l(t)},n=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<t.length;a+=1)r.append(t[a]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var s=Promise;function o(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function c(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,p={},m=Object.prototype.toString,y="readonly",v="readwrite";function g(t){return"boolean"==typeof f?s.resolve(f):function(t){return new s((function(e){var r=t.transaction(h,v),a=i([""]);r.objectStore(h).put(a,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return f=t}))}function b(t){var e=p[t.name],r={};r.promise=new s((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function w(t){var e=p[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function k(t,e){var r=p[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function T(t,e){return new s((function(r,a){if(p[t.name]=p[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return r(t.db);b(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var s=n.open.apply(n,i);e&&(s.onupgradeneeded=function(e){var r=s.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(h)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(t){t.preventDefault(),a(s.error)},s.onsuccess=function(){var e=s.result;e.onversionchange=function(t){t.target.close()},r(e),w(t)}}))}function E(t){return T(t,!1)}function x(t){return T(t,!0)}function S(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),a=t.version<t.db.version,n=t.version>t.db.version;if(a&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),n||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function L(t){return i([function(t){for(var e=t.length,r=new ArrayBuffer(e),a=new Uint8Array(r),n=0;n<e;n++)a[n]=t.charCodeAt(n);return r}(atob(t.data))],{type:t.type})}function _(t){return t&&t.__local_forage_encoded_blob}function A(t){var e=this,r=e._initReady().then((function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(r,t,t),r}function R(t,e,r,a){void 0===a&&(a=1);try{var n=t.db.transaction(t.storeName,e);r(null,n)}catch(n){if(a>0&&(!t.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return s.resolve().then((function(){if(!t.db||"NotFoundError"===n.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),x(t)})).then((function(){return function(t){b(t);for(var e=p[t.name],r=e.forages,a=0;a<r.length;a++){var n=r[a];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return t.db=null,E(t).then((function(e){return t.db=e,S(t)?x(t):e})).then((function(a){t.db=e.db=a;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=a})).catch((function(e){throw k(t,e),e}))}(t).then((function(){R(t,e,r,a-1)}))})).catch(r);r(n)}}var D={_driver:"asyncStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var a in t)r[a]=t[a];var n=p[r.name];n||(n={forages:[],db:null,dbReady:null,deferredOperations:[]},p[r.name]=n),n.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=A);var i=[];function o(){return s.resolve()}for(var l=0;l<n.forages.length;l++){var c=n.forages[l];c!==e&&i.push(c._initReady().catch(o))}var u=n.forages.slice(0);return s.all(i).then((function(){return r.db=n.db,E(r)})).then((function(t){return r.db=t,S(r,e._defaultConfig.version)?x(r):t})).then((function(t){r.db=n.db=t,e._dbInfo=r;for(var a=0;a<u.length;a++){var i=u[a];i!==e&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!n||!n.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var r=this,a=new s((function(e,a){r.ready().then((function(){R(r._dbInfo,y,(function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),o=1;s.onsuccess=function(){var r=s.result;if(r){var a=r.value;_(a)&&(a=L(a));var n=t(a,r.key,o++);void 0!==n?e(n):r.continue()}else e()},s.onerror=function(){a(s.error)}}catch(t){a(t)}}))})).catch(a)}));return o(a,e),a},getItem:function(t,e){var r=this;t=u(t);var a=new s((function(e,a){r.ready().then((function(){R(r._dbInfo,y,(function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),_(t)&&(t=L(t)),e(t)},s.onerror=function(){a(s.error)}}catch(t){a(t)}}))})).catch(a)}));return o(a,e),a},setItem:function(t,e,r){var a=this;t=u(t);var n=new s((function(r,n){var i;a.ready().then((function(){return i=a._dbInfo,"[object Blob]"===m.call(e)?g(i.db).then((function(t){return t?e:(r=e,new s((function(t,e){var a=new FileReader;a.onerror=e,a.onloadend=function(e){var a=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:a,type:r.type})},a.readAsBinaryString(r)})));var r})):e})).then((function(e){R(a._dbInfo,v,(function(i,s){if(i)return n(i);try{var o=s.objectStore(a._dbInfo.storeName);null===e&&(e=void 0);var l=o.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),r(e)},s.onabort=s.onerror=function(){var t=l.error?l.error:l.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return o(n,r),n},removeItem:function(t,e){var r=this;t=u(t);var a=new s((function(e,a){r.ready().then((function(){R(r._dbInfo,v,(function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){a(s.error)},i.onabort=function(){var t=s.error?s.error:s.transaction.error;a(t)}}catch(t){a(t)}}))})).catch(a)}));return o(a,e),a},clear:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){R(e._dbInfo,v,(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).clear();n.oncomplete=function(){t()},n.onabort=n.onerror=function(){var t=i.error?i.error:i.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return o(r,t),r},length:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){R(e._dbInfo,y,(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return o(r,t),r},key:function(t,e){var r=this,a=new s((function(e,a){t<0?e(null):r.ready().then((function(){R(r._dbInfo,y,(function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName),o=!1,l=s.openKeyCursor();l.onsuccess=function(){var r=l.result;r?0===t?e(r.key):o?e(r.key):(o=!0,r.advance(t)):e(null)},l.onerror=function(){a(l.error)}}catch(t){a(t)}}))})).catch(a)}));return o(a,e),a},keys:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){R(e._dbInfo,y,(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var e=i.result;e?(s.push(e.key),e.continue()):t(s)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return o(r,t),r},dropInstance:function(t,e){e=d.apply(this,arguments);var r,a=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||a.name,t.storeName=t.storeName||a.storeName),t.name){var i=t.name===a.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):E(t).then((function(e){var r=p[t.name],a=r.forages;r.db=e;for(var n=0;n<a.length;n++)a[n]._dbInfo.db=e;return e}));r=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;b(t);var a=p[t.name],i=a.forages;e.close();for(var o=0;o<i.length;o++){var l=i[o];l._dbInfo.db=null,l._dbInfo.version=r}return new s((function(e,a){var i=n.open(t.name,r);i.onerror=function(t){i.result.close(),a(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){a.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,w(r._dbInfo)}})).catch((function(e){throw(k(t,e)||s.resolve()).catch((function(){})),e}))}})):i.then((function(e){b(t);var r=p[t.name],a=r.forages;e.close();for(var i=0;i<a.length;i++)a[i]._dbInfo.db=null;return new s((function(e,r){var a=n.deleteDatabase(t.name);a.onerror=function(){var t=a.result;t&&t.close(),r(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},a.onsuccess=function(){var t=a.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<a.length;e++)w(a[e]._dbInfo)})).catch((function(e){throw(k(t,e)||s.resolve()).catch((function(){})),e}))}))}else r=s.reject("Invalid arguments");return o(r,e),r}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="~~local_forage_type~",O=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",M=P.length,F="arbf",B="blob",N="si08",U="ui08",j="uic8",G="si16",z="si32",Y="ur16",q="ui32",H="fl32",K="fl64",V=M+F.length,W=Object.prototype.toString;function X(t){var e,r,a,n,i,s=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(e=0;e<o;e+=4)r=C.indexOf(t[e]),a=C.indexOf(t[e+1]),n=C.indexOf(t[e+2]),i=C.indexOf(t[e+3]),u[l++]=r<<2|a>>4,u[l++]=(15&a)<<4|n>>2,u[l++]=(3&n)<<6|63&i;return c}function Q(t){var e,r=new Uint8Array(t),a="";for(e=0;e<r.length;e+=3)a+=C[r[e]>>2],a+=C[(3&r[e])<<4|r[e+1]>>4],a+=C[(15&r[e+1])<<2|r[e+2]>>6],a+=C[63&r[e+2]];return r.length%3==2?a=a.substring(0,a.length-1)+"=":r.length%3==1&&(a=a.substring(0,a.length-2)+"=="),a}var $={serialize:function(t,e){var r="";if(t&&(r=W.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===W.call(t.buffer))){var a,n=P;t instanceof ArrayBuffer?(a=t,n+=F):(a=t.buffer,"[object Int8Array]"===r?n+=N:"[object Uint8Array]"===r?n+=U:"[object Uint8ClampedArray]"===r?n+=j:"[object Int16Array]"===r?n+=G:"[object Uint16Array]"===r?n+=Y:"[object Int32Array]"===r?n+=z:"[object Uint32Array]"===r?n+=q:"[object Float32Array]"===r?n+=H:"[object Float64Array]"===r?n+=K:e(new Error("Failed to get type for BinaryArray"))),e(n+Q(a))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=I+t.type+"~"+Q(this.result);e(P+B+r)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}},deserialize:function(t){if(t.substring(0,M)!==P)return JSON.parse(t);var e,r=t.substring(V),a=t.substring(M,V);if(a===B&&O.test(r)){var n=r.match(O);e=n[1],r=r.substring(n[0].length)}var s=X(r);switch(a){case F:return s;case B:return i([s],{type:e});case N:return new Int8Array(s);case U:return new Uint8Array(s);case j:return new Uint8ClampedArray(s);case G:return new Int16Array(s);case Y:return new Uint16Array(s);case z:return new Int32Array(s);case q:return new Uint32Array(s);case H:return new Float32Array(s);case K:return new Float64Array(s);default:throw new Error("Unkown type: "+a)}},stringToBuffer:X,bufferToString:Q};function J(t,e,r,a){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,a)}function Z(t,e,r,a,n,i){t.executeSql(r,a,n,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,o){o.rows.length?i(t,s):J(t,e,(function(){t.executeSql(r,a,n,i)}),i)}),i):i(t,s)}),i)}function tt(t,e,r,a){var n=this;t=u(t);var i=new s((function(i,s){n.ready().then((function(){void 0===e&&(e=null);var o=e,l=n._dbInfo;l.serializer.serialize(e,(function(e,c){c?s(c):l.db.transaction((function(r){Z(r,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(o)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(a>0)return void i(tt.apply(n,[t,o,r,a-1]));s(e)}}))}))})).catch(s)}));return o(i,r),i}var et={_driver:"webSQLStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var a in t)r[a]="string"!=typeof t[a]?t[a].toString():t[a];var n=new s((function(t,a){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return a(t)}r.db.transaction((function(n){J(n,r,(function(){e._dbInfo=r,t()}),(function(t,e){a(e)}))}),a)}));return r.serializer=$,n},_support:"function"==typeof openDatabase,iterate:function(t,e){var r=this,a=new s((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Z(r,n,"SELECT * FROM "+n.storeName,[],(function(r,a){for(var i=a.rows,s=i.length,o=0;o<s;o++){var l=i.item(o),c=l.value;if(c&&(c=n.serializer.deserialize(c)),void 0!==(c=t(c,l.key,o+1)))return void e(c)}e()}),(function(t,e){a(e)}))}))})).catch(a)}));return o(a,e),a},getItem:function(t,e){var r=this;t=u(t);var a=new s((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Z(r,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var a=r.rows.length?r.rows.item(0).value:null;a&&(a=n.serializer.deserialize(a)),e(a)}),(function(t,e){a(e)}))}))})).catch(a)}));return o(a,e),a},setItem:function(t,e,r){return tt.apply(this,[t,e,r,1])},removeItem:function(t,e){var r=this;t=u(t);var a=new s((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Z(r,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){a(e)}))}))})).catch(a)}));return o(a,e),a},clear:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){Z(e,a,"DELETE FROM "+a.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return o(r,t),r},length:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){Z(e,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],(function(e,r){var a=r.rows.item(0).c;t(a)}),(function(t,e){r(e)}))}))})).catch(r)}));return o(r,t),r},key:function(t,e){var r=this,a=new s((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Z(r,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var a=r.rows.length?r.rows.item(0).key:null;e(a)}),(function(t,e){a(e)}))}))})).catch(a)}));return o(a,e),a},keys:function(t){var e=this,r=new s((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){Z(e,a,"SELECT key FROM "+a.storeName,[],(function(e,r){for(var a=[],n=0;n<r.rows.length;n++)a.push(r.rows.item(n).key);t(a)}),(function(t,e){r(e)}))}))})).catch(r)}));return o(r,t),r},dropInstance:function(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var a,n=this;return o(a=t.name?new s((function(e){var a;a=t.name===r.name?n._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:a,storeNames:[t.storeName]}):e(function(t){return new s((function(e,r){t.transaction((function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,a){for(var n=[],i=0;i<a.rows.length;i++)n.push(a.rows.item(i).name);e({db:t,storeNames:n})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}(a))})).then((function(t){return new s((function(e,r){t.db.transaction((function(a){function n(t){return new s((function(e,r){a.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var i=[],o=0,l=t.storeNames.length;o<l;o++)i.push(n(t.storeNames[o]));s.all(i).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):s.reject("Invalid arguments"),e),a}};function rt(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function at(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var nt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return e.keyPrefix=rt(t,this._defaultConfig),at()?(this._dbInfo=e,e.serializer=$,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var r=this,a=r.ready().then((function(){for(var e=r._dbInfo,a=e.keyPrefix,n=a.length,i=localStorage.length,s=1,o=0;o<i;o++){var l=localStorage.key(o);if(0===l.indexOf(a)){var c=localStorage.getItem(l);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,l.substring(n),s++)))return c}}}));return o(a,e),a},getItem:function(t,e){var r=this;t=u(t);var a=r.ready().then((function(){var e=r._dbInfo,a=localStorage.getItem(e.keyPrefix+t);return a&&(a=e.serializer.deserialize(a)),a}));return o(a,e),a},setItem:function(t,e,r){var a=this;t=u(t);var n=a.ready().then((function(){void 0===e&&(e=null);var r=e;return new s((function(n,i){var s=a._dbInfo;s.serializer.serialize(e,(function(e,a){if(a)i(a);else try{localStorage.setItem(s.keyPrefix+t,e),n(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))}));return o(n,r),n},removeItem:function(t,e){var r=this;t=u(t);var a=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return o(a,e),a},clear:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var a=localStorage.key(r);0===a.indexOf(t)&&localStorage.removeItem(a)}}));return o(r,t),r},length:function(t){var e=this.keys().then((function(t){return t.length}));return o(e,t),e},key:function(t,e){var r=this,a=r.ready().then((function(){var e,a=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(a.keyPrefix.length)),e}));return o(a,e),a},keys:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,a=[],n=0;n<r;n++){var i=localStorage.key(n);0===i.indexOf(t.keyPrefix)&&a.push(i.substring(t.keyPrefix.length))}return a}));return o(r,t),r},dropInstance:function(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var a,n=this;return o(a=t.name?new s((function(e){t.storeName?e(rt(t,n._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):s.reject("Invalid arguments"),e),a}},it=function(t,e){for(var r,a,n=t.length,i=0;i<n;){if((r=t[i])===(a=e)||"number"==typeof r&&"number"==typeof a&&isNaN(r)&&isNaN(a))return!0;i++}return!1},st=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ot={},lt={},ct={INDEXEDDB:D,WEBSQL:et,LOCALSTORAGE:nt},ut=[ct.INDEXEDDB._driver,ct.WEBSQL._driver,ct.LOCALSTORAGE._driver],dt=["dropInstance"],ht=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(dt),ft={description:"",driver:ut.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pt(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function mt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(st(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var yt=new(function(){function t(e){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct)if(ct.hasOwnProperty(r)){var a=ct[r],n=a._driver;this[r]=n,ot[n]||this.defineDriver(a)}this._defaultConfig=mt({},ft),this._config=mt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":a(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var a=new s((function(e,r){try{var a=t._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(n);for(var i=ht.concat("_initStorage"),l=0,c=i.length;l<c;l++){var u=i[l];if((!it(dt,u)||t[u])&&"function"!=typeof t[u])return void r(n)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=s.reject(e);return o(r,arguments[arguments.length-1]),r}},r=0,a=dt.length;r<a;r++){var n=dt[r];t[n]||(t[n]=e(n))}}();var d=function(r){ot[a]&&console.info("Redefining LocalForage driver: "+a),ot[a]=t,lt[a]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(d,r):d(!!t._support):d(!0)}catch(t){r(t)}}));return c(a,e,r),a},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var a=ot[t]?s.resolve(ot[t]):s.reject(new Error("Driver not found."));return c(a,e,r),a},t.prototype.getSerializer=function(t){var e=s.resolve($);return c(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return c(r,t,t),r},t.prototype.setDriver=function(t,e,r){var a=this;st(t)||(t=[t]);var n=this._getSupportedDrivers(t);function i(){a._config.driver=a.driver()}function o(t){return a._extend(t),i(),a._ready=a._initStorage(a._config),a._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=l.then((function(){var t=n[0];return a._dbInfo=null,a._ready=null,a.getDriver(t).then((function(t){a._driver=t._driver,i(),a._wrapLibraryMethodsWithReady(),a._initDriver=function(t){return function(){var e=0;return function r(){for(;e<t.length;){var n=t[e];return e++,a._dbInfo=null,a._ready=null,a.getDriver(n).then(o).catch(r)}i();var l=new Error("No available storage method found.");return a._driverSet=s.reject(l),a._driverSet}()}}(n)}))})).catch((function(){i();var t=new Error("No available storage method found.");return a._driverSet=s.reject(t),a._driverSet})),c(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!lt[t]},t.prototype._extend=function(t){mt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var n=t[r];this.supports(n)&&e.push(n)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ht.length;t<e;t++)pt(this,ht[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=yt},{3:3}]},{},[4])(4)},"object"===l(e)&&void 0!==t?t.exports=o():(n=[],void 0===(i="function"==typeof(a=o)?a.apply(e,n):a)||(t.exports=i))}).call(this,r(4))},function(t,e,r){var a=r(5);t.exports=function(t){"use strict";var e="",r=(t=t||{}).enableSubtitle,n=t.subtitle,i=t.current,s=t.autoplay,o=t.volume,l=t.airplay,c=t.screenshot,u=t.preload,d=a.$escape;r=n&&"webvtt"===n.type;return e+='\n<video\n    class="smartplayer-video ',i&&(e+="smartplayer-video-current"),e+='"\n    ',s&&(e+="autoplay"),e+="\n    ",o<=0&&(e+="muted"),e+="\n    playsinline\n    ",l&&(e+=' x-webkit-airplay="allow" '),e+="\n    ",(c||r)&&(e+='crossorigin="anonymous"'),e+="\n    ",u&&(e+='preload="',e+=d(u),e+='"'),e+="\n    >\n    ",r&&(e+='\n    <track kind="metadata" default src="',e+=d(n.url),e+='"></track>\n    '),e+="\n</video>\n"}},function(t,e,r){var a=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(50),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var a,n,i,s,o,l=1,c={},u=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},a=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,a=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):a=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),a=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return c[l]=n,a(l),l++},h.clearImmediate=f}function f(t){delete c[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(r,a)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(4),r(7))},function(t,e,r){"use strict";(function(e){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},a=Object.create(r),n=/["&'<>]/;a.$escape=function(t){return function(t){var e=""+t,r=n.exec(e);if(!r)return t;var a="",i=void 0,s=void 0,o=void 0;for(i=r.index,s=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}s!==i&&(a+=e.substring(s,i)),s=i+1,a+=o}return s!==i?a+e.substring(s,i):a}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},a.$each=function(t,e){if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)e(t[r],r);else for(var n in t)e(t[n],n)},t.exports=a}).call(this,r(4))},function(t,e,r){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){"use strict";var r,a=Object.prototype,n=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r,a){var n=e&&e.prototype instanceof y?e:y,i=Object.create(n.prototype),s=new A(a||[]);return i._invoke=function(t,e,r){var a=d;return function(n,i){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw i;return D()}for(r.method=n,r.arg=i;;){var s=r.delegate;if(s){var o=S(s,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var l=u(t,e,r);if("normal"===l.type){if(a=r.done?p:h,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}(t,r,s),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function y(){}function v(){}function g(){}var b={};b[s]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(R([])));k&&k!==a&&n.call(k,s)&&(b=k);var T=g.prototype=y.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function x(t){var r;this._invoke=function(a,i){function s(){return new Promise((function(r,s){!function r(a,i,s,o){var l=u(t[a],t,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===e(d)&&n.call(d,"__await")?Promise.resolve(d.__await).then((function(t){r("next",t,s,o)}),(function(t){r("throw",t,s,o)})):Promise.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,o)}))}o(l.arg)}(a,i,r,s)}))}return r=r?r.then(s,s):s()}}function S(t,e){var a=t.iterator[e.method];if(a===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=u(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function R(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:D}}function D(){return{value:r,done:!0}}return v.prototype=T.constructor=g,g.constructor=v,g[l]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},E(x.prototype),x.prototype[o]=function(){return this},t.AsyncIterator=x,t.async=function(e,r,a,n){var i=new x(c(e,r,a,n));return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(T),T[l]="Generator",T[s]=function(){return this},T.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(a,n){return o.type="throw",o.arg=t,e.next=a,n&&(e.method="next",e.arg=r),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;_(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:R(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=r),m}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}).call(this,r(53)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){var a=r(55),n=r(56),i=n;i.v1=a,i.v4=n,t.exports=i},function(t,e,r){var a,n,i=r(8),s=r(9),o=0,l=0;t.exports=function(t,e,r){var c=e&&r||0,u=e||[],d=(t=t||{}).node||a,h=void 0!==t.clockseq?t.clockseq:n;if(null==d||null==h){var f=i();null==d&&(d=a=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=n=16383&(f[6]<<8|f[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:l+1,y=p-o+(m-l)/1e4;if(y<0&&void 0===t.clockseq&&(h=h+1&16383),(y<0||p>o)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=p,l=m,n=h;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var g=p/4294967296*1e4&268435455;u[c++]=g>>>8&255,u[c++]=255&g,u[c++]=g>>>24&15|16,u[c++]=g>>>16&255,u[c++]=h>>>8|128,u[c++]=255&h;for(var b=0;b<6;++b)u[c+b]=d[b];return e||s(u)}},function(t,e,r){var a=r(8),n=r(9);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var o=0;o<16;++o)e[i+o]=s[o];return e||n(s)}},function(t,e,r){t.exports=r(58)},function(t,e,r){"use strict";var a=r(0),n=r(10),i=r(59),s=r(16);function o(t){var e=new i(t),r=n(i.prototype.request,e);return a.extend(r,i.prototype,e),a.extend(r,e),r}var l=o(r(13));l.Axios=i,l.create=function(t){return o(s(l.defaults,t))},l.Cancel=r(17),l.CancelToken=r(72),l.isCancel=r(12),l.all=function(t){return Promise.all(t)},l.spread=r(73),t.exports=l,t.exports.default=l},function(t,e,r){"use strict";var a=r(0),n=r(11),i=r(60),s=r(61),o=r(16);function l(t){this.defaults=t,this.interceptors={request:new i,response:new i}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},l.prototype.getUri=function(t){return t=o(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,r){return this.request(o(r||{},{method:t,url:e,data:(r||{}).data}))}})),a.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,r,a){return this.request(o(a||{},{method:t,url:e,data:r}))}})),t.exports=l},function(t,e,r){"use strict";var a=r(0);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){a.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,r){"use strict";var a=r(0),n=r(62),i=r(12),s=r(13);function o(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return o(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=a.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),a.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return o(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(o(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e,r){return a.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){a.forEach(t,(function(r,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[a])}))}},function(t,e,r){"use strict";var a=r(15);t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(a("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,a,n){return t.config=e,r&&(t.code=r),t.request=a,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?{write:function(t,e,r,n,i,s){var o=[];o.push(t+"="+encodeURIComponent(e)),a.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),a.isString(n)&&o.push("path="+n),a.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var a=r(68),n=r(69);t.exports=function(t,e){return t&&!a(e)?n(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var a=r(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,s={};return t?(a.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=a.trim(t.substr(0,i)).toLowerCase(),r=a.trim(t.substr(i+1)),e){if(s[e]&&n.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var a=t;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=a.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var a=r(17);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new a(t),e(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";r.r(e);var a=r(18),n=r.n(a),i=r(6),s={insert:"head",singleton:!1},o=(n()(i.a,s),i.a.locals,r(1));function l(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=u({},window.innerWidth<600?{maxBufferSize:5e6,maxBufferLength:16,maxMaxBufferLength:16,startLevel:0}:{maxBufferSize:1e7,maxBufferLength:32,maxMaxBufferLength:32,startLevel:0}),f=function(){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=null,this.video=e,this.player=r,this.options=u(u({},h),a),this.resolutions=[],this.optionsSmartAutoPlay=u(u({},this.options),{},{maxBufferLength:8,maxMaxBufferLength:8}),window.Hls.isSupported()?this.init():this.video.src=this.player.options.video.url}var e,r,a;return e=t,(r=[{key:"getLevelfromVideoWidth",value:function(){var t=this.player.container.getBoundingClientRect().width;return this.resolutions.map((function(e,r){var a=e.width,n=parseFloat(t)/parseFloat(a);return[e,n>=1?n-1:-1*(n-1),r,a,t,n]})).sort((function(t,e){return t[1]-e[1]}))[0][2]}},{key:"init",value:function(){var t=this;"smartplay"===this.player.options.autoplay?(this.hls=new window.Hls(this.optionsSmartAutoPlay),this.player.on("smartplay_play",(function(){t.hls.config.maxBufferLength=t.options.maxBufferLength,t.hls.config.maxMaxBufferLength=t.options.maxMaxBufferLength}))):this.hls=new window.Hls(this.options),this.player.plugins.hls=this.hls,this.player.on("online",(function(){t.hls.startLoad()})),this.player.on("destroy",(function(){t.hls.destroy(),delete t.player.plugins.hls})),this.hls.on(window.Hls.Events.MANIFEST_PARSED,(function(e,r){var a=r.levels;t.resolutions=a;var n=t.getLevelfromVideoWidth();t.hls.autoLevelCapping=n})),this.hls.loadSource(this.player.options.video.url),this.hls.attachMedia(this.video)}}])&&l(e.prototype,r),a&&l(e,a),t}(),p=/mobile/i.test(window.navigator.userAgent),m=0,y={secondToTime:function(t){if(0===(t=t||0)||t===1/0||"NaN"===t.toString())return"00:00";var e=Math.floor(t/3600),r=Math.floor((t-3600*e)/60),a=Math.floor(t-3600*e-60*r);return(e>0?[e,r,a]:[r,a]).map((function(t){return t<10?"0"+t:""+t})).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,r=t.offsetParent,a=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==r&&r!==t;)e+=r.offsetLeft,r=r.offsetParent;else for(;null!==r;)e+=r.offsetLeft,r=r.offsetParent;return e-a},getBoundingClientRectViewLeft:function(t){var e=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(t.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var r=document.createElement("div");r.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(r),this.getBoundingClientRectViewLeft.offset=-r.getBoundingClientRect().top-e,document.body.removeChild(r),r=null}var a=t.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return a.left+n}return this.getElementViewLeft(t)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(t){var e=t.left,r=void 0===e?0:e,a=t.top,n=void 0===a?0:a;this.isFirefox?(document.documentElement.scrollLeft=r,document.documentElement.scrollTop=n):window.scrollTo(r,n)},isMobile:p,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},nameMap:{dragStart:p?"touchstart":"mousedown",dragMove:p?"touchmove":"mousemove",dragEnd:p?"touchend":"mouseup"},uniqID:function(){return"uid_".concat(Math.floor(Math.random()*Date.now()),"_").concat(++m)},color2Number:function(t){return"#"===t[0]&&(t=t.substr(1)),3===t.length&&(t="".concat(t[0]).concat(t[0]).concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2])),parseInt(t,16)+0&16777215},number2Color:function(t){return"#"+("00000"+t.toString(16)).slice(-6)},number2Type:function(t){switch(t){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}},checkLocalStorage:function(){try{if(localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test"))return localStorage.removeItem("feature_test"),!0}catch(t){return!1}return!1},cookieSet:function(t,e,r){t=["".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))],r&&("expiry"in r&&("number"==typeof r.expiry&&(r.expiry=new Date(1e3*r.expiry+ +new Date)),t.push("expires=".concat(r.expiry.toGMTString()))),"domain"in r&&t.push("domain=".concat(r.domain)),"path"in r&&t.push("path=".concat(r.path)),"secure"in r&&r.secure&&t.push("secure")),document.cookie=t.join("; ")},cookieGet:function(t,e){for(var r=[],a=document.cookie.split(/; */),n=0;n<a.length;n++){var i=a[n].split("=");i[0]==encodeURIComponent(t)&&r.push(decodeURIComponent(i[1].replace(/\+/g,"%20")))}return e?r:r[0]},cookieRemove:function(t,e){e||(e={}),e.expiry=-86400,this.set(t,"",e)},insertAfter:function(t,e){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)}},v=function(t){var e={id:location.host+location.pathname,container:t.element||document.getElementsByClassName("smartplay")[0],preview:!1,live:!1,autoplay:!0,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!1,hotkey:!0,preload:"metadata",volume:1,seekTime:10,playbackSpeed:[.5,.75,1,1.25,1.5,2],video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},dash:{}},displays:{},callAction:[],resume:!1,smartplay_options:{},fake_bar:!1,fake_bar_options:{}},r={volume:!0,volumeIcon:!0,volumeBar:!0,seekButton:!0,logo:!0,controlBar:!0,play:!0,fakebar:!1};for(var a in void 0===t.fake_bar&&t.displays&&t.displays.fakebar&&(t.fake_bar=t.displays.fakebar),e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=e[a]);for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&!Object.prototype.hasOwnProperty.call(t.displays,n)&&(t.displays[n]=r[n]);return t.video&&!t.video.type&&(t.video.type="m3u8"),t.subtitle&&(!t.subtitle.type&&(t.subtitle.type="webvtt"),!t.subtitle.fontSize&&(t.subtitle.fontSize="20px"),!t.subtitle.bottom&&(t.subtitle.bottom="40px"),!t.subtitle.color&&(t.subtitle.color="#fff")),t.video.quality&&(t.video.url=t.video.quality[t.video.defaultQuality].url),t.lang&&(t.lang=t.lang.toLowerCase()),t.contextmenu=t.contextmenu.concat([{text:"Conheça o VTurb",link:"https://vturb.com.br/?via=player"}]),"smartplay"!==t.autoplay||""!==t.smartplay&&t.smartplay||(t.smartplay="<style>#smartplayer#smartplayer#smartplayer .smartplay-wrapper {border-radius: 10px;background-color: ".concat(t.smartplay_options.background_color||"rgba(9, 0 , 46, 0.75)",";border: 2px solid ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",";width: 80%;height: auto;top: 50%;left: 50%;padding: 0.5em;max-width: 400px;text-align: center;position: absolute;-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);}#smartplayer#smartplayer#smartplayer .smartplay-span {font-family: Arial,Helvetica,sans-serif;font-size: 24px;font-weight: 700;display: block;text-align: center;color: ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",';white-space: normal;width: 100%;line-height: 1.1em;padding: 0.5em 0;-webkit-box-sizing: border-box;box-sizing: border-box;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 36%;height: auto;}@media (max-width: 680px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 20px;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 30%;}}@media (max-width: 380px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 16px;line-height: 1em;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 25%;}}</style><div class="smartplay-wrapper"><span class="smartplay-span">').concat(t.smartplay_options.top_text||"Seu vídeo já começou",'</span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="46.75px" height="32.563px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"><style>@-webkit-keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}@keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}#smartplayer#smartplayer#smartplayer .blink_1 {-webkit-animation: BLINK 2s infinite;animation: BLINK 2s infinite;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_2 {-webkit-animation: BLINK 2s infinite .3s;animation: BLINK 2s infinite .3s;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_3 {-webkit-animation: BLINK 2s infinite .6s;animation: BLINK 2s infinite .6s;opacity: 0;}#smartplayer#smartplayer#smartplayer .smartplay-svg-color {fill: ').concat(t.smartplay_options.foreground_color||"#FFFFFF",' !important;}#smartplayer#smartplayer#smartplayer .adjustable {border: 4px solid red;}</style><g class="adjustable fg"><path class="smartplay-svg-color" d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path><path class="blink_3 smartplay-svg-color" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path><path class="blink_3 smartplay-svg-color" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path><path class="blink_2 smartplay-svg-color" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path><path class="blink_2 smartplay-svg-color" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path><path class="blink_1 smartplay-svg-color" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path><path class="blink_1 smartplay-svg-color" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path><polygon class="smartplay-svg-color" points="28.124,20.215 28.124,14.991 24.635,17.99  "></polygon><path class="smartplay-svg-color" d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path></g></svg><span class="smartplay-span">').concat(t.smartplay_options.bottom_text||"Clique para ouvir","</span></div>")),t.callAction.forEach((function(t){t.id=t.id||y.uniqID()})),t};var g={"zh-cn":{Top:"顶部",Bottom:"底部",Rolling:"滚动","About author":"关于作者","SmartPlayer feedback":"播放器意见反馈","About SmartPlayer":"关于 SmartPlayer 播放器",Loop:"洗脑循环",Speed:"速度",Normal:"正常","Video load failed":"视频加载失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退",Setting:"设置","Full screen":"全屏","Web full screen":"页面全屏",Send:"发送",Screenshot:"截图",AirPlay:"无线投屏",s:"秒","Show subtitle":"显示字幕","Hide subtitle":"隐藏字幕",Volume:"音量",Live:"直播","Video info":"视频统计信息"},"zh-tw":{Top:"頂部",Bottom:"底部",Rolling:"滾動","About author":"關於作者","SmartPlayer feedback":"播放器意見回饋","About SmartPlayer":"關於 SmartPlayer 播放器",Loop:"循環播放",Speed:"速度",Normal:"正常","Video load failed":"影片載入失敗","Switching to":"正在切換至","Switched to":"已經切換至",quality:"畫質",FF:"快進",REW:"快退",Setting:"設定","Full screen":"全螢幕","Web full screen":"頁面全螢幕",Send:"發送",Screenshot:"截圖",AirPlay:"無線投屏",s:"秒","Show subtitle":"顯示字幕","Hide subtitle":"隱藏字幕",Volume:"音量",Live:"直播","Video info":"影片統計訊息"}},b=function(t){var e=this;this.lang=t,this.tran=function(t){return g[e.lang]&&g[e.lang][t]?g[e.lang][t]:t}},w=r(22),k=r.n(w),T=r(23),E=r.n(T),x=r(24),S=r.n(x),L=r(25),_=r.n(L),A=r(26),R=r.n(A),D=r(27),C=r.n(D),I=r(28),O=r.n(I),P=r(29),M=r.n(P),F=r(30),B=r.n(F),N=r(31),U=r.n(N),j=r(32),G=r.n(j),z=r(33),Y=r.n(z),q=r(34),H=r.n(q),K=r(35),V=r.n(K),W=r(36),X=r.n(W),Q=r(37),$=r.n(Q),J=r(38),Z=r.n(J),tt=r(39),et=r.n(tt),rt=r(40),at=r.n(rt),nt=r(41),it=r.n(nt),st=r(42),ot=r.n(st),lt=r(43),ct=r.n(lt),ut=r(44),dt=r.n(ut),ht={play:k.a,pause:E.a,seekRewind:et.a,seekForward:at.a,volumeUp:S.a,volumeDown:_.a,volumeOff:R.a,full:C.a,fullWeb:O.a,setting:M.a,right:B.a,comment:U.a,commentOff:G.a,send:Y.a,pallette:H.a,camera:V.a,subtitle:$.a,loading:Z.a,airplay:X.a,synchronizeRewind:it.a,synchronizeForward:ot.a,warning:ct.a,vturb:dt.a},ft=r(45),pt=r.n(ft);function mt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var yt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=pt()({options:this.options,index:this.index,tran:this.tran,icons:ht,mobile:y.isMobile,video:{current:!0,pic:this.options.video.pic,pic_pause:this.options.video.pic_pause,pic_finish:this.options.video.pic_finish,pic_background:this.options.video.pic_background||"#000",screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle,autoplay:this.options.autoplay,volume:this.options.volume}}),e=document.createElement("div");e.classList.add("smartplayer-content"),e.innerHTML=t,this.container.appendChild(e),this.container.id="smartplayer",this.volumeBar=this.container.querySelector(".smartplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".smartplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".smartplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".smartplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".smartplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".smartplayer-volume-icon .smartplayer-icon-content"),this.seekButtonRewind=this.container.querySelector(".smartplayer-seek-rewind-icon .smartplayer-icon-content"),this.seekButtonForward=this.container.querySelector(".smartplayer-seek-forward-icon .smartplayer-icon-content"),this.playedBar=this.container.querySelector(".smartplayer-played"),this.loadedBar=this.container.querySelector(".smartplayer-loaded"),this.playedBarWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".smartplayer-bar-time"),this.video=this.container.querySelector(".smartplayer-video-current"),this.bezel=this.container.querySelector(".smartplayer-bezel-icon"),this.playButton=this.container.querySelector(".smartplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".smartplayer-mobile-play"),this.videoWrap=this.container.querySelector(".smartplayer-video-wrap"),this.controllerMask=this.container.querySelector(".smartplayer-controller-mask"),this.ptime=this.container.querySelector(".smartplayer-ptime"),this.settingButton=this.container.querySelector(".smartplayer-setting-icon"),this.settingBox=this.container.querySelector(".smartplayer-setting-box"),this.mask=this.container.querySelector(".smartplayer-mask"),this.loop=this.container.querySelector(".smartplayer-setting-loop"),this.loopToggle=this.container.querySelector(".smartplayer-setting-loop .smartplayer-toggle-setting-input"),this.speed=this.container.querySelector(".smartplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".smartplayer-setting-speed-item"),this.dtime=this.container.querySelector(".smartplayer-dtime"),this.controller=this.container.querySelector(".smartplayer-controller"),this.commentInput=this.container.querySelector(".smartplayer-comment-input"),this.commentButton=this.container.querySelector(".smartplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".smartplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".smartplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".smartplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".smartplayer-send-icon"),this.commentSendFill=this.container.querySelector(".smartplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".smartplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".smartplayer-full-icon"),this.webFullButton=this.container.querySelector(".smartplayer-full-in-icon"),this.menu=this.container.querySelector(".smartplayer-menu"),this.menuItem=this.container.querySelectorAll(".smartplayer-menu-item"),this.qualityList=this.container.querySelector(".smartplayer-quality-list"),this.camareButton=this.container.querySelector(".smartplayer-camera-icon"),this.airplayButton=this.container.querySelector(".smartplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".smartplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".smartplayer-subtitle-icon .smartplayer-icon-content"),this.subtitle=this.container.querySelector(".smartplayer-subtitle"),this.qualityButton=this.container.querySelector(".smartplayer-quality-icon"),this.barPreview=this.container.querySelector(".smartplayer-bar-preview"),this.barWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.infoPanel=this.container.querySelector(".smartplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".smartplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".smartplayer-info-panel-item-version .smartplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".smartplayer-info-panel-item-fps .smartplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".smartplayer-info-panel-item-type .smartplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".smartplayer-info-panel-item-url .smartplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".smartplayer-info-panel-item-resolution .smartplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".smartplayer-info-panel-item-duration .smartplayer-info-panel-item-data"),this.smartPlay=this.container.querySelector(".smartplayer-smartplay"),this.imageStart=this.container.querySelector(".smartplayer-image-start"),this.imageController=this.container.querySelector(".smartplayer-image-pause"),this.bigplay=this.container.querySelector(".smartplayer-bigplay"),this.resume=this.container.querySelector(".smartplayer-resume"),this.fakeBar=this.container.querySelector(".smartplayer-fake-bar")}}])&&mt(e.prototype,r),a&&mt(e,a),t}();function vt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var gt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change","startLoading","finishLoading","offline","online","smartplay_play"]}var e,r,a;return e=t,(r=[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var r=0;r<this.events[t].length;r++)this.events[t][r](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.videoEvents.indexOf(t)?"video":(console.error("Unknown event name: ".concat(t)),null)}}])&&vt(e.prototype,r),a&&vt(e,a),t}();function bt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var wt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isIframe=!!document.querySelector('meta[name="vturb-iframe"]'),this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",(function(){r.player.resize()})),this.player.events.on("webfullscreen_cancel",(function(){r.player.resize(),y.setScrollPosition(r.lastScrollPosition)}));var a=function(){r.player.resize(),r.isFullScreen("browser")?r.player.events.trigger("fullscreen"):(y.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition())},n=function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t!==r.player.container||(r.player.resize(),t?r.player.events.trigger("fullscreen"):(y.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition()))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",n),document.addEventListener("fullscreenchange",n)):(this.player.container.addEventListener("fullscreenchange",a),this.player.container.addEventListener("webkitfullscreenchange",a),document.addEventListener("msfullscreenchange",n),document.addEventListener("MSFullscreenChange",n))}var e,r,a;return e=t,(r=[{key:"isFullScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(t){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("smartplayer-fulled")}}},{key:"canDoFullscreenOnContent",value:function(){return this.player.container.requestFullscreen||this.player.container.mozRequestFullScreen||this.player.container.webkitRequestFullscreen||this.player.container.msRequestFullscreen}},{key:"requestFullscreenBrowser",value:function(){this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.container.msRequestFullscreen?this.player.container.msRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen&&this.player.video.webkitEnterFullScreen()}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";if("web"==t&&this.canDoFullscreenOnContent()&&(t="browser"),this.player.options.displays.fullscreen){var e="browser"===t?"web":"browser",r=this.isFullScreen(e);switch(r||(this.lastScrollPosition=y.getScrollPosition()),this.nextSibling=this.player.container.nextElementSibling,this.parentElement=this.player.container.parentElement,document.body.appendChild(this.player.container),t){case"browser":this.requestFullscreenBrowser();break;case"web":this.isIframe&&this.requestFullscreenBrowser(),this.player.container.classList.add("smartplayer-fulled"),document.body.classList.add("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}r&&this.cancel(e)}}},{key:"returnPosition",value:function(){this.parentElement&&(this.nextSibling?this.parentElement.insertBefore(this.player.container,this.nextSibling):this.parentElement.appendChild(this.player.container),this.parentElement=null)}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(this.returnPosition(),t){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("smartplayer-fulled"),document.body.classList.remove("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen("browser")?this.cancel("browser"):this.isFullScreen("web")?this.cancel("web"):this.request(t)}}])&&bt(e.prototype,r),a&&bt(e,a),t}();function kt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Tt=function(){function t(e,r,a,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.video=r,this.options=a,this.events=n,this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]){var e=this.video.textTracks[0];e.oncuechange=function(){var r=e.activeCues[0];if(t.container.innerHTML="",r){var a=document.createElement("div");a.appendChild(r.getCueAsHTML());var n=a.innerHTML.split(/\r?\n/).map((function(t){return"<p>".concat(t,"</p>")})).join("");t.container.innerHTML=n}t.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("smartplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("smartplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("smartplayer-subtitle-hide")?this.show():this.hide()}}])&&kt(e.prototype,r),a&&kt(e,a),t}();function Et(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar}var e,r,a;return e=t,(r=[{key:"set",value:function(t,e,r){e=Math.max(e,0),e=Math.min(e,1),this.elements[t]&&(this.elements[t].style[r]=100*e+"%")}},{key:"get",value:function(t){return this.elements[t]?parseFloat(this.elements[t].style.width)/100:0}}])&&Et(e.prototype,r),a&&Et(e,a),t}();function St(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Lt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.calcWidth=this.calcWidth.bind(this)}var e,r,a;return e=t,(r=[{key:"calcWidth",value:function(t){return 100*Math.sqrt(1-(t-=1)*t)}},{key:"set",value:function(t,e){if(!this.player.smartAutoPlay){var r=t/e;this.player.template.fakeBar.style.width="".concat(this.calcWidth(r),"%")}}}])&&St(e.prototype,r),a&&St(e,a),t}();function _t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var At=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.types=["loading","info","fps"],this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;this.types.map((function(e){return"fps"!==e&&t["init".concat(e,"Checker")](),e}))}},{key:"initloadingChecker",value:function(){var t=this,e=0,r=0,a=!1;this.loadingChecker=setInterval((function(){t.enableloadingChecker&&(r=t.player.video.currentTime,a||r!==e||t.player.video.paused||(t.player.container.classList.add("smartplayer-loading"),a=!0,t.player.events.trigger("startLoading")),a&&r>e&&!t.player.video.paused&&(t.player.container.classList.remove("smartplayer-loading"),a=!1,t.player.events.trigger("finishLoading")),e=r)}),100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame((function(){if(t.enablefpsChecker)if(t.initfpsChecker(),t.fpsStart){t.fpsIndex++;var e=new Date;e-t.fpsStart>1e3&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)}else t.fpsStart=new Date,t.fpsIndex=0;else t.fpsStart=0,t.fpsIndex=0}))}},{key:"initinfoChecker",value:function(){var t=this;this.infoChecker=setInterval((function(){t.enableinfoChecker&&t.player.infoPanel.update()}),1e3)}},{key:"enable",value:function(t){this["enable".concat(t,"Checker")]=!0,"fps"===t&&this.initfpsChecker()}},{key:"disable",value:function(t){this["enable".concat(t,"Checker")]=!1}},{key:"destroy",value:function(){var t=this;this.types.map((function(e){return t["enable".concat(e,"Checker")]=!1,t["".concat(e,"Checker")]&&clearInterval(t["".concat(e,"Checker")]),e}))}}])&&_t(e.prototype,r),a&&_t(e,a),t}();function Rt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Dt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.container.addEventListener("animationend",(function(){r.container.classList.remove("smartplayer-bezel-transition")}))}var e,r,a;return e=t,(r=[{key:"switch",value:function(t){this.container.innerHTML=t,this.container.classList.add("smartplayer-bezel-transition")}}])&&Rt(e.prototype,r),a&&Rt(e,a),t}();function Ct(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var It=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('".concat(e.url,"')"),this.events=e.events}var e,r,a;return e=t,(r=[{key:"resize",value:function(t,e,r){this.container.style.width="".concat(t,"px"),this.container.style.height="".concat(e,"px"),this.container.style.top="".concat(2-e,"px"),this.barWidth=r}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(t){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(t/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(t-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}])&&Ct(e.prototype,r),a&&Ct(e,a),t}();function Ot(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Pt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.autoHideTimer=0,this.player.container.addEventListener("mousemove",(function(){r.setAutoHide()})),this.player.container.addEventListener("click",(function(t){if(r.setAutoHide(),r.player.wasPlayed){if(y.isMobile){if(t.composedPath().includes(r.player.template.controller))return;if(t.composedPath().includes(r.player.template.smartPlay))return;r.player.toggle()}}else r.player.play()})),this.player.container.addEventListener("dblclick",(function(t){t.composedPath().includes(r.player.template.controller)||r.player.fullScreen.toggle("web")})),y.isMobile&&this.player.container.addEventListener("touchstart",(function(t){if(t.touches)switch(t.touches.length){case 2:if(t.composedPath().includes(r.player.template.controller))return;r.player.fullScreen.toggle("web")}})),this.player.on("play",(function(){r.setAutoHide()})),this.player.on("pause",(function(){r.setAutoHide()})),this.initPlayButton(),this.initSeekButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),this.initAirplayButton(),this.initVolumeButton()}var e,r,a;return e=t,(r=[{key:"initPlayButton",value:function(){var t=this;this.player.template.playButton&&this.player.template.playButton.addEventListener("click",(function(){t.player.toggle()})),this.player.template.bigplay&&this.player.template.bigplay.addEventListener("click",(function(){y.isMobile||t.player.toggle()})),this.player.template.mobilePlayButton&&this.player.template.mobilePlayButton.addEventListener("click",(function(){t.player.toggle()})),y.isMobile?(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.toggle()}))):(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.player.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.player.toggle()})))}},{key:"initSeekButton",value:function(){var t=this;this.player.options.displays.backward&&this.player.template.seekButtonRewind.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime-t.player.options.seekTime),t.player.bezel.switch(ht.synchronizeRewind)})),this.player.options.displays.forward&&this.player.template.seekButtonForward.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime+t.player.options.seekTime),t.player.bezel.switch(ht.synchronizeForward)}))}},{key:"initHighlights",value:function(){var t=this;this.player.on("durationchange",(function(){if(1!==t.player.video.duration&&t.player.video.duration!==1/0&&t.player.options.highlight){var e=document.querySelectorAll(".smartplayer-highlight");[].slice.call(e,0).forEach((function(e){t.player.template.playedBarWrap.removeChild(e)}));for(var r=0;r<t.player.options.highlight.length;r++)if(t.player.options.highlight[r].text&&t.player.options.highlight[r].time){var a=document.createElement("div");a.classList.add("smartplayer-highlight"),a.style.left=t.player.options.highlight[r].time/t.player.video.duration*100+"%",a.innerHTML='<span class="smartplayer-highlight-text">'+t.player.options.highlight[r].text+"</span>",t.player.template.playedBarWrap.insertBefore(a,t.player.template.playedBarTime)}}}))}},{key:"initThumbnails",value:function(){var t=this;this.player.options.video.thumbnails&&(this.thumbnails=new It({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",(function(){t.thumbnails.resize(160,t.player.video.videoHeight/t.player.video.videoWidth*160,t.player.template.barWrap.offsetWidth)})))}},{key:"initPlayedBar",value:function(){var t=this;if(this.player.options.displays.seekbar){var e=function(e){var r=((e.clientX||e.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),t.player.bar.set("played",r,"width"),t.player.template.ptime.innerHTML=y.secondToTime(r*t.player.video.duration)},r=function r(a){document.removeEventListener(y.nameMap.dragEnd,r),document.removeEventListener(y.nameMap.dragMove,e);var n=((a.clientX||a.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),t.player.bar.set("played",n,"width"),t.player.seek(t.player.bar.get("played")*t.player.video.duration),t.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(y.nameMap.dragStart,(function(){t.player.timer.disable("progress"),document.addEventListener(y.nameMap.dragMove,e),document.addEventListener(y.nameMap.dragEnd,r)})),this.player.template.playedBarWrap.addEventListener(y.nameMap.dragMove,(function(e){if(t.player.video.duration){var r=t.player.template.playedBarWrap.getBoundingClientRect().left,a=(e.clientX||e.changedTouches[0].clientX)-r;if(a<0||a>t.player.template.playedBarWrap.offsetWidth)return;var n=t.player.video.duration*(a/t.player.template.playedBarWrap.offsetWidth);y.isMobile&&t.thumbnails&&t.thumbnails.show(),t.thumbnails&&t.thumbnails.move(a),t.player.options.displays.seekbar_time&&(t.player.template.playedBarTime.style.left="".concat(a-(n>=3600?25:20),"px"),t.player.template.playedBarTime.innerText=y.secondToTime(n),t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))}})),this.player.template.playedBarWrap.addEventListener(y.nameMap.dragEnd,(function(){y.isMobile&&t.thumbnails&&t.thumbnails.hide()})),y.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.show(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))})),this.player.template.playedBarWrap.addEventListener("mouseleave",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.hide(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.add("smartplayer-hidden"))})))}}},{key:"initFullButton",value:function(){var t=this;this.player.template.browserFullButton&&this.player.template.browserFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("browser")})),this.player.template.webFullButton&&this.player.template.webFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("web")}))}},{key:"initVolumeButton",value:function(){var t=this;if(this.player.options.displays.volume){if(this.player.template.volumeBarWrapWrap){var e=function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)},r=function r(){document.removeEventListener(y.nameMap.dragEnd,r),document.removeEventListener(y.nameMap.dragMove,e),t.player.template.volumeButton.classList.remove("smartplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",(function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-y.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)})),this.player.template.volumeBarWrapWrap.addEventListener(y.nameMap.dragStart,(function(){document.addEventListener(y.nameMap.dragMove,e),document.addEventListener(y.nameMap.dragEnd,r),t.player.template.volumeButton.classList.add("smartplayer-volume-active")}))}this.player.template.volumeButtonIcon.addEventListener("click",(function(){t.player.video.muted?(t.player.video.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"width")):(t.player.video.muted=!0,t.player.template.volumeIcon.innerHTML=ht.volumeOff,t.player.bar.set("volume",0,"width"))}))}}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",(function(e){e.target.classList.contains("smartplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)}))}},{key:"initScreenshotButton",value:function(){var t=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",(function(){var e,r=document.createElement("canvas");r.width=t.player.video.videoWidth,r.height=t.player.video.videoHeight,r.getContext("2d").drawImage(t.player.video,0,0,r.width,r.height),r.toBlob((function(t){e=URL.createObjectURL(t);var r=document.createElement("a");r.href=e,r.download="smartplayer.png",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)})),t.player.events.trigger("screenshot",e)}))}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(t){switch(t.availability){case"available":this.template.airplayButton.disable=!1;break;default:this.template.airplayButton.disable=!0}this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var t=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Hide subtitle"),t.player.template.subtitleButtonInner.style.opacity=""})),this.player.events.on("subtitle_hide",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Show subtitle"),t.player.template.subtitleButtonInner.style.opacity="0.4"})),this.player.template.subtitleButton.addEventListener("click",(function(){t.player.subtitle.toggle()})))}},{key:"setAutoHide",value:function(){var t=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout((function(){t.player.video&&t.player.video.played.length&&!t.player.paused&&!t.disableAutoHide&&t.hide()}),3e3)}},{key:"show",value:function(){!this.player.smartAutoPlay&&this.player.wasPlayed&&this.player.container.classList.remove("smartplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("smartplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("smartplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}])&&Ot(e.prototype,r),a&&Ot(e,a),t}();function Mt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ft=function(){function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.displays.settings){this.player=e,this.player.template.mask.addEventListener("click",(function(){r.hide()})),this.player.template.settingButton.addEventListener("click",(function(){r.show()})),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",(function(){r.player.template.loopToggle.checked=!r.player.template.loopToggle.checked,r.player.template.loopToggle.checked?r.loop=!0:r.loop=!1,r.hide()})),this.player.template.speed.addEventListener("click",(function(){r.player.template.settingBox.classList.add("smartplayer-setting-box-narrow"),r.player.template.settingBox.classList.add("smartplayer-setting-box-speed")}));for(var a=function(t){r.player.template.speedItem[t].addEventListener("click",(function(){r.player.speed(r.player.template.speedItem[t].dataset.speed),r.hide()}))},n=0;n<this.player.template.speedItem.length;n++)a(n)}}var e,r,a;return e=t,(r=[{key:"hide",value:function(){var t=this;this.player&&(this.player.template.settingBox&&this.player.template.settingBox.classList.remove("smartplayer-setting-box-open"),this.player.template.mask.classList.remove("smartplayer-mask-show"),setTimeout((function(){t.player.template.settingBox&&(t.player.template.settingBox.classList.remove("smartplayer-setting-box-narrow"),t.player.template.settingBox.classList.remove("smartplayer-setting-box-speed"))}),300),this.player.controller.disableAutoHide=!1)}},{key:"show",value:function(){this.player.template.settingBox&&this.player.template.settingBox.classList.add("smartplayer-setting-box-open"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.player.controller.disableAutoHide=!0}}])&&Mt(e.prototype,r),a&&Mt(e,a),t}();var Bt=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.hotkey&&document.addEventListener("keydown",(function(t){if(e.focus){var r=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute("contenteditable");if("INPUT"!==r&&"TEXTAREA"!==r&&""!==a&&"true"!==a){var n=t||window.event;switch(n.keyCode){case 32:case 37:case 39:case 38:case 40:n.preventDefault()}}}})),document.addEventListener("keydown",(function(t){switch((t||window.event).keyCode){case 27:e.fullScreen.isFullScreen("web")&&e.fullScreen.cancel("web")}}))};function Nt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ut=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach((function(t,e){r.player.options.contextmenu[e]&&r.player.options.contextmenu[e].click&&t.addEventListener("click",(function(){r.player.options.contextmenu[e].click(r.player),r.hide()}))})),this.player.container.addEventListener("contextmenu",(function(t){var e=t||window.event;e.preventDefault();var a=r.player.container.getBoundingClientRect();r.show(e.clientX-a.left,e.clientY-a.top)})),this.player.template.mask.addEventListener("click",(function(){r.hide()}))}var e,r,a;return e=t,(r=[{key:"show",value:function(t,e){if(this.player.options.contextmenu.length&&!y.isMobile){this.player.template.menu.classList.add("smartplayer-menu-show");var r=this.player.container.getBoundingClientRect();t+this.player.template.menu.offsetWidth>=r.width?(this.player.template.menu.style.right=r.width-t+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=t+"px",this.player.template.menu.style.right="initial"),e+this.player.template.menu.offsetHeight>=r.height?(this.player.template.menu.style.bottom=r.height-e+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=e+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}}},{key:"hide",value:function(){this.player.template.mask.classList.remove("smartplayer-mask-show"),this.player.template.menu.classList.remove("smartplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}])&&Nt(e.prototype,r),a&&Nt(e,a),t}();function jt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Gt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.smartAutoPlay=!0,this.times=0,this.muted=this.muted.bind(this),this.removeSmartPlay=this.removeSmartPlay.bind(this),this.init(),this.player.template.smartPlay.addEventListener("click",this.removeSmartPlay),this.player.container.classList.add("smartplayer-smart-auto-play"),this.player.on("loadeddata",(function(){r.player.container.classList.add("smartplayer-show-smart-auto-play")}))}var e,r,a;return e=t,(r=[{key:"muted",value:function(){var t=this;this.player.container.classList.add("smartplayer-smart-auto-play");var e=this.player.video.muted;return this.player.video.muted="muted",o.a.resolve(this.player.video.play()).catch((function(){t.player.video.muted=e,t.times<5&&setTimeout((function(){t.player.video.currentTime<=.01&&t.init()}),50)}))}},{key:"removeSmartPlay",value:function(){var t=this;this.player.smartAutoPlay=!1,this.player.container.classList.remove("smartplayer-smart-auto-play"),this.player.template.smartPlay.remove(),this.player.seek(0),this.player.volume(100),this.player.events.trigger("smartplay_play"),this.player.events.trigger("play"),this.player.video.paused&&o.a.resolve(this.player.video.play()).catch((function(){setTimeout((function(){t.player.video.play()}),100)}))}},{key:"init",value:function(){if(this.times+=1,this.player.options.preview)return this.muted();!0!==this.player.video.muted&&"muted"!==this.player.video.muted?o.a.resolve(this.player.video.play()).then(this.removeSmartPlay).catch(this.muted):this.player.video.play()}}])&&jt(e.prototype,r),a&&jt(e,a),t}();function zt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}r(75);var Yt=r(54).v4,qt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e;var a=this.currentSession();this.hermes=new window.hermes.class({product:"vturb",account_id:this.player.options.accountId},{dynamicPath:function(){return"".concat(window.location.hostname,"/").concat(r.player.options.id,"/").concat(a,"/").concat(Yt())}}),this.options={video_id:this.player.options.videoId,player_id:this.player.options.id,session:a},this.played=!1,this.finished=!1,this.lastTime=0,this.events()}var e,r,a;return e=t,(r=[{key:"events",value:function(){var t=this;this.hermes.event("pageview",1,this.options),this.player.on("play",(function(){setTimeout((function(){t.played||t.player.smartAutoPlay||(t.played=!0,t.hermes.event("played",parseInt(Date.now()/1e3),t.options))}),100)})),window.addEventListener("beforeunload",(function(){return t.hermes.event("close",t.player.video.currentTime,t.options),null})),this.player.on("timeupdate",(function(){if(!t.player.smartAutoPlay){if(t.player.video.currentTime<t.lastTime+5)return;t.lastTime=t.player.video.currentTime,t.hermes.event("close",t.lastTime,t.options)}})),this.player.on("ended",(function(){t.hermes.event("finished",parseInt(Date.now()/1e3),t.options)}))}},{key:"currentSession",value:function(){var t;try{var e=localStorage.getItem("vturb.session"),r=JSON.parse(e);t=r.expires>=Date.now()?r.uuid:Yt()}catch(e){t=Yt()}try{localStorage.setItem("vturb.session",JSON.stringify({uuid:t,expires:Date.now()+432e5}))}catch(t){console.log("vturb cannot set data in localstorage")}return t}}])&&zt(e.prototype,r),a&&zt(e,a),t}();function Ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Xt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,(e.options.callAction||[]).length>0&&(this.onSeek=this.onSeek.bind(this),this.onDestroy=this.onDestroy.bind(this),this.callActions=e.options.callAction.map((function(t){var e=null,a=(e=t.type&&"inner_button"!==t.type?r.insertButtonBelow(t):document.getElementById(t.id)).querySelector(".smartplayer-call-action--link");return Kt(Kt({},t),{},{el:e,elLink:a,showed:!1})})),this.setEvents())}var e,r,a;return e=t,(r=[{key:"insertButtonBelow",value:function(t){var e=document.createElement("div");switch(e.id=t.id,e.classList.add("smartplayer-call-action","smartplayer-hide","smartplayer-call-action__".concat(t.position),"".concat(t.id)),t.type){case"below_button":var r=document.createElement("a");r.href=t.link||"#",r.title=t.btnText,r.target="_parent",r.innerText=t.btnText,r.classList.add("smartplayer-call-action--link");var a="18px";"md"==t.size&&(a="22px"),"lg"==t.size&&(a="26px");var n=document.createElement("style"),i=".smartplayer-call-action.smartplayer-hide {display: none}.smartplayer-call-action.".concat(t.id," {text-align: center;padding: 40px 10px;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link {background-color: ").concat(t.colors.background,";color: ").concat(t.colors.text,";padding: 1em 3em;display: inline-block;border-radius: 0.4em;font-size: ").concat(a,";line-height: 1;font-weight: 600;box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);text-decoration: none;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link:hover {background-color: ").concat(t.colors.background_hover,";color: ").concat(t.colors.text_hover,";text-decoration: none;}");n.innerText=i,e.appendChild(n),e.appendChild(r);break;case"custom_html":var s=document.createRange().createContextualFragment(t.custom_html||""),o=document.createElement("style");o.innerText=".smartplayer-call-action.smartplayer-hide {display: none}",e.appendChild(o),e.appendChild(s)}return y.insertAfter(this.player.container,e),e}},{key:"checkCallAction",value:function(t,e){!t.showed&&t.range.start<e&&t.range.finish>e?(t.showed=!0,t.el&&t.el.classList.remove("smartplayer-hide")):t.showed&&(t.range.start>e||t.range.finish<e)&&(t.showed=!1,t.el&&t.el.classList.add("smartplayer-hide"))}},{key:"setEvents",value:function(){this.player.on("timeupdate",this.onSeek)}},{key:"onSeek",value:function(){var t=this,e=this.player.video.currentTime;this.player.smartAutoPlay||this.player.inResume||this.callActions.forEach((function(r){new o.a((function(){t.checkCallAction(r,e)}))}))}},{key:"onDestroy",value:function(){}}])&&Wt(e.prototype,r),a&&Wt(e,a),t}();function Qt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var $t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.hasLocalstorage=y.checkLocalStorage(),this.id=e.options.id,e.options.resume&&this.get()&&(this.inResume=!0,this.player.options.autoplay=!1)}var e,r,a;return e=t,(r=[{key:"start",value:function(){this.player.options.resume&&(this.setEvents(),this.get()&&(this.inResume=!0,this.player.options.autoplay=!1,this.show()))}},{key:"show",value:function(){var t=this;this.player.pause(),this.el=this.player.template.resume,this.play=this.el.querySelector(".smartplayer-resume__play"),this.rewind=this.el.querySelector(".smartplayer-resume__rewind"),this.player.container.classList.add("smartplayer-in-resume"),this.player.inResume=!0,this.el.style.display="block",this.el.addEventListener("click",this.onBackdropClick,!1),this.play.addEventListener("click",this.onPlay.bind(this),!0),this.rewind.addEventListener("click",this.onRewind.bind(this),!0),this.player.video.load(),this.player.seek(this.get()),this.player.on("loadeddata",(function(){t.player.video.currentTime<=.01&&t.player.seek(t.get())}))}},{key:"onBackdropClick",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"onPlay",value:function(){this.resume()}},{key:"onRewind",value:function(){this.player.seek(0),this.resume()}},{key:"resume",value:function(){this.player.play(),this.player.container.classList.remove("smartplayer-in-resume"),this.el.style.display="none",this.player.inResume=!1}},{key:"onSeek",value:function(){if(!this.player.smartAutoPlay){var t=this.player.video.currentTime;t>5&&this.set(t)}}},{key:"setEvents",value:function(){this.onSeek=this.onSeek.bind(this),this.player.on("timeupdate",this.onSeek)}},{key:"get",value:function(){return this.hasLocalstorage?window.localStorage.getItem(this.id):y.cookieGet(this.id)}},{key:"set",value:function(t){return this.hasLocalstorage?window.localStorage.setItem(this.id,t):y.cookieSet(this.id,t)}}])&&Qt(e.prototype,r),a&&Qt(e,a),t}();var Jt=function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.options.video.pic_finish&&(this.player.on("ended",(function(){r.player.container.classList.add("smartplayer-finished")})),this.player.on("play",(function(){r.player.container.classList.contains("smartplayer-finished")&&r.player.container.classList.remove("smartplayer-finished")}))),this.player.template.imageController&&this.player.template.imageController.addEventListener("click",(function(){y.isMobile||r.player.toggle()})),this.player.options.video.pic){var a=new Image;a.onload=function(){return r.player.template.imageStart.classList.remove("smartplayer-opacity-0")},a.src=this.player.options.video.pic}};function Zt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var te=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",(function(){r.hide()}))}var e,r,a;return e=t,(r=[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("smartplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("smartplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("smartplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.8.3"," ").concat("v1.8.0-15-g8483620"),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration}},{key:"fps",value:function(t){this.template.infoFPS.innerHTML="".concat(t.toFixed(1))}}])&&Zt(e.prototype,r),a&&Zt(e,a),t}();function ee(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var re=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isOffline=!1,this.timeoutPromise=null,this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;window.addEventListener("offline",(function(){t.isOffline=!0})),window.addEventListener("online",(function(){t.setOnline(),t.isOffline=!1})),this.player.on("startLoading",(function(){t.isOffline&&t.setOffline()}))}},{key:"setOffline",value:function(){var t=this;this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.timeoutPromise=setTimeout((function(){t.player.container.classList.add("smartplayer-offline"),t.player.events.trigger("offline")}),5e3)}},{key:"setOnline",value:function(){this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.player.container.classList.remove("smartplayer-offline"),this.player.events.trigger("online")}}])&&ee(e.prototype,r),a&&ee(e,a),t}(),ae=r(48),ne=r.n(ae);function ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function se(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var le=0,ce={instances:[]},ue=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mounted=!1,this.options=v(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(r),!0).forEach((function(e){se(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({preload:"webtorrent"===e.video.type?"none":"metadata"},e)),this.container=this.options.container,this.events=new gt,le++,ce.instances.push(this)}var e,r,a;return e=t,a=[{key:"version",get:function(){return"1.8.3"}},{key:"instances",get:function(){return ce}}],(r=[{key:"mount",value:function(){var t=this;this.mounted=!0,this.videoMounted=!1,this.container.classList.add("smartplay","smartplayer-initial"),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS"),this.options.live?this.container.classList.add("smartplayer-live"):this.container.classList.remove("smartplayer-live"),y.isMobile&&this.container.classList.add("smartplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("smartplayer-arrow"),this.tran=new b(this.options.lang).tran,this.resume=new $t(this),this.template=new yt({container:this.container,options:this.options,index:le,tran:this.tran}),this.video=document.createElement("video"),this.video.classList.add("smartplayer-video"),this.video.classList.add("smartplayer-video-current"),this.video.muted=this.options.volume<=0,this.video.preload=this.options.preload,this.video.autoplay=!!this.options.autoplay,this.video.playsInline=!0,this.bar=new xt(this.template),this.fakeBar=new Lt(this),this.bezel=new Dt(this.template.bezel),this.fullScreen=new wt(this),this.controller=new Pt(this),this.imageController=new Jt(this),this.setting=new Ft(this),this.plugins={},document.addEventListener("click",(function(){t.focus=!1}),!0),this.container.addEventListener("click",(function(){t.focus=!0}),!0),this.paused=!0,this.timer=new At(this),this.hotkey=new Bt(this),this.contextmenu=new Ut(this),("smartplay"===this.options.autoplay||this.options.resume||this.options.preview)&&this.mountVideo(),this.infoPanel=new te(this),this.callaction=new Xt(this),this.network=new re(this),this.resume.start(),this.inResume||("smartplay"===this.options.autoplay?this.smartplay=new Gt(this):this.options.autoplay?this.play():this.controller.hide()),this.options.preview||(this.analytics=new qt(this)),this.ignoreMediaNotifications()}},{key:"ignoreMediaNotifications",value:function(){navigator.mediaSession&&"function"==typeof navigator.mediaSession.setActionHandler&&(navigator.mediaSession.setActionHandler("play",(function(){})),navigator.mediaSession.setActionHandler("pause",(function(){})),navigator.mediaSession.setActionHandler("stop",(function(){})),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekto",(function(){})),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null))}},{key:"seek",value:function(t){t=Math.max(t,0),this.video.duration&&(t=Math.min(t,this.video.duration)),this.video.currentTime=t,this.bar.set("played",t/this.video.duration,"width"),this.template.ptime&&(this.template.ptime.innerHTML=y.secondToTime(t)),this.options.fake_bar&&this.fakeBar.set(t,this.video.duration)}},{key:"play",value:function(t){var e=this;if(this.paused=!1,this.wasPlayed=!0,!this.videoMounted)return this.mountVideo(this.play.bind(this));if(this.container.classList.remove("smartplayer-initial"),this.template.bigplay&&this.template.bigplay.classList.add("smartplayer-hidden"),this.video.paused&&!y.isMobile&&this.bezel.switch(ht.play),this.template.playButton&&(this.template.playButton.innerHTML=ht.pause),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=ht.pause),t||o.a.resolve(this.video.play()).catch((function(){e.pause()})).then((function(){e.video.play()})),this.timer.enable("loading"),this.container.classList.remove("smartplayer-paused"),this.container.classList.add("smartplayer-playing"),this.options.mutex&&ce.instances.length>1)for(var r=0;r<ce.instances.length;r++)this!==ce.instances[r]&&ce.instances[r].pause()}},{key:"pause",value:function(t){(this.options.displays.play_pause||this.options.displays.big_play)&&this.videoMounted&&(this.paused=!0,this.container.classList.remove("smartplayer-loading"),this.template.bigplay&&this.template.bigplay.classList.remove("smartplayer-hidden"),this.video.paused||y.isMobile||this.bezel.switch(ht.pause),this.template.playButton&&(this.template.playButton.innerHTML=ht.play),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=ht.play),t||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("smartplayer-playing"),this.container.classList.add("smartplayer-paused"))}},{key:"switchVolumeIcon",value:function(){this.template.volumeIcon&&(this.volume()>=.95?this.template.volumeIcon.innerHTML=ht.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=ht.volumeDown:this.template.volumeIcon.innerHTML=ht.volumeOff)}},{key:"volume",value:function(t,e,r){if(t=parseFloat(t),!isNaN(t)){t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t,"width");var a="".concat((100*t).toFixed(0),"%");this.template.volumeBarWrapWrap&&(this.template.volumeBarWrapWrap.dataset.balloon=a),r||this.notice("".concat(this.tran("Volume")," ").concat((100*t).toFixed(0),"%")),this.video.volume=t,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){!this.videoMounted||this.video.paused?this.play():this.pause()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"switchVideo",value:function(t){this.pause(),this.video.poster=t.pic?t.pic:"",this.video.src=t.url,this.initMSE(this.video,t.type||"auto")}},{key:"initMSE",value:function(t,e){var r=this;if(this.type=e,this.options.video.customType&&this.options.video.customType[e])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[e])?this.options.video.customType[e](this.video,this):console.error("Illegal customType: ".concat(e));else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(t.src)?this.type="hls":this.type="normal"),this.type){case"hls":new f(t,this,this.options.pluginOptions.hls);break;case"dash":if(window.dashjs){var a=window.dashjs.MediaPlayer().create().initialize(t,t.src,!1),n=this.options.pluginOptions.dash;a.updateSettings(n),this.plugins.dash=a,this.events.on("destroy",(function(){window.dashjs.MediaPlayer().reset(),delete r.plugins.dash}))}else this.notice("Error: Can't find dashjs.");break;default:t.src=this.options.video.url}}},{key:"initVideo",value:function(t,e){var r=this;this.initMSE(t,e),this.on("durationchange",(function(){r.template.dtime&&1!==t.duration&&t.duration!==1/0&&(r.template.dtime.innerHTML=y.secondToTime(t.duration))})),this.on("progress",(function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;r.bar.set("loaded",e,"width")})),this.on("error",(function(){r.video.error&&r.tran&&r.notice&&"webtorrent"!==r.type&&r.notice(r.tran("Video load failed"),-1)})),this.on("ended",(function(){r.bar.set("played",1,"width"),r.setting.loop?(r.seek(0),r.play()):r.pause()})),this.on("play",(function(){r.paused&&r.play(!0)})),this.on("pause",(function(){r.paused||r.pause(!0)})),this.on("timeupdate",(function(){r.bar.set("played",r.video.currentTime/r.video.duration,"width");var t=y.secondToTime(r.video.currentTime);r.options.fake_bar&&r.fakeBar.set(r.video.currentTime,r.video.duration),r.template.ptime&&r.template.ptime.innerHTML!==t&&(r.template.ptime.innerHTML=t)}));for(var a=function(e){t.addEventListener(r.events.videoEvents[e],(function(){r.events.trigger(r.events.videoEvents[e])}))},n=0;n<this.events.videoEvents.length;n++)a(n);this.options.subtitle&&this.template.subtitle&&(this.subtitle=new Tt(this.template.subtitle,this.video,this.options.subtitle,this.events))}},{key:"mountVideo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.template.videoWrap.insertBefore(this.video,this.template.videoWrap.getElementsByTagName("div")[0]),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.volume(this.options.volume),this.videoMounted=!0,this.on("loadeddata",(function(){var e=t.video.videoHeight/t.video.videoWidth*100;e&&(t.container.style.padding="".concat(e,"% 0 0"))})),this.on("canplay",(function(){"function"==typeof e&&e(),t.removePreloadElement(),e=null}))}},{key:"removePreloadElement",value:function(){var t=document.getElementById("thumb_".concat(this.options.id));t&&this.container.removeChild(t);var e=document.getElementById("backdrop_".concat(this.options.id));e&&this.container.removeChild(e)}},{key:"switchQuality",value:function(t){var e=this;if(t="string"==typeof t?parseInt(t):t,this.qualityIndex!==t&&!this.switchingQuality){this.qualityIndex=t,this.switchingQuality=!0,this.quality=this.options.video.quality[t],this.template.qualityButton&&(this.template.qualityButton.innerHTML=this.quality.name);var r=this.video.paused;this.video.pause();var a=ne()({current:!1,pic:null,autoplay:this.options.autoplay,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),n=(new DOMParser).parseFromString(a,"text/html").body.firstChild;this.template.videoWrap.insertBefore(n,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=n,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",(function(){if(e.prevVideo){if(e.video.currentTime!==e.prevVideo.currentTime)return void e.seek(e.prevVideo.currentTime);e.template.videoWrap.removeChild(e.prevVideo),e.video.classList.add("smartplayer-video-current"),r||e.video.play(),e.prevVideo=null,e.notice("".concat(e.tran("Switched to")," ").concat(e.quality.name," ").concat(e.tran("quality"))),e.switchingQuality=!1,e.events.trigger("quality_end")}}))}}},{key:"notice",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice&&(this.template.notice.innerHTML=t,this.template.notice.style.opacity=a,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",t),r>0&&(this.noticeTime=setTimeout((function(){e.template.notice.style.opacity=0,e.events.trigger("notice_hide")}),r)))}},{key:"resize",value:function(){this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(t){this.video.playbackRate=t}},{key:"destroy",value:function(){this.mounted&&(this.pause(),this.controller.destroy(),this.timer.destroy(),this.container.innerHTML="",this.events.trigger("destroy"),this.video&&(this.video.src="")),ce.instances.splice(ce.instances.indexOf(this),1)}}])&&oe(e.prototype,r),a&&oe(e,a),t}(),de=r(3),he=r.n(de);function fe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var pe=r(57),me=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.options.container.id="smartplayer",this.axiosInstance=pe.create({timeout:2e3}),this.domain=window.location.host,window.location!==window.parent.location){var r=document.referrer.match(/[http|https]:\/\/(.+?)(\/|&|$)/);this.domain=r?r[1]:window.parent.location.host}this.options.preview?this.m3u8_path="https://".concat(e.cdn,"/").concat(e.accountId,"/").concat(e.videoId,"/main.m3u8"):this.m3u8_path=e.video.url}var e,r,a;return e=t,(r=[{key:"check",value:function(t){var e=this;this.axiosInstance.post("https://api.vturb.com.br/vturb/check",{m3u8_path:this.m3u8_path,player_id:this.options.id,domain:this.domain}).then((function(){return!0})).catch((function(t){switch((t.response||{}).status){case 401:setTimeout((function(){e.options.container.innerHTML=he()({icons:ht,message:"Não foi possível exibir o vídeo!"})}),50);break;case 403:setTimeout((function(){e.options.container.innerHTML=he()({icons:ht,message:"Sua fatura está em aberto. Atualize o método de pagamento no painel da VTurb."})}),50);break;case 406:setTimeout((function(){e.options.container.innerHTML=he()({icons:ht,message:"Este domínio não está na lista de domínios permitidos! Atualize as configurações de domínios no painel da VTurb."})}),50);break;default:return!0}return!1})).then(t)}}])&&fe(e.prototype,r),a&&fe(e,a),t}();function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){ge(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var be=function(t,e,r,a){we(),console.info("::VTURB:: v(".concat("1.8.3",")"));var n=ve(ve({id:"".concat(t).replace(/vid_|scr_/,"")},a||{}),{},{videoId:r,accountId:e,container:document.getElementById(t)});n.cdn=n.cdn||"cdn.converteai.net",n.video=n.video||{},n.video.url=n.video.url||"https://".concat(n.cdn,"/").concat(e,"/").concat(r,"/main.m3u8"),n.video.type=n.video.type||"hls";var i=new ue(n);new me(n).check((function(t){return t?i.mount():i.destroy()}))},we=function(){var t,e=null;window.location.search.slice(1).split("&").forEach((function(t){/^inspect=/.test(t)&&(e=t.split("=")[1])})),e&&((t=document.createElement("script")).src="https://remotejs.com/agent/agent.js",t.setAttribute("data-consolejs-channel",e),document.head.appendChild(t))};window.smrtvds&&((window.smrtvds.queue||[]).forEach((function(t){return be.apply(window.smrtvds,t)})),window.smrtvds.callMethod=be);e.default=ue.instances},function(t,e,r){"use strict";r.r(e);r(52);var a,n=r(46),i=r(47),s=r.n(i),o=new Uint8Array(16);function l(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"==typeof t&&c.test(t)},d=[],h=0;h<256;++h)d.push((h+256).toString(16).substr(1));var f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};var p=function(t,e,r){var a=(t=t||{}).random||(t.rng||l)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=a[n];return e}return f(a)};function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},i=Object.keys(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k(t,e,r,a,n,i,s){try{var o=t[i](s),l=o.value}catch(t){return void r(t)}o.done?e(l):Promise.resolve(l).then(a,n)}function T(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function s(t){k(i,a,n,s,o,"next",t)}function o(t){k(i,a,n,s,o,"throw",t)}s(void 0)}))}}function E(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var x=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hermes=e,this.timer=3e3,this.online=navigator.onLine,this.disableCheck=!1,this.storage=s.a.createInstance({name:"hermes"}),this.deviceSave(),this.timeoutId=null,this.lastInteraction=null,this.pusher=[],this.errorCounter=0,this.events(),setInterval((function(){r.send()}),15e3)}var e,r,a,n,i,o;return e=t,(r=[{key:"deviceSave",value:(o=T(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.getItem("uid");case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=p();case 5:this.device=t.t0,this.storage.setItem("uid",this.device),this.send();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"events",value:function(){window.addEventListener("online",this.updateOnlineStatus.bind(this)),window.addEventListener("offline",this.updateOnlineStatus.bind(this)),window.addEventListener("beforeunload",this.onClose.bind(this))}},{key:"event",value:function(t){var e=t.event,r=t.value,a=w(t,["event","value"]);if(!e||void 0===r)throw new Error("Event missing event or value");this.push(g({event:e,value:r},a)),this.send()}},{key:"conversion",value:function(t){var e=t.name,r=t.value,a=void 0===r?1:r,n=w(t,["name","value"]);if(!e||!a)throw new Error("Conversion missing name or value");this.push(g({convertion:!0,name:e,value:a},n)),this.send()}},{key:"message",value:function(t){this.push(t),this.send()}},{key:"push",value:(i=T(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=19;break}if(!this.online){t.next=5;break}this.pusher=[].concat(m(this.pusher),m(Array.isArray(e)?e:[e])),t.next=19;break;case 5:return t.t0=this.storage,t.t1="hermesToSync",t.t2=[],t.t3=m,t.next=11,this.storage.getItem("hermesToSync");case 11:if(t.t4=t.sent,t.t4){t.next=14;break}t.t4=[];case 14:t.t5=t.t4,t.t6=(0,t.t3)(t.t5),t.t7=m(Array.isArray(e)?e:[e]),t.t8=t.t2.concat.call(t.t2,t.t6,t.t7),t.t0.setItem.call(t.t0,t.t1,t.t8);case 19:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"defaultParams",value:function(){var t={};return this.device&&(t.device_id=this.device),this.hermes.options.product&&(t.product=this.hermes.options.product),this.hermes.options.account_id&&(t.account_id=this.hermes.options.account_id),t}},{key:"send",value:(n=T(regeneratorRuntime.mark((function t(){var e,r,a=this,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],this.device){t.next=3;break}return t.abrupt("return");case 3:if(!(this.errorCounter>=3)){t.next=5;break}return t.abrupt("return");case 5:if(!(e||this.disableCheck||this.lastInteraction+this.timer<Date.now())){t.next=17;break}return t.next=8,this.storage.getItem("hermesToSync");case 8:if(!(((r=t.sent)||[]).length>0)){t.next=14;break}return t.next=12,this.storage.setItem("hermesToSync",[]);case 12:t.next=16;break;case 14:r=this.pusher,this.pusher=[];case 16:this.online?r&&(!Array.isArray(r)||r.length>0)&&(this.lastInteraction=Date.now(),setTimeout((function(){a.send()}),this.timer+100),navigator.sendBeacon("".concat("https://api.vturb.com.br","/hermes/").concat(this.hermes.settings.dynamicPath()),JSON.stringify(g(g({},this.defaultParams()),{},{data:r})))):this.push(r);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onClose",value:function(){return this.disableCheck=!0,this.send(!0),null}},{key:"message",value:function(t){this.errorCounter=0,t.target&&"hermesSync"===t.target&&("function"==typeof this[t.type]?this[t.type](t):this.message(t))}},{key:"updateOnlineStatus",value:function(){this.errorCounter=0,this.send(!0),this.online=navigator.onLine}}])&&E(e.prototype,r),a&&E(e,a),t}();function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var R={product:null,account_id:null},D={dynamicPath:function(){return"receive"}},C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L(L({},R),e),this.settings=L(L({},D),r),this.sync=new x(this)}var e,r,a;return e=t,(r=[{key:"event",value:function(t,e,r){this.sync.message(L({target:"hermesSync",type:"event",event:t,value:e},r))}},{key:"conversion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sync.message(L({target:"hermesSync",type:"conversion",name:t,value:e},r))}}])&&A(e.prototype,r),a&&A(e,a),t}();window.hermes||(console.log("::HERMES:: v(".concat(n.a,")")),window.hermes=window.hermes||new C,window.hermes.class=C);e.default=window.hermes}]).default}));